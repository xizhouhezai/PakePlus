import{h as m}from"./statisitics-CehHs8Ha.js";import{u}from"./loading-CB2rs24d.js";import{C as d}from"./index-DVwIKmiX.js";import{d as p,a as C,h as f,b as y,o as b,c as M,k as i,e as _,w as N,u as g,_ as v}from"./index-C4AMdMz2.js";const L={class:"card"},k=p({__name:"historyMemberChart",setup(w){const{loading:n,setLoading:o}=u(),t=C({chartList:[],historyMemberChart:"",nums:0,lastNums:0});function h(){const a=[],e=[],r=t.chartList;if(t.chartList){r.forEach(s=>{a.push({date:s.date,res:s.num||0,lastNum:s.num||0,title:"最近48小时"}),e.push({date:s.date,res:s.lastNum||0,lastNum:s.lastNum||0,title:"上一周期"})});const c=[...a,...e];t.historyMemberChart.data(c),t.historyMemberChart.scale({activeQuantity:{range:[0,1],nice:!0}}),t.historyMemberChart.tooltip({showCrosshairs:!0,shared:!0}),t.historyMemberChart.line().position("date*lastNum").color("title").label("lastNum").shape("smooth"),t.historyMemberChart.point().position("date*lastNum").color("title").label("lastNum").shape("circle").style({stroke:"#fff",lineWidth:1}),t.historyMemberChart.area().position("date*lastNum").color("title").shape("smooth"),t.historyMemberChart.render()}}async function l(){o(!0);const a=await m();a.data.success&&(t.chartList=a.data.result,t.historyMemberChart||(t.historyMemberChart=new d({container:"historyMemberChart",autoFit:!0,height:500,padding:[70,70,70,70]}))),h(),o(!1)}return f(()=>{l()}),(a,e)=>{const r=y("a-spin");return b(),M("div",L,[e[1]||(e[1]=i("div",{class:"title"}," 最近48小时在线人数（整点为准） ",-1)),_(r,{style:{display:"block"},loading:g(n)},{default:N(()=>e[0]||(e[0]=[i("div",{id:"historyMemberChart"},null,-1)])),_:1},8,["loading"])])}}}),D=v(k,[["__scopeId","data-v-27e9a9cd"]]);export{D as default};
