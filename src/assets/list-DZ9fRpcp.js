import{W as V,X as I}from"./promotion-ChRoyrm_.js";import{u as D}from"./useCurrentInstance-BLlvmEjv.js";import{ah as E}from"./tools-BfzgO_2s.js";import{U as L,V as A}from"./dist-PezRi_EG.js";import{d as B,n as M,r as m,b as r,o as b,j as _,w as a,e as o,u as s,f as u,t as k,k as W,s as $,M as h}from"./index-C4AMdMz2.js";const F=B({__name:"list",setup(O){var c;const y=(c=D().globalProperties)==null?void 0:c.$modal,S=M(),p=m(""),d=m("START"),n=m({sort:"createTime",promotionStatus:d.value}),g=[{label:"活动名称",model:"promotionName",disabled:!1,input:!0},{label:"活动时间",model:"selectDate",disabled:!1,datePicker:{type:"range"}}],T=[{title:"活动名称",dataIndex:"promotionName",width:300},{title:"活动时间",dataIndex:"time",width:350,slot:!0,slotTemplate:"time"},{title:"所属店铺",dataIndex:"storeName",slot:!0,store:!0,width:300},{title:"状态",dataIndex:"promotionStatus",slot:!0,slotData:{badge:E}}],C={title:"操作",width:250,methods:[{slot:!0,slotTemplate:"btnList"}]};function x(i){S.push({name:"pintuan-goods",query:{id:i.id}})}function v(i){y.confirm({title:"确认关闭",content:"您确认要关闭此拼团活动？",alignCenter:!1,onOk:async()=>{(await I(i.id)).data.success&&(h.success("操作成功！"),p.value.init())}})}return(i,e)=>{const l=r("a-tab-pane"),N=r("a-tabs"),f=r("a-button"),w=r("a-space"),P=r("a-card");return b(),_(P,{class:"general-card",title:"拼团活动",bordered:!1},{default:a(()=>[o(N,{"default-active-key":s(d),onChange:e[0]||(e[0]=t=>{s(n).promotionStatus=t})},{default:a(()=>[o(l,{key:"NEW",title:"未开始"}),o(l,{key:"START",title:"已开始"}),o(l,{key:"END",title:"已结束"}),o(l,{key:"CLOSE",title:"已关闭"})]),_:1},8,["default-active-key"]),o(s(L),{columns:g,"time-type":"timestamp",onReset:e[1]||(e[1]=t=>{n.value={...s(n),...t}}),onSearch:e[2]||(e[2]=t=>{n.value={...s(n),...t}})}),o(s(A),{ref_key:"tablePageRef",ref:p,columns:T,methods:C,api:s(V),"api-params":s(n),bordered:!0},{time:a(({data:t})=>[u(k(t.startTime),1),e[3]||(e[3]=W("span",{style:{margin:"0 10px"}},"-",-1)),u(k(t.endTime),1)]),btnList:a(({data:t})=>[o(w,null,{default:a(()=>[o(f,{type:"text",status:"success",onClick:R=>x(t)},{default:a(()=>e[4]||(e[4]=[u(" 查看 ")])),_:2},1032,["onClick"]),(t==null?void 0:t.promotionStatus)==="START"||(t==null?void 0:t.promotionStatus)==="NEW"?(b(),_(f,{key:0,type:"text",status:"danger",onClick:R=>v(t)},{default:a(()=>e[5]||(e[5]=[u(" 关闭 ")])),_:2},1032,["onClick"])):$("",!0)]),_:2},1024)]),_:1},8,["api","api-params"])]),_:1})}}});export{F as default};
