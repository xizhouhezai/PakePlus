import{d as H,r as d,p as z,at as R,h as N,E as V,au as F,M as J,b as P,v as X,o as s,c as v,x as I,k as g,u as a,j as _,s as m,F as Z,i as K,e as Q,w as x,f as C,t as W,q as Y,ai as ee,Z as te,C as le,_ as ae}from"./index-C4AMdMz2.js";import{t as se,a as oe,b as ie}from"./goods-BAkI7s7V.js";import{l as re}from"./login-LMcMMDCJ.js";import ne from"./tpl_banner-BT6Jf_2W.js";import{_ as M}from"./tpl_top_ad.vue_vue_type_script_setup_true_lang-CUHcQYi8.js";import{u as ue}from"./useDrop-BbPs1LL9.js";import{_ as ce}from"./tpl_ad.vue_vue_type_script_setup_true_lang-m2PIctEJ.js";import{_ as pe}from"./tpl_block.vue_vue_type_script_setup_true_lang-BpgsjFTC.js";import{_ as de}from"./tpl_bottom.vue_vue_type_script_setup_true_lang-B3UKrMvg.js";import ve from"./tpl_flex_four-Bh12MGAd.js";import me from"./tpl_flex_three-MEl9UZ9N.js";import fe from"./tpl_goods-CXAz1lEN.js";import _e from"./tpl_login-BhH9Y6sX.js";import ge from"./tpl_mix-CDyPZwhj.js";import xe from"./tpl_recommend-ANqk9Z88.js";import be from"./tpl_seckill-GFvsqkYl.js";import A from"./item-5E4Pimq_.js";import{u as he}from"./index-B0S7r7AY.js";import"./tpl_top_nav-B3Pn9EcA.js";import"./useDrag-BGaSN1AF.js";import"./filters-D05Q2eUM.js";import"./brandModal-utvFF_Ic.js";import"./goodsModal-JzBTtUMk.js";const ye=[{type:"bottom",name:"底部",roles:[],models:[{label:"背景颜色",model:"background",bind:"background"},{label:"文字颜色",model:"background",bind:"color"}],data:{background:"#fff",color:"#333333",list:[{title:"购物指南",list:[{title:"购物流程",url:""},{title:"会员介绍",url:""},{title:"生活旅行",url:""},{title:"常见问题",url:""}],url:""},{title:"配送方式",list:[{title:"上门自提",url:""},{title:"配送查询",url:""},{title:"收取标准",url:""},{title:"物流规则",url:""}]},{title:"支付方式",list:[{title:"在线支付",url:""},{title:"公司转账",url:""},{title:"余额支付",url:""},{title:"积分支付",url:""}]},{title:"售后服务",list:[{title:"售后政策",url:""},{title:"退款说明",url:""},{title:"返修/退货",url:""},{title:"取消订单",url:""}]}],service:[{url:"",title:"关于我们"},{url:"",title:"联系我们"},{url:"",title:"帮助中心"},{url:"",title:"售后政策"}],guide:[{url:"",title:"品类齐全，轻松购物"},{url:"",title:"多仓直发，极速配送"},{url:"",title:"正品行货，精致服务"},{url:"",title:"天天低价，畅选无忧"}]}}],De={goods:fe,advert:ce,mix:ge,whiteSpace:pe,flexThree:me,flexFour:ve,recommend:xe,seckill:be,top_nav:M,login:_e,bottom:de},Pe={class:"pc",flex:"","justify-center":"","flex-j-c":"","flex-a-c":""},Ce={class:"model","h-full":""},Oe={"w-1200px":""},Te={key:1,"h-24":"","w-1184px":"",flex:"","flex-j-c":"","flex-a-c":"","bg-blue-100":""},we={class:"div-box"},ke={"h-full":"",class:"pc-model"},Ne={key:1,class:"border-left",absolute:"","left--10px":"","left-0px":"","z-99":"","w-1px":""},Ie={key:2,class:"border-right",absolute:"","right-0px":"","top-0px":"","z-99":"","w-1px":""},Ae=H({__name:"pc-content",setup(Me){const o=he(),i=d(""),O=d(0),T=d(0),f=z(),[B]=R(),b=d(!1),S=De,l=d([]),c=d([]),r=d(""),[,L]=ue(()=>({accept:"box",drop:t=>E(t),collect:t=>({isOver:t.isOver(),canDrop:t.canDrop(),getItemType:t.getItemType(),isShallowOver:t.isOver({shallow:!0})})}));N(()=>{var t;r.value=l.value.length===0?0:"",o.setPcActiveIndex(Number(r.value)),o.setPcDesign(l.value),i.value=String((t=f==null?void 0:f.query)==null?void 0:t.pageType),w()}),V([()=>o.indexOfPc,c],([t])=>{r.value=t||0},{deep:!0});const y=d({data:{name:""},index:0});function $(t,e){const n=l.value[t];l.value.splice(t,1),l.value.splice(e,0,n),r.value=e,o.setPcActiveIndex(e)}function U(){l.value.splice(y.value.index,1)}function j(t,e){b.value=!0,y.value={data:t,index:e}}function q(t,e){o.setCurrentPcDesign(""),r.value=e,o.setPcActiveIndex(e)}function E(t){const e={...JSON.parse(JSON.stringify(t))};l.value.length?T.value===l.value.length-1?l.value.push(e):l.value.splice(O.value,0,e):l.value.push(e)}async function w(){if(!f.query.id&&i.value!=="LOGIN_PC"&&i.value!=="BOTTOM_AUTH"&&i.value!=="BOTTOM_SUPPLIER_AUTH")return c.value.push(se),c.value.push(oe),c.value.push(ie),o.pinPc=c.value,!1;if(i.value==="LOGIN_PC"&&!f.query.id)return o.pinPc=[],c.value=[],l.value=re,r.value=0,o.setPcDesign(l.value),!1;if((i.value==="BOTTOM_AUTH"||i.value==="BOTTOM_SUPPLIER_AUTH")&&!f.query.id)return o.pinPc=[],c.value=[],l.value=ye,r.value=0,o.setPcDesign(l.value),!1;const t=f.query.id,e=await F(t);if(e.data.success){const n=e.data.result.pageData?JSON.parse(e.data.result.pageData):[];if(n)if((n==null?void 0:n.version)==="v3"){if(i.value==="INDEX_PC"||i.value==="INDEX_2B_PC"){const h=Object.values(n.data).slice(0,3);o.setPinPc(h),c.value=h,l.value=Object.values(n.data).slice(3)||[]}else l.value=n.data||[];o.setPcDesign(l.value)}else J.error({content:"当前编辑内容版本不支持",duration:1e4,closable:!0})}}return N(()=>{w()}),(t,e)=>{const n=P("a-tag"),h=P("a-button"),G=P("a-modal"),k=X("auto-animate");return s(),v("div",Pe,[I((s(),v("div",Ce,[g("div",{ref:a(B),"pb-300px":""},[a(i)!=="LOGIN_PC"?(s(),_(M,{key:0,res:a(c)[0]},null,8,["res"])):m("",!0),g("div",Oe,[a(i)!=="LOGIN_PC"?(s(),_(ne,{key:0,res:a(c)[2]},null,8,["res"])):m("",!0),a(i)==="LOGIN_PC"?(s(),v("div",Te," 顶部header ")):m("",!0),I((s(),v("div",{ref:a(L),"min-h-400px":"","w-1184px":"","pb-400px":"",role:"pc"},[g("div",we,[g("div",ke,[(s(!0),v(Z,null,K(a(l),(p,u)=>(s(),v("div",{key:u,"h-auto":""},[a(l).length&&p.type!=="topAdvert"&&p.type!=="bannerAdvert"?(s(),_(A,{key:0,id:A.type+new Date().getTime(),"move-card":$,index:u,class:te(["model-item",{active:a(r)===u}]),absolute:"","w-1184px":"",onDragenter:D=>T.value=u,onDrop:D=>O.value=u,onClick:le(D=>q(p,u),["stop"])},{default:x(()=>[a(r)===u?(s(),_(n,{key:0,class:"current",absolute:"",color:"arcoblue"},{default:x(()=>e[1]||(e[1]=[C(" 当前 ")])),_:1})):m("",!0),a(r)===u?(s(),v("div",Ne)):m("",!0),(s(),_(ee(a(S)[p.type]),{class:"component",res:p},null,8,["res"])),a(r)===u?(s(),v("div",Ie)):m("",!0),a(r)===u?(s(),_(h,{key:3,status:"danger",class:"btn",style:{position:"absolute"},"right--55px":"","top-0px":"",size:"mini",onClick:D=>j(p,u)},{default:x(()=>e[2]||(e[2]=[C(" 删除 ")])),_:2},1032,["onClick"])):m("",!0)]),_:2},1032,["id","index","class","onDragenter","onDrop","onClick"])):m("",!0)]))),128))])])])),[[k]])])],512)])),[[k]]),Q(G,{visible:a(b),"onUpdate:visible":e[0]||(e[0]=p=>Y(b)?b.value=p:null),"unmount-on-close":"",onOk:U},{title:x(()=>e[3]||(e[3]=[C(" 提示 ")])),default:x(()=>[g("div",null," 确认要删除模块 "+W(a(y).data.name)+" 吗？ ",1)]),_:1},8,["visible"])])}}}),lt=ae(Ae,[["__scopeId","data-v-53e0d05f"]]);export{lt as default};
