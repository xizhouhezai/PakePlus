import{e as C}from"./statisitics-CehHs8Ha.js";import{d as b,r as v,h as w,E as I,b as f,o as i,c as x,e as o,w as d,u as a,_ as T,a as k,j as _,s as h,A as y,k as g}from"./index-C4AMdMz2.js";import{p as N}from"./index-B3FGqCGi.js";import{_ as E}from"./index.vue_vue_type_script_setup_true_lang-DQl3Ouxv.js";import"./index-DVwIKmiX.js";import"./index.vue_vue_type_script_setup_true_lang-CDd49swx.js";import"./index-Dg8m97qn.js";import"./shops-fXVW_gE8.js";import"./useCurrentInstance-BLlvmEjv.js";import"./tools-BfzgO_2s.js";import"./validator-B8pIxTAL.js";import"./dist-PezRi_EG.js";import"./index-D43NcXdt.js";const V=b({__name:"generalize",props:{res:{type:Array,default:()=>[]}},setup(c){const t=c,s=v({uvs:0,pvs:0});function n(){s.value={uvs:0,pvs:0},t.res&&t.res.forEach(e=>{s.value.uvs+=e.uvNum,s.value.pvs+=e.pvNum})}return w(()=>{n()}),I(()=>t.res,()=>{n()},{immediate:!0,deep:!0}),(e,l)=>{const u=f("a-statistic"),p=f("a-spin");return i(),x("div",null,[o(p,{style:{display:"block"}},{default:d(()=>[o(u,{title:"访客数UV",style:{margin:"0 60px"},value:a(s).uvs,"show-group-separator":""},null,8,["value"]),o(u,{title:"浏览量PV",style:{margin:"0 60px"},value:a(s).pvs,"show-group-separator":""},null,8,["value"])]),_:1})])}}}),B=T(V,[["__scopeId","data-v-2cf41d16"]]),L={style:{height:"100%"}},S=b({__name:"list",props:{dateType:{type:Object,default:()=>({recent:"LAST_SEVEN",month:""})},res:{type:Array,default:()=>[]}},setup(c){const t=c,s=[{title:"日期",dataIndex:"date"},{title:"浏览量",dataIndex:"pvNum"},{title:"访客数",dataIndex:"uvNum"}],n=k({chartList:[],previewChart:""});async function e(){n.chartList=t.res}return w(()=>{e()}),I(()=>t.res,()=>{e()},{deep:!0,immediate:!0}),(l,u)=>{const p=f("a-table");return i(),x("div",L,[o(p,{columns:s,data:a(n).chartList},null,8,["data"])])}}}),A=T(S,[["__scopeId","data-v-396881af"]]),$={class:"preview-chart"},z={"h-80px":""},O={"h-500px":""},W=b({__name:"preview",props:{isInline:{type:Boolean,default:!1}},setup(c){const t=c,s=v({month:"",searchType:"LAST_SEVEN"}),n=v(!1),e=v(""),l=k({searchType:s.value.searchType,year:s.value.month||new Date().getFullYear()});function u(r){l.searchType=r.recent,r.month&&(l.month=r.month.split("-")[1]&&r.month.split("-")[1].includes("0")?r.month.split("-")[1].substr(1):"",l.year=r.month.split("-")[0]),p()}async function p(){e.value="";try{const r=await C(l);r.data.success&&(e.value=r.data.result)}catch(r){Message.error(r.message)}}return w(()=>{p(),n.value=!0}),(r,P)=>{const m=f("a-card");return i(),x("div",$,[o(m,{title:"流量统计",class:"general-card",bordered:!t.isInline,style:y({width:"100%",marginBottom:t.isInline?"0px":"20px"}),hoverable:""},{default:d(()=>[a(n)?(i(),_(E,{key:0,"date-type":a(s),onOnChange:u},null,8,["date-type"])):h("",!0)]),_:1},8,["bordered","style"]),o(m,{hoverable:"",title:"流量概括",bordered:!t.isInline},{default:d(()=>[g("div",z,[a(e)?(i(),_(B,{key:0,res:a(e)},null,8,["res"])):h("",!0)])]),_:1},8,["bordered"]),o(m,{hoverable:"",title:"流量趋势",bordered:!t.isInline,style:y({width:"100%",marginTop:t.isInline?"0px":"20px"})},{default:d(()=>[g("div",O,[a(e)?(i(),_(N,{key:0,res:a(e)},null,8,["res"])):h("",!0)])]),_:1},8,["bordered","style"]),o(m,{hoverable:"",title:"会员流量报表",bordered:!t.isInline,style:y({width:"100%",marginTop:t.isInline?"0px":"20px"})},{default:d(()=>[a(e)?(i(),_(A,{key:0,res:a(e)},null,8,["res"])):h("",!0)]),_:1},8,["bordered","style"])])}}});export{W as default};
