import{a as me,W as ze,r as ee,e as C,d as K,h as le,b as w,o as v,c as T,w as $,F as he,i as ye,X as We,j,A as ie,f as Y,t as G,Y as Ae,U as Z,k as J,Z as X,E as ge,$ as Ee,a0 as Fe,a1 as He,s as A,u as Ie,V as Re,a2 as pe,N as Pe,a3 as Ye,a4 as Ze,a5 as Ke,a6 as qe,a7 as Ge}from"./index-C4AMdMz2.js";const ga=K({__name:"index",props:{level:{},width:{},ids:{},address:{},scene:{},api:{type:Function}},emits:["callback"],setup(e,{emit:n}){const a=me({city:[{label:"省",value:[],type:"province",id:"",address:"",loading:!1},{label:"市",value:[],type:"city",id:"",address:"",loading:!1},{label:"区",value:[],type:"area",id:"",address:"",loading:!1},{label:"街道",value:[],type:"street",id:"",address:"",loading:!1}]}),o=n,s=e,t=async(I=0,D)=>{if(a.city&&a.city.length){const _=a.city.find(y=>y.type===D);if(_.loading=!0,typeof s.api=="function"){const y=await s.api(I);y&&a.city.forEach(x=>{x.type===D&&(x.value=y.data.result)})}_.loading=!1}},l=I=>{var D;const _=a.city.findIndex(x=>I.type===x.type),y=a.city[_];if(a.city[_].address=(D=a.city[_].value.find(x=>x.id===I.id))==null?void 0:D.name,_+1===(s.level||4)){const x=[],c=[],S=a.city.map(b=>(x.push(b.address),c.push(b.id),{id:b.id,name:b.address}));o("callback",{ids:c,cities:x,values:S});return}a.city.forEach((x,c)=>{c>_&&(x.value=[],x.id="")}),t(y.id,a.city[_+1].type)},p=()=>{if(t(0,"province"),s.ids&&s.ids.length){const I=["province","city","area","street",""],D=s.ids.split(","),_=s.address.split(",");a.city=a.city.map((y,x)=>(y.id=D[x],y.address=_[x],t(y.id,I[x+1]),y))}};return le(()=>{p()}),(I,D)=>{const _=w("a-option"),y=w("a-select"),x=w("a-space");return v(),T("div",null,[C(x,null,{default:$(()=>[(v(!0),T(he,null,ye(s.level||4,c=>(v(),j(y,{key:c,modelValue:a.city[c-1].id,"onUpdate:modelValue":S=>a.city[c-1].id=S,style:ie({width:s.width||"120px"}),placeholder:a.city[c-1].label,loading:a.city[c-1].loading,onChange:S=>l(a.city[c-1])},{default:$(()=>[(v(!0),T(he,null,ye(a.city[c-1].value,(S,b)=>(v(),j(_,{key:b,value:S.id},{default:$(()=>[Y(G(S.name),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","style","placeholder","loading","onChange"]))),128))]),_:1})])}}});function Je(e){return qe()?(Ge(e),!0):!1}function Xe(e){return typeof e=="function"?e():Ie(e)}const Qe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function Te(e){var n;const a=Xe(e);return(n=a==null?void 0:a.$el)!=null?n:a}const et=Qe?window:void 0;function tt(){const e=ee(!1),n=Pe();return n&&le(()=>{e.value=!0},n),e}function at(e){const n=tt();return Z(()=>(n.value,!!e()))}function nt(e,n,a={}){const{window:o=et,...s}=a;let t;const l=at(()=>o&&"ResizeObserver"in o),p=()=>{t&&(t.disconnect(),t=void 0)},I=Z(()=>Array.isArray(e)?e.map(y=>Te(y)):[Te(e)]),D=ge(I,y=>{if(p(),l.value&&o){t=new ResizeObserver(n);for(const x of y)x&&t.observe(x,s)}},{immediate:!0,flush:"post"}),_=()=>{p(),D()};return Je(_),{isSupported:l,stop:_}}var st=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var je={exports:{}};(function(e,n){(function(a,o){e.exports=o()})(st,function(){var a=1e3,o=6e4,s=36e5,t="millisecond",l="second",p="minute",I="hour",D="day",_="week",y="month",x="quarter",c="year",S="date",b="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,M=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(g){var r=["th","st","nd","rd"],i=g%100;return"["+g+(r[(i-20)%10]||r[i]||r[0])+"]"}},F=function(g,r,i){var d=String(g);return!d||d.length>=r?g:""+Array(r+1-d.length).join(i)+g},B={s:F,z:function(g){var r=-g.utcOffset(),i=Math.abs(r),d=Math.floor(i/60),u=i%60;return(r<=0?"+":"-")+F(d,2,"0")+":"+F(u,2,"0")},m:function g(r,i){if(r.date()<i.date())return-g(i,r);var d=12*(i.year()-r.year())+(i.month()-r.month()),u=r.clone().add(d,y),m=i-u<0,k=r.clone().add(d+(m?-1:1),y);return+(-(d+(i-u)/(m?u-k:k-u))||0)},a:function(g){return g<0?Math.ceil(g)||0:Math.floor(g)},p:function(g){return{M:y,y:c,w:_,d:D,D:S,h:I,m:p,s:l,ms:t,Q:x}[g]||String(g||"").toLowerCase().replace(/s$/,"")},u:function(g){return g===void 0}},W="en",q={};q[W]=E;var de="$isDayjsObject",se=function(g){return g instanceof Q||!(!g||!g[de])},U=function g(r,i,d){var u;if(!r)return W;if(typeof r=="string"){var m=r.toLowerCase();q[m]&&(u=m),i&&(q[m]=i,u=m);var k=r.split("-");if(!u&&k.length>1)return g(k[0])}else{var z=r.name;q[z]=r,u=z}return!d&&u&&(W=u),u||!d&&W},N=function(g,r){if(se(g))return g.clone();var i=typeof r=="object"?r:{};return i.date=g,i.args=arguments,new Q(i)},L=B;L.l=U,L.i=se,L.w=function(g,r){return N(g,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var Q=function(){function g(i){this.$L=U(i.locale,null,!0),this.parse(i),this.$x=this.$x||i.x||{},this[de]=!0}var r=g.prototype;return r.parse=function(i){this.$d=function(d){var u=d.date,m=d.utc;if(u===null)return new Date(NaN);if(L.u(u))return new Date;if(u instanceof Date)return new Date(u);if(typeof u=="string"&&!/Z$/i.test(u)){var k=u.match(f);if(k){var z=k[2]-1||0,P=(k[7]||"0").substring(0,3);return m?new Date(Date.UTC(k[1],z,k[3]||1,k[4]||0,k[5]||0,k[6]||0,P)):new Date(k[1],z,k[3]||1,k[4]||0,k[5]||0,k[6]||0,P)}}return new Date(u)}(i),this.init()},r.init=function(){var i=this.$d;this.$y=i.getFullYear(),this.$M=i.getMonth(),this.$D=i.getDate(),this.$W=i.getDay(),this.$H=i.getHours(),this.$m=i.getMinutes(),this.$s=i.getSeconds(),this.$ms=i.getMilliseconds()},r.$utils=function(){return L},r.isValid=function(){return this.$d.toString()!==b},r.isSame=function(i,d){var u=N(i);return this.startOf(d)<=u&&u<=this.endOf(d)},r.isAfter=function(i,d){return N(i)<this.startOf(d)},r.isBefore=function(i,d){return this.endOf(d)<N(i)},r.$g=function(i,d,u){return L.u(i)?this[d]:this.set(u,i)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(i,d){var u=this,m=!!L.u(d)||d,k=L.p(i),z=function(oe,R){var ae=L.w(u.$u?Date.UTC(u.$y,R,oe):new Date(u.$y,R,oe),u);return m?ae:ae.endOf(D)},P=function(oe,R){return L.w(u.toDate()[oe].apply(u.toDate("s"),(m?[0,0,0,0]:[23,59,59,999]).slice(R)),u)},V=this.$W,O=this.$M,H=this.$D,ue="set"+(this.$u?"UTC":"");switch(k){case c:return m?z(1,0):z(31,11);case y:return m?z(1,O):z(0,O+1);case _:var re=this.$locale().weekStart||0,be=(V<re?V+7:V)-re;return z(m?H-be:H+(6-be),O);case D:case S:return P(ue+"Hours",0);case I:return P(ue+"Minutes",1);case p:return P(ue+"Seconds",2);case l:return P(ue+"Milliseconds",3);default:return this.clone()}},r.endOf=function(i){return this.startOf(i,!1)},r.$set=function(i,d){var u,m=L.p(i),k="set"+(this.$u?"UTC":""),z=(u={},u[D]=k+"Date",u[S]=k+"Date",u[y]=k+"Month",u[c]=k+"FullYear",u[I]=k+"Hours",u[p]=k+"Minutes",u[l]=k+"Seconds",u[t]=k+"Milliseconds",u)[m],P=m===D?this.$D+(d-this.$W):d;if(m===y||m===c){var V=this.clone().set(S,1);V.$d[z](P),V.init(),this.$d=V.set(S,Math.min(this.$D,V.daysInMonth())).$d}else z&&this.$d[z](P);return this.init(),this},r.set=function(i,d){return this.clone().$set(i,d)},r.get=function(i){return this[L.p(i)]()},r.add=function(i,d){var u,m=this;i=Number(i);var k=L.p(d),z=function(O){var H=N(m);return L.w(H.date(H.date()+Math.round(O*i)),m)};if(k===y)return this.set(y,this.$M+i);if(k===c)return this.set(c,this.$y+i);if(k===D)return z(1);if(k===_)return z(7);var P=(u={},u[p]=o,u[I]=s,u[l]=a,u)[k]||1,V=this.$d.getTime()+i*P;return L.w(V,this)},r.subtract=function(i,d){return this.add(-1*i,d)},r.format=function(i){var d=this,u=this.$locale();if(!this.isValid())return u.invalidDate||b;var m=i||"YYYY-MM-DDTHH:mm:ssZ",k=L.z(this),z=this.$H,P=this.$m,V=this.$M,O=u.weekdays,H=u.months,ue=u.meridiem,re=function(R,ae,ke,Se){return R&&(R[ae]||R(d,m))||ke[ae].slice(0,Se)},be=function(R){return L.s(z%12||12,R,"0")},oe=ue||function(R,ae,ke){var Se=R<12?"AM":"PM";return ke?Se.toLowerCase():Se};return m.replace(M,function(R,ae){return ae||function(ke){switch(ke){case"YY":return String(d.$y).slice(-2);case"YYYY":return L.s(d.$y,4,"0");case"M":return V+1;case"MM":return L.s(V+1,2,"0");case"MMM":return re(u.monthsShort,V,H,3);case"MMMM":return re(H,V);case"D":return d.$D;case"DD":return L.s(d.$D,2,"0");case"d":return String(d.$W);case"dd":return re(u.weekdaysMin,d.$W,O,2);case"ddd":return re(u.weekdaysShort,d.$W,O,3);case"dddd":return O[d.$W];case"H":return String(z);case"HH":return L.s(z,2,"0");case"h":return be(1);case"hh":return be(2);case"a":return oe(z,P,!0);case"A":return oe(z,P,!1);case"m":return String(P);case"mm":return L.s(P,2,"0");case"s":return String(d.$s);case"ss":return L.s(d.$s,2,"0");case"SSS":return L.s(d.$ms,3,"0");case"Z":return k}return null}(R)||k.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(i,d,u){var m,k=this,z=L.p(d),P=N(i),V=(P.utcOffset()-this.utcOffset())*o,O=this-P,H=function(){return L.m(k,P)};switch(z){case c:m=H()/12;break;case y:m=H();break;case x:m=H()/3;break;case _:m=(O-V)/6048e5;break;case D:m=(O-V)/864e5;break;case I:m=O/s;break;case p:m=O/o;break;case l:m=O/a;break;default:m=O}return u?m:L.a(m)},r.daysInMonth=function(){return this.endOf(y).$D},r.$locale=function(){return q[this.$L]},r.locale=function(i,d){if(!i)return this.$L;var u=this.clone(),m=U(i,d,!0);return m&&(u.$L=m),u},r.clone=function(){return L.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},g}(),h=Q.prototype;return N.prototype=h,[["$ms",t],["$s",l],["$m",p],["$H",I],["$W",D],["$M",y],["$y",c],["$D",S]].forEach(function(g){h[g[1]]=function(r){return this.$g(r,g[0],g[1])}}),N.extend=function(g,r){return g.$i||(g(r,Q,N),g.$i=!0),N},N.locale=U,N.isDayjs=se,N.unix=function(g){return N(1e3*g)},N.en=q[W],N.Ls=q,N.p={},N})})(je);var ot=je.exports;const lt=rt(ot),it={"text-13px":"","cursor-pointer":""},dt={key:3},ut=K({__name:"index",props:{columns:{},rowSpan:{},timeType:{default:"date"},scene:{},categoryData:{},fieldNames:{}},emits:["search","reset","categoryList"],setup(e,{expose:n,emit:a}){function o(b){return lt(new Date(b).getTime()).format("YYYY-MM-DD HH:mm:ss")}const s=me({formData:{$date:[]},cascaderLoading:!0,categoryData:[],categoryIds:[]}),t=ee({labelSpan:9,wrapperSpan:15,rowSpan:6}),l=ee(),p=a,I=()=>{l.value.resetFields(),s.categoryIds=[],c.columns.some(b=>b.datePicker)?c.timeType==="date"?(s.formData.startDate="",s.formData.endDate="",delete s.formData.startTime,delete s.formData.endTime):(s.formData.startTime="",s.formData.endTime="",delete s.formData.startDate,delete s.formData.endDate):(delete s.formData.startTime,delete s.formData.endTime,delete s.formData.startDate,delete s.formData.endDate),s.formData.$date=[],p("reset",s.formData)},D=()=>{var b;const f={...s.formData},M=(E,F,B,W)=>{f[E]=B,f[F]=W};(b=f.$date)!=null&&b.length?c.timeType==="date"?(M("startDate","endDate",o(f.$date[0]),o(f.$date[1])),delete f.startTime,delete f.endTime):(M("startTime","endTime",new Date(f.$date[0]+".000").getTime(),new Date(f.$date[1]+".999").getTime()),delete f.startDate,delete f.endDate):(delete f.startTime,delete f.endTime,delete f.startDate,delete f.endDate),delete f.$date,console.log("submitData",f),p("search",f)};function _(b){return!1}const y=b=>(b.length&&b.forEach(f=>{f.children&&(f.children.length?y(f.children):delete f.children)}),b),x=async()=>{if(c.categoryData)c.categoryData.length&&y(c.categoryData),s.categoryData=c.categoryData;else throw new Error("请传入分类数据")};ge(()=>{s.categoryIds},()=>{p("categoryList",s.categoryIds)},{deep:!0});const c=e,S=c.fieldNames||{value:"id",label:"name"};return n({data:s}),le(()=>{nt(l,b=>{const f=b[0],{width:M}=f.contentRect;if(M<=600){t.value.rowSpan=24,t.value.labelSpan=6,t.value.wrapperSpan=18;return}if(M>600&&M<899){t.value.rowSpan=12,t.value.labelSpan=8,t.value.wrapperSpan=16;return}if(M<1499&&M>800){t.value.rowSpan=8,t.value.labelSpan=9,t.value.wrapperSpan=15;return}if(M>=1500){t.value.rowSpan=6,t.value.labelSpan=6,t.value.wrapperSpan=18;return}})}),(b,f)=>{const M=w("a-tooltip"),E=w("a-input"),F=w("a-option"),B=w("a-select"),W=w("a-range-picker"),q=w("a-input-number"),de=w("a-cascader"),se=w("a-form-item"),U=w("a-col"),N=w("a-row"),L=w("a-divider"),Q=w("icon-search"),h=w("a-button"),g=w("icon-refresh"),r=w("a-space"),i=w("a-form");return v(),T("div",null,[C(i,{ref_key:"formRef",ref:l,model:s.formData,"label-col-props":{span:t.value.labelSpan},"wrapper-col-props":{span:t.value.wrapperSpan},"label-align":"right",onSubmit:D,class:"form-column"},{default:$(()=>[C(N,null,{default:$(()=>[C(U,{flex:1},{default:$(()=>[C(N,{"overflow-hidden":"",gutter:16},{default:$(()=>[(v(!0),T(he,null,ye(c.columns,(d,u)=>(v(),j(U,{key:u,span:b.rowSpan||t.value.rowSpan,"overflow-hidden":""},{default:$(()=>[C(se,{class:"pick-form-item",field:d.model},{label:$(()=>[C(M,{content:d.label},{default:$(()=>[J("div",it,G(d.label),1)]),_:2},1032,["content"])]),default:$(()=>[d.input?(v(),j(E,{key:0,modelValue:s.formData[d.model],"onUpdate:modelValue":m=>s.formData[d.model]=m,disabled:d.disabled,placeholder:"请输入"+d.label,"allow-clear":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):A("",!0),d.select?(v(),j(B,{key:1,modelValue:s.formData[d.model],"onUpdate:modelValue":m=>s.formData[d.model]=m,disabled:d.disabled,placeholder:"请选择"+d.label},{default:$(()=>[(v(!0),T(he,null,ye(d.select.options,(m,k)=>(v(),j(F,{key:k,label:m.label,value:m.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","placeholder"])):A("",!0),d.datePicker?(v(),j(W,{key:2,ref_for:!0,ref:"rangePick",style:{width:"100%"},modelValue:s.formData.$date,"onUpdate:modelValue":f[0]||(f[0]=m=>s.formData.$date=m),"show-time":"","time-picker-props":{defaultValue:["00:00:00","23:59:59"]},"disabled-date":_},null,8,["modelValue"])):A("",!0),d.range?(v(),T("div",dt,[C(q,{modelValue:s.formData[d.model+"Min"],"onUpdate:modelValue":m=>s.formData[d.model+"Min"]=m,disabled:d.disabled,placeholder:"请输入最小"+d.label,style:{width:"45%","margin-right":"10%"}},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"]),C(q,{modelValue:s.formData[d.model+"Max"],"onUpdate:modelValue":m=>s.formData[d.model+"Max"]=m,disabled:d.disabled,placeholder:"请输入最大"+d.label,style:{width:"45%"}},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])])):A("",!0),d.category?(v(),j(de,{key:4,"model-value":s.categoryIds,"onUpdate:modelValue":f[1]||(f[1]=m=>s.categoryIds=m),placeholder:"选择商品分类",options:s.categoryData,"field-names":Ie(S),onClick:x},null,8,["model-value","options","field-names"])):A("",!0)]),_:2},1032,["field"])]),_:2},1032,["span"]))),128))]),_:1})]),_:1}),C(L,{style:{height:"84px"},direction:"vertical"}),C(U,{flex:"86px",style:{"text-align":"right"}},{default:$(()=>[C(r,{direction:"vertical",size:18,style:{"padding-bottom":"16px"}},{default:$(()=>[C(h,{type:"primary","html-type":"search"},{icon:$(()=>[C(Q)]),default:$(()=>[f[2]||(f[2]=Y(" 筛选 "))]),_:1}),C(h,{onClick:I},{icon:$(()=>[C(g)]),default:$(()=>[f[3]||(f[3]=Y(" 重置 "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","label-col-props","wrapper-col-props"]),C(L,{style:{"margin-top":"0"}})])}}}),Me=(e,n)=>{const a=e.__vccOpts||e;for(const[o,s]of n)a[o]=s;return a},ct=Me(ut,[["__scopeId","data-v-a989f012"]]);function pt(e){return String(e.toFixed(2)).replace(/\B(?=(\d{3})+(?!\d))/g,",")}function ft(e,n,a){e||(e=0);const o=pt(e);return a==="before"?o.slice(0,o.length-3):a==="after"?o.slice(-2):(n||"")+o}const mt={key:3,class:"flex","mb-5px":""},ht={style:{"margin-left":"5px"}},yt={class:"flex"},gt={key:0},vt={key:8},bt={key:0,class:"pagination-box"},kt=K({__name:"index",props:{columns:{type:Array,default:()=>[]},methods:{type:Object,default:()=>({})},max:{type:null,default:""},api:{type:null,default:""},dataList:{type:null,default:""},apiParams:{type:null,default:""},customApiParams:{type:null,default:""},enablePagination:{type:Boolean,default:!0},checkbox:{type:Boolean,default:!1},radio:{type:Boolean,default:!1},defaultRowKey:{type:null,default:"id"},defaultSelectedKeys:{type:Array,default:()=>[]},bordered:{type:Boolean,default:!1},pageSize:{type:Number,default:10},colspan:{type:Number,default:1},total:{type:Number,default:0}},emits:["selectTableChange","parentComponentData","selectionChanges","paginationChange"],setup(e,{expose:n,emit:a}){const o=ee(null),s=({rowIndex:c,columnIndex:S,record:b,column:f})=>{if(b.customType==="full")return{rowspan:1,colspan:t.colspan}},t=e,l=me({data:{result:{current:1,total:0,records:[]},loading:!1,rowSelection:{type:t.radio?"radio":"checkbox",showCheckedAll:!0,onlyCurrent:!1,selectedRowKeys:[]},params:{pageNumber:1,pageSize:t.pageSize||10,sort:"createTime",order:"desc"},recordsList:[],selectedRowList:[],selected:[],ids:[],selectedList:[]}});function p(){l.data.selectedList=[]}const I=ee([]),D=a,_=c=>{D("selectionChanges",c),l.data.ids=c,l.data.rowSelection.selectedRowKeys=c;const S=[];l.data.selectedRowList.length&&c.forEach(b=>{S.push(l.data.selectedRowList.find(f=>f.id===b))}),D("selectTableChange",S.length?S:c)};async function y(c={},S=!1){const{apiParams:b}=Ke(t);let f;if(t.apiParams?f={...c,...b.value}:f=c,f={...l.data.params,...f},t.api)try{l.data.loading=!0;const M=await t.api(t.customApiParams||f);if(l.data.loading=!1,M.data.success){if(t.max)M.data.result=M.data.result.splice(0,t.max);else{const E=[];E.push(...M.data.result.records||M.data.result),l.data.recordsList=E;const F=new Map,B=[...l.data.selectedRowList,...E,...I.value];l.data.selectedRowList=B.filter(W=>!F.has(W.id)&&F.set(W.id,W.id))}l.data.result=M.data.result,l.data.result&&D("parentComponentData",l.data.result)}}catch{l.data.loading=!1}else t.dataList.length>=0&&(l.data.result=me([...t.dataList]),l.data.result.total=t.total)}function x(c){const{callback:S}=c;D(S,c)}return ge(()=>[l.data.params,t.dataList,t.defaultSelectedKeys],c=>{c&&y()},{deep:!0}),ge(()=>[t.apiParams],c=>{delete l.data.params.pageNumber,l.data.params.pageNumber=1},{deep:!0}),le(()=>{y(),I.value=t.defaultSelectedKeys.map(c=>(c.id=c.skuId,c)),l.data.selectedList=t.defaultSelectedKeys.map(c=>c.skuId)}),n({init:y,clearSelect:p,table:o,initData:l}),(c,S)=>{const b=w("a-tag"),f=w("a-image"),M=w("a-typography-text"),E=w("router-link"),F=w("a-badge"),B=w("a-table-column"),W=w("a-button"),q=w("a-space"),de=w("a-table"),se=w("a-pagination");return v(),T("div",null,[C(de,{"row-key":"id",data:l.data.result.records||l.data.result,bordered:e.bordered?!1:{cell:!0},pagination:!1,"row-selection":e.checkbox?l.data.rowSelection:void 0,scroll:{x:"100%"},onSelectionChange:_,selectedKeys:l.data.selectedList,"onUpdate:selectedKeys":S[0]||(S[0]=U=>l.data.selectedList=U),loading:l.data.loading,"span-method":s},{columns:$(()=>{var U,N,L,Q;return[(v(!0),T(he,null,ye(t.columns,(h,g)=>(v(),j(B,{align:h.align||"left",key:g,title:h.title,"data-index":h.dataIndex,tooltip:!(h.tooltip&&h.tooltip==="none"),width:Number(h.width||100),ellipsis:h.hasOwnProperty("ellipsis")?h.ellipsis:!0},Re({_:2},[h.slot||h.currency||h.empty||h.render||h.member?{name:"cell",fn:$(({record:r,column:i,rowIndex:d})=>{var u,m,k,z,P,V;return[r.customType==="full"?pe(c.$slots,"full",{key:0,record:r[h.dataIndex],column:i,rowIndex:d,data:r},void 0,!0):h.slot&&h.slotTemplate?pe(c.$slots,h.slotTemplate,{key:1,record:r[h.dataIndex],column:i,rowIndex:d,data:r},void 0,!0):h.slot&&(u=h.slotData)!=null&&u.tag?(v(),j(b,{key:2,color:(m=h.slotData.tag.find(O=>O.value===r[h.dataIndex]))==null?void 0:m.color},{default:$(()=>{var O;return[Y(G((O=h.slotData.tag.find(H=>H.value===r[h.dataIndex]))==null?void 0:O.label),1)]}),_:2},1032,["color"])):h.slot&&(k=h.slotData)!=null&&k.goods?(v(),T("div",mt,[C(f,{width:"50",height:"50",src:r[h.slotData.goods.goodsImage],"show-loader":""},{loader:$(()=>S[3]||(S[3]=[J("div",{class:"loader-animate"},null,-1)])),_:2},1032,["src"]),J("div",ht,[C(M,{copyable:"",bold:""},{default:$(()=>[Y(G(r[h.slotData.goods.goodsName]),1)]),_:2},1024),J("div",yt,[r!=null&&r.goodsUnit?(v(),T("div",gt,[C(M,{type:"secondary"},{default:$(()=>[Y(G(r.goodsUnit),1)]),_:2},1024)])):A("",!0)])])])):h.member?(v(),j(E,{key:4,"cursor-pointer":"",to:"/detail/member-detail?id="+(r.buyerId||r.memberId||r.userId||r.id)},{default:$(()=>[C(M,{type:"primary"},{default:$(()=>[Y(G(r[h.dataIndex]),1)]),_:2},1024)]),_:2},1032,["to"])):h.store||h.supplier?(v(),j(E,{key:5,"cursor-pointer":"",to:"/detail/shop-detail?id="+r.storeId+"&type="+(h.store?"STORE":h.supplier?"SUPPLIER":"")},{default:$(()=>[C(M,{type:"primary"},{default:$(()=>[Y(G(r[h.dataIndex]),1)]),_:2},1024)]),_:2},1032,["to"])):h.currency?(v(),j(M,{key:6,class:"typography-price"},{default:$(()=>[Y(G(Ie(ft)(r[h.dataIndex],"¥")),1)]),_:2},1024)):h.empty?(v(),j(M,{key:7},{default:$(()=>[Y(G(r[h.dataIndex]||h.empty),1)]),_:2},1024)):h.slot&&(z=h.slotData)!=null&&z.badge?(v(),T("div",vt,[h.slotData.badge.find(O=>O.value===r[h.dataIndex])?(v(),j(F,{key:0,style:{"margin-right":"5px"},color:(P=h.slotData.badge.find(O=>O.value===r[h.dataIndex]))==null?void 0:P.color},null,8,["color"])):A("",!0),Y(" "+G(((V=h.slotData.badge.find(O=>O.value===r[h.dataIndex]))==null?void 0:V.label)||""),1)])):A("",!0)]}),key:"0"}:void 0]),1032,["align","title","data-index","tooltip","width","ellipsis"]))),128)),(U=t==null?void 0:t.methods)!=null&&U.methods?(v(),j(B,{key:0,width:(N=t.methods)==null?void 0:N.width,align:"center",title:(L=t.methods)==null?void 0:L.title,fixed:(Q=t.methods)==null?void 0:Q.fixed},{cell:$(({record:h,column:g,rowIndex:r})=>[C(q,null,{default:$(()=>[(v(!0),T(he,null,ye(t.methods.methods,(i,d)=>(v(),T("div",{key:d},[i.slot&&i.slotTemplate?pe(c.$slots,i.slotTemplate,{key:0,record:h,column:g,rowIndex:r,data:h},void 0,!0):(v(),j(W,{key:1,size:"small",class:"btn",type:i.type,status:i.status,onClick:u=>x({...i,record:{...h,...g,...r}})},{default:$(()=>[Y(G(i.title),1)]),_:2},1032,["type","status","onClick"]))]))),128))]),_:2},1024)]),_:3},8,["width","title","fixed"])):A("",!0)]}),_:3},8,["data","bordered","row-selection","selectedKeys","loading"]),e.enablePagination?(v(),T("div",bt,[C(se,{total:Number(l.data.result.total)||0,"show-page-size":!e.apiParams.pageSize,current:Number(l.data.params.pageNumber),"page-size":Number(l.data.params.pageSize),onChange:S[1]||(S[1]=U=>{l.data.params.pageNumber=U,D("paginationChange",{pageNumber:U})}),onPageSizeChange:S[2]||(S[2]=U=>{l.data.params.pageSize=U,D("paginationChange",{pageNumber:1,pageSize:U})})},null,8,["total","show-page-size","current","page-size"])])):A("",!0)])}}}),St=Me(kt,[["__scopeId","data-v-4e40ca91"]]),wt={class:"modal-wrapper"},xt={key:0,style:{"margin-left":"20px"}},$t=K({__name:"index",props:{apiParams:{},api:{type:Function},defaultGoodsSelectedList:{},categoryData:{},isSingle:{type:Boolean}},emits:["change"],setup(e,{expose:n,emit:a}){const o=ee(),s=e,t=[{label:"商品名称",model:"goodsName",disabled:!1,input:!0},{label:"商品分类",model:"goodsName",disabled:!1,category:!0}],l=[{title:"商品",dataIndex:"goods",width:300,slot:!0,slotData:{goods:{goodsImage:"thumbnail",goodsName:"goodsName"}}},{title:"价格",dataIndex:"price",currency:!0},{title:"销售模式",dataIndex:"salesModel",slot:!0,slotData:{tag:[{value:"RETAIL",label:"零售",color:"orange"},{value:"WHOLESALE",label:"批发",color:"magenta"}]}},{title:"商品类型",dataIndex:"goodsType",slot:!0,slotData:{tag:[{value:"PHYSICAL_GOODS",label:"实物商品",color:"blue"},{value:"VIRTUAL_GOODS",label:"虚拟商品",color:"purple"}]}},{title:"库存",dataIndex:"quantity"}],p=me({visible:!1,categoryPath:"",queryType:"goodsList",goodsSelectedList:[],apiParams:{pageSize:8,categoryPath:"",...s.apiParams},goodsCount:0,selectedKeys:[]}),I=a,D=b=>{p.goodsSelectedList=b,p.goodsCount=p.goodsSelectedList.length},_=b=>{p.apiParams.categoryPath=b},y=b=>{_(""),p.apiParams={...p.apiParams,...b}},x=()=>{p.visible=!0},c=()=>{I("change",p.goodsSelectedList)},S=()=>{p.visible=!1};return ge(()=>s.defaultGoodsSelectedList,b=>{p.goodsSelectedList=b,p.goodsCount=b.length,p.selectedKeys=b.map(f=>f.skuId)},{deep:!0}),le(()=>{p.goodsSelectedList=s.defaultGoodsSelectedList,p.goodsCount=s.defaultGoodsSelectedList.length,p.selectedKeys=s.defaultGoodsSelectedList.map(b=>b.skuId)}),n({init:x,close:S,modalData:p}),(b,f)=>{const M=w("a-radio"),E=w("a-radio-group"),F=w("a-modal");return v(),T("div",null,[C(F,{visible:p.visible,"onUpdate:visible":f[2]||(f[2]=B=>p.visible=B),"align-center":!1,"title-align":"start",width:1300,draggable:"",onOk:c,onCancel:S},{title:$(()=>f[3]||(f[3]=[Y(" 商品选择器 ")])),default:$(()=>[J("div",wt,[C(ct,{"row-span":12,columns:t,categoryData:s.categoryData,onReset:y,onSearch:f[0]||(f[0]=B=>{p.apiParams={...p.apiParams,...B}}),onCategoryList:_},null,8,["categoryData"]),C(E,{"model-value":p.queryType,"onUpdate:modelValue":f[1]||(f[1]=B=>p.queryType=B),style:{"margin-bottom":"10px"},type:"button"},{default:$(()=>[C(M,{value:"goodsList"},{default:$(()=>f[4]||(f[4]=[Y("商品库")])),_:1})]),_:1},8,["model-value"]),s.isSingle?A("",!0):(v(),T("span",xt,"已选择("+G(p.goodsCount)+")",1)),p.visible?(v(),j(St,{key:1,ref_key:"tablePageRef",ref:o,checkbox:!0,radio:s.isSingle,defaultSelectedKeys:p.goodsSelectedList,columns:l,pageSize:p.apiParams.pageSize,"api-params":p.apiParams,api:b.api,onSelectTableChange:D},null,8,["radio","defaultSelectedKeys","pageSize","api-params","api"])):A("",!0)])]),_:1},8,["visible"])])}}}),va=Me($t,[["__scopeId","data-v-1c41641f"]]),Ve=Object.prototype.toString;function Ct(e){return Ve.call(e)==="[object String]"}function ve(e){return Ve.call(e)==="[object Number]"&&e===e}function Dt(e){return e===void 0}function Ue(e){return typeof e=="function"}const Lt=Symbol("ArcoConfigProvider"),_t="arco",It="$arco",te=e=>{var n,a,o;const s=Pe(),t=Ae(Lt,void 0),l=(o=(a=t==null?void 0:t.prefixCls)!=null?a:(n=s==null?void 0:s.appContext.config.globalProperties[It])==null?void 0:n.classPrefix)!=null?o:_t;return e?`${l}-${e}`:l},Oe=e=>{if(e)return Ue(e)?e:()=>e};(()=>{try{return!(typeof window<"u"&&document!==void 0)}catch{return!0}})();const Mt=e=>{const n=document.createElement("div");return n.setAttribute("class",`arco-overlay arco-overlay-${e}`),n};var ne=(e,n)=>{for(const[a,o]of n)e[a]=o;return e};const zt=K({name:"IconHover",props:{prefix:{type:String},size:{type:String,default:"medium"},disabled:{type:Boolean,default:!1}},setup(){return{prefixCls:te("icon-hover")}}});function Tt(e,n,a,o,s,t){return v(),T("span",{class:X([e.prefixCls,{[`${e.prefix}-icon-hover`]:e.prefix,[`${e.prefixCls}-size-${e.size}`]:e.size!=="medium",[`${e.prefixCls}-disabled`]:e.disabled}])},[pe(e.$slots,"default")],2)}var Ot=ne(zt,[["render",Tt]]);const Nt=K({name:"IconClose",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:n}){const a=te("icon"),o=Z(()=>[a,`${a}-close`,{[`${a}-spin`]:e.spin}]),s=Z(()=>{const t={};return e.size&&(t.fontSize=ve(e.size)?`${e.size}px`:e.size),e.rotate&&(t.transform=`rotate(${e.rotate}deg)`),t});return{cls:o,innerStyle:s,onClick:t=>{n("click",t)}}}}),Pt=["stroke-width","stroke-linecap","stroke-linejoin"];function jt(e,n,a,o,s,t){return v(),T("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:X(e.cls),style:ie(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:n[0]||(n[0]=(...l)=>e.onClick&&e.onClick(...l))},n[1]||(n[1]=[J("path",{d:"M9.857 9.858 24 24m0 0 14.142 14.142M24 24 38.142 9.858M24 24 9.857 38.142"},null,-1)]),14,Pt)}var xe=ne(Nt,[["render",jt]]);const Vt=Object.assign(xe,{install:(e,n)=>{var a;const o=(a=n==null?void 0:n.iconPrefix)!=null?a:"";e.component(o+xe.name,xe)}}),Ut=K({name:"IconInfoCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:n}){const a=te("icon"),o=Z(()=>[a,`${a}-info-circle-fill`,{[`${a}-spin`]:e.spin}]),s=Z(()=>{const t={};return e.size&&(t.fontSize=ve(e.size)?`${e.size}px`:e.size),e.rotate&&(t.transform=`rotate(${e.rotate}deg)`),t});return{cls:o,innerStyle:s,onClick:t=>{n("click",t)}}}}),Bt=["stroke-width","stroke-linecap","stroke-linejoin"];function Wt(e,n,a,o,s,t){return v(),T("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:X(e.cls),style:ie(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:n[0]||(n[0]=(...l)=>e.onClick&&e.onClick(...l))},n[1]||(n[1]=[J("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm2-30a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2Zm0 17h1a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-6a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h1v-8a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v11Z",fill:"currentColor",stroke:"none"},null,-1)]),14,Bt)}var $e=ne(Ut,[["render",Wt]]);const At=Object.assign($e,{install:(e,n)=>{var a;const o=(a=n==null?void 0:n.iconPrefix)!=null?a:"";e.component(o+$e.name,$e)}}),Et=K({name:"IconCheckCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:n}){const a=te("icon"),o=Z(()=>[a,`${a}-check-circle-fill`,{[`${a}-spin`]:e.spin}]),s=Z(()=>{const t={};return e.size&&(t.fontSize=ve(e.size)?`${e.size}px`:e.size),e.rotate&&(t.transform=`rotate(${e.rotate}deg)`),t});return{cls:o,innerStyle:s,onClick:t=>{n("click",t)}}}}),Ft=["stroke-width","stroke-linecap","stroke-linejoin"];function Ht(e,n,a,o,s,t){return v(),T("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:X(e.cls),style:ie(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:n[0]||(n[0]=(...l)=>e.onClick&&e.onClick(...l))},n[1]||(n[1]=[J("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm10.207-24.379a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0L22 26.172l-4.878-4.88a1 1 0 0 0-1.415 0l-1.414 1.415a1 1 0 0 0 0 1.414l7 7a1 1 0 0 0 1.414 0l11.5-11.5Z",fill:"currentColor",stroke:"none"},null,-1)]),14,Ft)}var Ce=ne(Et,[["render",Ht]]);const Rt=Object.assign(Ce,{install:(e,n)=>{var a;const o=(a=n==null?void 0:n.iconPrefix)!=null?a:"";e.component(o+Ce.name,Ce)}}),Yt=K({name:"IconExclamationCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:n}){const a=te("icon"),o=Z(()=>[a,`${a}-exclamation-circle-fill`,{[`${a}-spin`]:e.spin}]),s=Z(()=>{const t={};return e.size&&(t.fontSize=ve(e.size)?`${e.size}px`:e.size),e.rotate&&(t.transform=`rotate(${e.rotate}deg)`),t});return{cls:o,innerStyle:s,onClick:t=>{n("click",t)}}}}),Zt=["stroke-width","stroke-linecap","stroke-linejoin"];function Kt(e,n,a,o,s,t){return v(),T("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:X(e.cls),style:ie(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:n[0]||(n[0]=(...l)=>e.onClick&&e.onClick(...l))},n[1]||(n[1]=[J("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm-2-11a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2Zm4-18a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V15Z",fill:"currentColor",stroke:"none"},null,-1)]),14,Zt)}var De=ne(Yt,[["render",Kt]]);const qt=Object.assign(De,{install:(e,n)=>{var a;const o=(a=n==null?void 0:n.iconPrefix)!=null?a:"";e.component(o+De.name,De)}}),Gt=K({name:"IconCloseCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:n}){const a=te("icon"),o=Z(()=>[a,`${a}-close-circle-fill`,{[`${a}-spin`]:e.spin}]),s=Z(()=>{const t={};return e.size&&(t.fontSize=ve(e.size)?`${e.size}px`:e.size),e.rotate&&(t.transform=`rotate(${e.rotate}deg)`),t});return{cls:o,innerStyle:s,onClick:t=>{n("click",t)}}}}),Jt=["stroke-width","stroke-linecap","stroke-linejoin"];function Xt(e,n,a,o,s,t){return v(),T("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:X(e.cls),style:ie(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:n[0]||(n[0]=(...l)=>e.onClick&&e.onClick(...l))},n[1]||(n[1]=[J("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm4.955-27.771-4.95 4.95-4.95-4.95a1 1 0 0 0-1.414 0l-1.414 1.414a1 1 0 0 0 0 1.414l4.95 4.95-4.95 4.95a1 1 0 0 0 0 1.414l1.414 1.414a1 1 0 0 0 1.414 0l4.95-4.95 4.95 4.95a1 1 0 0 0 1.414 0l1.414-1.414a1 1 0 0 0 0-1.414l-4.95-4.95 4.95-4.95a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0Z",fill:"currentColor",stroke:"none"},null,-1)]),14,Jt)}var Le=ne(Gt,[["render",Xt]]);const Qt=Object.assign(Le,{install:(e,n)=>{var a;const o=(a=n==null?void 0:n.iconPrefix)!=null?a:"";e.component(o+Le.name,Le)}}),ea=["info","success","warning","error"],ta=K({name:"IconLoading",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:n}){const a=te("icon"),o=Z(()=>[a,`${a}-loading`,{[`${a}-spin`]:e.spin}]),s=Z(()=>{const t={};return e.size&&(t.fontSize=ve(e.size)?`${e.size}px`:e.size),e.rotate&&(t.transform=`rotate(${e.rotate}deg)`),t});return{cls:o,innerStyle:s,onClick:t=>{n("click",t)}}}}),aa=["stroke-width","stroke-linecap","stroke-linejoin"];function na(e,n,a,o,s,t){return v(),T("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:X(e.cls),style:ie(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:n[0]||(n[0]=(...l)=>e.onClick&&e.onClick(...l))},n[1]||(n[1]=[J("path",{d:"M42 24c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6"},null,-1)]),14,aa)}var _e=ne(ta,[["render",na]]);const sa=Object.assign(_e,{install:(e,n)=>{var a;const o=(a=n==null?void 0:n.iconPrefix)!=null?a:"";e.component(o+_e.name,_e)}}),ra=1e3,oa=5e3,la=1;class ia{constructor(){this.popupStack={popup:new Set,dialog:new Set,message:new Set},this.getNextZIndex=n=>(n==="message"?Array.from(this.popupStack.message).pop()||oa:Array.from(this.popupStack.popup).pop()||ra)+la,this.add=n=>{const a=this.getNextZIndex(n);return this.popupStack[n].add(a),n==="dialog"&&this.popupStack.popup.add(a),a},this.delete=(n,a)=>{this.popupStack[a].delete(n),a==="dialog"&&this.popupStack.popup.delete(n)},this.isLastDialog=n=>this.popupStack.dialog.size>1?n===Array.from(this.popupStack.dialog).pop():!0}}const Ne=new ia;function da(e,{visible:n,runOnMounted:a}={}){const o=ee(0),s=()=>{o.value=Ne.add(e)},t=()=>{Ne.delete(o.value,e)},l=()=>!1;return ge(()=>n==null?void 0:n.value,p=>{p?s():t()},{immediate:!0}),a&&(le(()=>{s()}),Ee(()=>{t()})),{zIndex:Fe(o),open:s,close:t,isLastDialog:l}}const ua=K({name:"Message",components:{AIconHover:Ot,IconInfoCircleFill:At,IconCheckCircleFill:Rt,IconExclamationCircleFill:qt,IconCloseCircleFill:Qt,IconClose:Vt,IconLoading:sa},props:{type:{type:String,default:"info"},closable:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!0},duration:{type:Number,default:3e3},resetOnUpdate:{type:Boolean,default:!1},resetOnHover:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:n}){const a=te("message");let o=0;const s=()=>{n("close")},t=()=>{e.duration>0&&(o=window.setTimeout(s,e.duration))},l=()=>{o&&(window.clearTimeout(o),o=0)};return le(()=>{t()}),Ye(()=>{e.resetOnUpdate&&(l(),t())}),Ze(()=>{l()}),{handleMouseEnter:()=>{e.resetOnHover&&l()},handleMouseLeave:()=>{e.resetOnHover&&t()},prefixCls:a,handleClose:s}}});function ca(e,n,a,o,s,t){const l=w("icon-info-circle-fill"),p=w("icon-check-circle-fill"),I=w("icon-exclamation-circle-fill"),D=w("icon-close-circle-fill"),_=w("icon-loading"),y=w("icon-close"),x=w("a-icon-hover");return v(),T("li",{role:"alert",class:X([e.prefixCls,`${e.prefixCls}-${e.type}`,{[`${e.prefixCls}-closable`]:e.closable}]),onMouseenter:n[1]||(n[1]=(...c)=>e.handleMouseEnter&&e.handleMouseEnter(...c)),onMouseleave:n[2]||(n[2]=(...c)=>e.handleMouseLeave&&e.handleMouseLeave(...c))},[e.showIcon&&!(e.type==="normal"&&!e.$slots.icon)?(v(),T("span",{key:0,class:X(`${e.prefixCls}-icon`)},[pe(e.$slots,"icon",{},()=>[e.type==="info"?(v(),j(l,{key:0})):e.type==="success"?(v(),j(p,{key:1})):e.type==="warning"?(v(),j(I,{key:2})):e.type==="error"?(v(),j(D,{key:3})):e.type==="loading"?(v(),j(_,{key:4})):A("v-if",!0)])],2)):A("v-if",!0),J("span",{class:X(`${e.prefixCls}-content`)},[pe(e.$slots,"default")],2),e.closable?(v(),T("span",{key:1,class:X(`${e.prefixCls}-close-btn`),onClick:n[0]||(n[0]=(...c)=>e.handleClose&&e.handleClose(...c))},[C(x,null,{default:$(()=>[C(y)]),_:1})],2)):A("v-if",!0)],34)}var pa=ne(ua,[["render",ca]]);function fa(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!He(e)}var ma=K({name:"MessageList",props:{messages:{type:Array,default:()=>[]},position:{type:String,default:"top"}},emits:["close","afterClose"],setup(e,n){const a=te("message-list"),{zIndex:o}=da("message",{runOnMounted:!0});return()=>{let s;return C(We,{class:[a,`${a}-${e.position}`],name:"fade-message",tag:"ul",style:{zIndex:o.value},onAfterLeave:()=>n.emit("afterClose")},fa(s=e.messages.map(t=>{const l={default:Oe(t.content),icon:Oe(t.icon)};return C(pa,{key:t.id,type:t.type,duration:t.duration,closable:t.closable,resetOnUpdate:t.resetOnUpdate,resetOnHover:t.resetOnHover,onClose:()=>n.emit("close",t.id)},l)}))?s:{default:()=>[s]})}}});class ha{constructor(n,a){this.messageCount=0,this.add=t=>{var l;this.messageCount++;const p=(l=t.id)!=null?l:`__arco_message_${this.messageCount}`;if(this.messageIds.has(p))return this.update(p,t);const I=me({id:p,...t});return this.messages.value.push(I),this.messageIds.add(p),{close:()=>this.remove(p)}},this.update=(t,l)=>{for(let p=0;p<this.messages.value.length;p++)if(this.messages.value[p].id===t){const I=!Dt(l.duration);Object.assign(this.messages.value[p],{...l,id:t,resetOnUpdate:I});break}return{close:()=>this.remove(t)}},this.remove=t=>{for(let l=0;l<this.messages.value.length;l++){const p=this.messages.value[l];if(p.id===t){Ue(p.onClose)&&p.onClose(t),this.messages.value.splice(l,1),this.messageIds.delete(t);break}}},this.clear=()=>{this.messages.value.splice(0)},this.destroy=()=>{this.messages.value.length===0&&this.container&&(ze(null,this.container),document.body.removeChild(this.container),this.container=null,fe[this.position]=void 0)};const{position:o="top"}=n;this.container=Mt("message"),this.messageIds=new Set,this.messages=ee([]),this.position=o;const s=C(ma,{messages:this.messages.value,position:o,onClose:this.remove,onAfterClose:this.destroy});(a??ce._context)&&(s.appContext=a??ce._context),ze(s,this.container),document.body.appendChild(this.container)}}const fe={},Be=[...ea,"loading","normal"],we=Be.reduce((e,n)=>(e[n]=(a,o)=>{Ct(a)&&(a={content:a});const s={type:n,...a},{position:t="top"}=s;return fe[t]||(fe[t]=new ha(s,o)),fe[t].add(s)},e),{});we.clear=e=>{var n;e?(n=fe[e])==null||n.clear():Object.values(fe).forEach(a=>a==null?void 0:a.clear())};const ce={...we,install:e=>{const n={clear:we.clear};for(const a of Be)n[a]=(o,s=e._context)=>we[a](o,s);e.config.globalProperties.$message=n},_context:null},ba=K({__name:"index",props:{headersParams:{default:{}},limit:{default:0},accessToken:{default:""},size:{default:5},api:{default:""},apiParams:{},accept:{},fileFormat:{default:["jpg","jpeg","png","gif"]}},emits:["onSuccess"],setup(e,{emit:n}){const a=ee(!1),o=e,s=o.fileFormat,t=y=>y.response.success?(ce.success("图片上传成功"),y.response.result):y.response.result||"",l=y=>{ce.error("上传失败-"+y.response.message),a.value=!1},p=(y,x)=>new Promise((c,S)=>{s.includes(y.name.split(".")[y.name.split(".").length-1])?y.size/1024>x*1024?(S(new Error("上传失败")),a.value=!1,ce.error(`所选文件大小过大, 不得超过${x}M`)):c(y):(S(new Error("上传失败")),a.value=!1,ce.error(`所选文件${y.name.slice(-3)}格式不正确, 请选择 ${o.fileFormat}格式文件`))}),I=n;function D(y){a.value=!0}function _(y){const x=t(y);a.value=!1,I("onSuccess",x)}return(y,x)=>{const c=w("a-upload"),S=w("a-spin");return v(),T("div",null,[C(S,{"min-w-200px":"",loading:a.value,tip:"上传中..."},{default:$(()=>[C(c,{action:o.api,onProgress:D,headers:{accessToken:o.accessToken,...o.headersParams},"show-file-list":!1,onSuccess:_,limit:o.limit,disabled:a.value,onError:l,onBeforeUpload:x[0]||(x[0]=b=>p(b,o.size)),data:o.apiParams,accept:y.accept,ref:"uploadRef"},null,8,["action","headers","limit","disabled","data","accept"])]),_:1},8,["loading"])])}}});export{ba as H,va as I,ct as U,St as V,ga as n};
