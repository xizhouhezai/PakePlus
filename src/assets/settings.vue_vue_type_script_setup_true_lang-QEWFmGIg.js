import{g as T,s as V}from"./operation-CQQGRn8-.js";import{_ as B}from"./index.vue_vue_type_script_setup_true_lang-dUoIkT7B.js";import{d as N,r as u,h as A,b as l,o as _,c as m,e as t,w as a,u as r,q as L,f as d,k as U,F as $,i as j,t as D,M as F}from"./index-C4AMdMz2.js";const G={style:{"background-color":"#fff"}},P={"mb-10px":""},K=N({__name:"settings",setup(q){const b=u(),y=u(),i=u(!1),n=u({form:{consumer:0,register:0,signIn:0,comment:0}});function I(s){s.values.length>0?(n.value.articleInfo=s.values,n.value.articleId=n.value.articleInfo.map(e=>e.id).join(",")):(n.value.articleInfo=[],n.value.articleId="")}async function M(){const s=await T("PREMIUM_MEMBER_SETTING");n.value=s.data.result}async function k(){p()}async function w(){n.value.articleIds=n.value.articleInfo.map(s=>s.id).join(",")}async function p(){(await V("PREMIUM_MEMBER_SETTING",n.value)).data.success&&F.success("保存成功")}function C(){i.value=!0}return A(()=>{M()}),(s,e)=>{const S=l("a-modal"),E=l("a-divider"),R=l("a-switch"),g=l("a-form-item"),c=l("a-col"),f=l("a-row"),h=l("a-tag"),v=l("a-button"),x=l("a-form");return _(),m("div",G,[t(S,{visible:r(i),"onUpdate:visible":e[0]||(e[0]=o=>L(i)?i.value=o:null),width:1300,title:"文章管理",onOk:e[1]||(e[1]=o=>i.value=!0),onCancel:e[2]||(e[2]=o=>i.value=!1)},{default:a(()=>[t(B,{ref_key:"articleListRef",ref:b,checkbox:!0,"template-model":"selectModel",onSelectTableChange:I},null,512)]),_:1},8,["visible"]),t(x,{ref_key:"formRef",ref:y,style:{padding:"30px"},model:r(n),layout:"horizontal","auto-label-width":""},{default:a(()=>[t(E,{orientation:"left"},{default:a(()=>e[4]||(e[4]=[d(" 付费会员设置 ")])),_:1}),t(f,{gutter:24},{default:a(()=>[t(c,{span:12},{default:a(()=>[t(g,{field:"status",label:"是否启用","validate-trigger":["change"]},{default:a(()=>[t(R,{modelValue:r(n).openStatus,"onUpdate:modelValue":e[3]||(e[3]=o=>r(n).openStatus=o),onChange:k},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(f,{gutter:24},{default:a(()=>[t(c,{span:12},{default:a(()=>[t(g,{field:"articleId",label:"付费会员说明",tooltip:"付费会员说明讲述付费会员权益","validate-trigger":["change"]},{default:a(()=>[U("div",P,[(_(!0),m($,null,j(r(n).articleInfo,o=>(_(),m("div",{key:o.id,"mb-5px":""},[t(h,{closable:"",onClose:z=>w(o)},{default:a(()=>[d(D(o.title),1)]),_:2},1032,["onClose"])]))),128))]),t(v,{type:"primary",onClick:C},{default:a(()=>e[5]||(e[5]=[d(" 选择文章 ")])),_:1})]),_:1})]),_:1})]),_:1}),t(f,{gutter:24},{default:a(()=>[t(c,{span:12},{default:a(()=>[t(v,{type:"primary",onClick:p},{default:a(()=>e[6]||(e[6]=[d(" 保存 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])}}});export{K as _};
