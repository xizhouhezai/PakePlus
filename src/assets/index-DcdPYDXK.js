import{m as q,n as v}from"./index--a7kHzzJ.js";import{d as G,r as x,a as J,h as X,b as p,o as d,j as A,w as s,e as l,u as a,f,k as u,c as i,F as C,i as E,s as w,t as M,bn as Z,M as F,_ as ee}from"./index-C4AMdMz2.js";import{u as te}from"./useCurrentInstance-BLlvmEjv.js";import{g}from"./assetsImages-DUrhbhdO.js";import{R as _}from"./validator-B8pIxTAL.js";const ae={bordered:"",class:"auth-item"},le={class:"icon-item"},oe=["src"],se=["src"],ne=["src"],pe=["src"],re={class:"pay-title"},de=G({__name:"index",setup(ue){var k;const N=(k=te().globalProperties)==null?void 0:k.$modal,I=x(),S=x(0),e=J({way:{APP:"APP端",H5:"WAP端",WECHAT_MP:"小程序端",PC:"PC端"},payType:"PAYMENT_SUPPORT",paymentSupportForm:[],supportForm:{},payWay:{ALIPAY:"支付宝支付",WECHAT:"微信支付",WALLET:"余额支付"},alipayForm:{appId:"",certPath:"",alipayPublicCertPath:"",privateKey:"",rootCertPath:""},wechatForm:{appId:"",mpAppId:"",serviceAppId:"",mchId:"",apiKey3:"",apiclient_cert_p12:"",apiclient_cert_pem:"",apiclient_key:"",serialNumber:""}});async function c(){const n=await q(e.payType);e.payType==="PAYMENT_SUPPORT"?n.data.success&&(e.paymentSupportForm=n.data.result.paymentSupportItems,e.walletFlag=n.data.result.walletFlag):e.payType==="ALIPAY_PAYMENT"?n.data.success&&(e.alipayForm=n.data.result):e.payType==="WECHAT_PAYMENT"?n.data.success&&(e.wechatForm=n.data.result):e.payType==="WALLET_PAYMENT"&&n.data.success&&(e.walletForm=n.data.result)}function U(n){e.payType=n,c()}async function P(){const n=await Z();n.data.success&&(e.supportForm=n.data.result)}async function W(){v(e.payType,{paymentSupportItems:e.paymentSupportForm,walletFlag:e.walletFlag}).then(n=>{n.data.success?F.success("保存成功！"):F.error("保存失败！"),P(),c()})}function V(){N.confirm({title:"修改支付设置",content:"您是否修改此项？",alignCenter:!1,onOk:async()=>{await W()},onCancel:async()=>{await c()}})}async function Y(){var t;await((t=I.value)==null?void 0:t.validate())||v(e.payType,e.wechatForm).then(h=>{h.data.success?F.success("保存成功！"):F.error("保存失败！"),c()})}return X(()=>{P(),c()}),(n,t)=>{const h=p("a-switch"),r=p("a-form-item"),b=p("a-col"),R=p("a-divider"),D=p("a-checkbox"),H=p("a-checkbox-group"),K=p("a-space"),T=p("a-tab-pane"),m=p("a-input"),L=p("a-textarea"),B=p("a-button"),O=p("a-form"),$=p("a-tabs"),j=p("a-card");return d(),A(j,{class:"general-card",title:"支付设置",bordered:!1},{default:s(()=>[l($,{"default-active-key":a(e).payType,onChange:U},{default:s(()=>[l(T,{key:"PAYMENT_SUPPORT",title:"支付开启/关闭"},{default:s(()=>[l(b,{style:{"margin-bottom":"10px"}},{default:s(()=>[l(r,{label:"余额支付","text-align-left":"center"},{default:s(()=>[l(h,{modelValue:a(e).walletFlag,"onUpdate:modelValue":t[0]||(t[0]=o=>a(e).walletFlag=o),onChange:t[1]||(t[1]=o=>V())},{checked:s(()=>t[10]||(t[10]=[f(" 开启 ")])),unchecked:s(()=>t[11]||(t[11]=[f(" 关闭 ")])),_:1},8,["modelValue"])]),_:1}),t[12]||(t[12]=u("p",{color:"red"}," * 如果余额支付勾选开启，并且下方客户端勾选，余额支付才会开启，否则余额支付会关闭，两者缺一不可。 ",-1))]),_:1}),l(b,{style:{"margin-bottom":"10px"}},{default:s(()=>[(d(!0),i(C,null,E(a(e).paymentSupportForm,(o,z)=>(d(),A(K,{key:z},{default:s(()=>[u("div",ae,[u("div",le,[o.client==="APP"?(d(),i("img",{key:0,class:"icon",src:a(g)("app.svg"),alt:""},null,8,oe)):w("",!0),o.client==="H5"?(d(),i("img",{key:1,class:"icon",src:a(g)("h5.svg"),alt:""},null,8,se)):w("",!0),o.client==="WECHAT_MP"?(d(),i("img",{key:2,class:"icon",src:a(g)("wechat_mp.svg"),alt:""},null,8,ne)):w("",!0),o.client==="PC"?(d(),i("img",{key:3,class:"icon",src:a(g)("pc.svg"),alt:""},null,8,pe)):w("",!0)]),u("div",re,M(a(e).way[o.client]),1),l(R,{orientation:"left",style:{marginTop:"30px",marginBottom:"30px"}},{default:s(()=>t[13]||(t[13]=[f(" 支付设置 ")])),_:1}),(d(),i("div",{key:a(S),class:"pay-list"},[l(H,{modelValue:o.supports,"onUpdate:modelValue":y=>o.supports=y,"default-value":o.supports,onChange:V},{default:s(()=>[(d(!0),i(C,null,E(a(e).supportForm.payments,(y,Q)=>(d(),A(D,{key:Q,value:y},{default:s(()=>[f(M(a(e).payWay[y]||y),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","default-value"])]))])]),_:2},1024))),128))]),_:1})]),_:1}),l(T,{key:"WECHAT_PAYMENT",title:"微信支付设置"},{default:s(()=>[l(b,{span:20},{default:s(()=>[l(O,{ref_key:"wechatFormRef",ref:I,model:a(e).wechatForm,layout:"horizontal","auto-label-width":""},{default:s(()=>[l(r,{label:"appId",field:"appId"},{default:s(()=>[l(m,{modelValue:a(e).wechatForm.appId,"onUpdate:modelValue":t[2]||(t[2]=o=>a(e).wechatForm.appId=o),type:"text",style:{width:"70%"}},null,8,["modelValue"]),t[14]||(t[14]=u("p",{class:"mark"}," *APP应用 AppID 非必填 ",-1))]),_:1}),l(r,{label:"mpAppId",field:"mpAppId"},{default:s(()=>[l(m,{modelValue:a(e).wechatForm.mpAppId,"onUpdate:modelValue":t[3]||(t[3]=o=>a(e).wechatForm.mpAppId=o),type:"text",style:{width:"70%"}},null,8,["modelValue"]),t[15]||(t[15]=u("p",{class:"mark"}," *小程序 AppID 非必填 ",-1))]),_:1}),l(r,{label:"serviceAppId",field:"serviceAppId"},{default:s(()=>[l(m,{modelValue:a(e).wechatForm.serviceAppId,"onUpdate:modelValue":t[4]||(t[4]=o=>a(e).wechatForm.serviceAppId=o),type:"text",style:{width:"70%"}},null,8,["modelValue"]),t[16]||(t[16]=u("p",{class:"mark"}," *服务号 AppID 非必填 ",-1))]),_:1}),l(r,{label:"mchId",field:"mchId",rules:[a(_)]},{default:s(()=>[l(m,{modelValue:a(e).wechatForm.mchId,"onUpdate:modelValue":t[5]||(t[5]=o=>a(e).wechatForm.mchId=o),type:"text",style:{width:"70%"}},null,8,["modelValue"])]),_:1},8,["rules"]),l(r,{label:"subMchId",field:"subMchId",rules:[a(_)]},{default:s(()=>[l(m,{modelValue:a(e).wechatForm.subMchId,"onUpdate:modelValue":t[6]||(t[6]=o=>a(e).wechatForm.subMchId=o),type:"text",style:{width:"70%"}},null,8,["modelValue"]),t[17]||(t[17]=u("p",{class:"mark"}," *平台自建子商户号，用于充值类业务直接将款项打入平台子商户 必填 ",-1))]),_:1},8,["rules"]),l(r,{label:"apiKey3",field:"apiKey3",rules:[a(_)],style:{width:"70%"}},{default:s(()=>[l(m,{modelValue:a(e).wechatForm.apiKey3,"onUpdate:modelValue":t[7]||(t[7]=o=>a(e).wechatForm.apiKey3=o),type:"text"},null,8,["modelValue"])]),_:1},8,["rules"]),l(r,{field:"apiclient_key",label:"apiclient_key",rules:[a(_)],style:{width:"70%"}},{default:s(()=>[l(L,{modelValue:a(e).wechatForm.apiclient_key,"onUpdate:modelValue":t[8]||(t[8]=o=>a(e).wechatForm.apiclient_key=o),"max-length":3e3,"allow-clear":"","show-word-limit":"","h-300px":""},null,8,["modelValue"])]),_:1},8,["rules"]),l(r,{label:"serialNumber",field:"serialNumber",rules:[a(_)],style:{width:"70%"}},{default:s(()=>[l(m,{modelValue:a(e).wechatForm.serialNumber,"onUpdate:modelValue":t[9]||(t[9]=o=>a(e).wechatForm.serialNumber=o),type:"text"},null,8,["modelValue"])]),_:1},8,["rules"]),l(r,null,{default:s(()=>[l(B,{type:"primary",onClick:Y},{default:s(()=>t[18]||(t[18]=[f(" 保存 ")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1},8,["default-active-key"])]),_:1})}}}),_e=ee(de,[["__scopeId","data-v-948aef2d"]]);export{_e as default};
