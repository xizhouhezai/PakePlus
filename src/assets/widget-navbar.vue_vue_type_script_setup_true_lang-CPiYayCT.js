import{d as T,r as d,p as B,b as s,v as E,o as p,c,e as a,w as t,u as o,f as g,k as P,x as U,s as H,q as M,M as y,ar as b}from"./index-C4AMdMz2.js";import{R as S}from"./validator-B8pIxTAL.js";import{u as h}from"./index-B0S7r7AY.js";const A={key:0},Q=T({__name:"widget-navbar",setup(F){const n=d(!1),l=d(!1),f=h(),w=d(!1),i=B(),r=d({name:i.query.moduleName||"模板名称",pageClientType:"H5",pageType:i.query.pageType});function k(){if(!f.app.length)return y.error("请装修内容!"),!1;l.value=!0}async function D(){n.value=!0;const u={...r.value,pageData:JSON.stringify({version:"v3",data:f.app})};try{let e;i.query.id?e=await b({...u,id:i.query.id},i.query.id):e=await b(u),e.data.success&&(l.value=!1,n.value=!1,y.success("保存成功"))}catch(e){console.warn(e),n.value=!1}}return(u,e)=>{const _=s("a-button"),x=s("a-space"),V=s("a-page-header"),q=s("a-input"),v=s("a-form-item"),C=s("a-form"),N=s("a-modal"),R=E("auto-animate");return p(),c("div",null,[a(V,{style:{background:"var(--color-bg-2)"},title:"APP-Design","show-back":!1},{extra:t(()=>[a(x,null,{default:t(()=>[a(_,{loading:o(n),type:"primary",onClick:k},{default:t(()=>e[2]||(e[2]=[g(" 保存内容 ")])),_:1},8,["loading"])]),_:1})]),_:1}),a(N,{visible:o(l),"onUpdate:visible":e[1]||(e[1]=m=>M(l)?l.value=m:null),title:"保存内容"},{footer:t(()=>e[4]||(e[4]=[P("div",null,null,-1)])),default:t(()=>[U((p(),c("div",null,[o(w)?H("",!0):(p(),c("div",A,[a(C,{style:{width:"480px"},model:o(r),onSubmit:D},{default:t(()=>[a(v,{"asterisk-position":"after",rules:[o(S)],tooltip:"保存模板的名称",label:"模板名称"},{default:t(()=>[a(q,{modelValue:o(r).name,"onUpdate:modelValue":e[0]||(e[0]=m=>o(r).name=m)},null,8,["modelValue"])]),_:1},8,["rules"]),a(v,null,{default:t(()=>[a(_,{type:"primary",loading:o(n),"html-type":"submit"},{default:t(()=>e[3]||(e[3]=[g(" 保存 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]))])),[[R]])]),_:1},8,["visible"])])}}});export{Q as _};
