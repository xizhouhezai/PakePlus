import{a6 as L,a7 as B,a8 as M}from"./promotion-ChRoyrm_.js";import{d as P,n as U,r as k,h as j,b as s,u as i,o as v,c as w,e as l,w as t,f as r,F as z,i as F,j as G,k as m,Z as K,t as D,s as Z,M as b,_ as $}from"./index-C4AMdMz2.js";const q={key:0},A={class:"foot-btn"},H=P({__name:"seckill-setup",setup(J){const g=U(),C=k(!1),a=k({seckillRule:"",needCheck:!1,creation:7}),c=k([]);async function f(){const o=await L("SECKILL_SETTING");if(o.data.success){C.value=!0,a.value=o.data.result,c.value=[];for(let e=0;e<24;e+=1)o.data.result.hours&&o.data.result.hours.split(",").forEach(p=>{Number(p)===e&&c.value.push({time:e,check:!0})}),c.value[e]||c.value.push({time:e,check:!1})}}j(()=>{f()});function h(o){o.check=!o.check}function x(){g.push({name:"seckill"})}async function V(){const o=c.value.filter(u=>u.check).map(u=>u.time).join(",");(await B("SECKILL_SETTING",{seckillRule:a.value.seckillRule,hours:o,needCheck:a.value.needCheck,creation:a.value.creation})).data.success&&(b.success("设置成功!"),f())}function S(){M().then(()=>{b.success("初始化成功!"),f()})}return(o,e)=>{const u=s("a-divider"),p=s("a-col"),N=s("a-row"),d=s("a-form-item"),E=s("a-textarea"),R=s("a-switch"),T=s("a-input-number"),_=s("a-button"),I=s("a-form");return i(C)?(v(),w("div",q,[l(I,{model:i(a),style:{width:"100%"},layout:"horizontal","auto-label-width":""},{default:t(()=>[l(u,{orientation:"left"},{default:t(()=>e[3]||(e[3]=[r(" 秒杀活动设置 ")])),_:1}),l(d,{label:"每日场次设置"},{default:t(()=>[l(N,{class:"row",gutter:16},{default:t(()=>[(v(!0),w(z,null,F(i(c),(n,y)=>(v(),G(p,{key:y,class:"time-item",span:3,onClick:O=>h(n,y)},{default:t(()=>[m("div",{class:K(["time",{active:n.check}])},D(n.time)+":00 ",3)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),l(d,{label:"秒杀规则"},{default:t(()=>[l(E,{modelValue:i(a).seckillRule,"onUpdate:modelValue":e[0]||(e[0]=n=>i(a).seckillRule=n),"allow-clear":"",style:{width:"360px","margin-left":"10px"}},null,8,["modelValue"])]),_:1}),l(d,{label:"商品审核"},{default:t(()=>[l(R,{modelValue:i(a).needCheck,"onUpdate:modelValue":e[1]||(e[1]=n=>i(a).needCheck=n)},{checked:t(()=>e[4]||(e[4]=[r(" 是 ")])),unchecked:t(()=>e[5]||(e[5]=[r(" 否 ")])),_:1},8,["modelValue"])]),_:1}),l(d,{label:"自动创建周期"},{extra:t(()=>e[6]||(e[6]=[m("div",null,"每日凌晨自动创建周期活动，设置为7天，则自动生成7天的活动，最大30天。",-1)])),default:t(()=>[l(T,{modelValue:i(a).creation,"onUpdate:modelValue":e[2]||(e[2]=n=>i(a).creation=n),style:{width:"320px"},min:1,max:30},null,8,["modelValue"])]),_:1}),l(d,null,{default:t(()=>[m("div",A,[l(_,{style:{"margin-right":"5px"},onClick:x},{default:t(()=>e[7]||(e[7]=[r(" 返回 ")])),_:1}),l(_,{type:"primary",style:{"margin-right":"5px"},onClick:V},{default:t(()=>e[8]||(e[8]=[r(" 提交 ")])),_:1})])]),_:1}),l(u,{orientation:"left"},{default:t(()=>e[9]||(e[9]=[r(" 秒杀活动初始化 ")])),_:1}),l(d,{label:""},{extra:t(()=>e[11]||(e[11]=[m("div",null,"已有活动不会重复创建，主要用于系统第一次部署没有秒杀活动。",-1)])),default:t(()=>[l(_,{type:"primary",style:{"margin-right":"5px"},onClick:S},{default:t(()=>e[10]||(e[10]=[r(" 初始化秒杀活动 ")])),_:1})]),_:1})]),_:1},8,["model"])])):Z("",!0)}}}),X=$(H,[["__scopeId","data-v-2c5fb253"]]);export{X as default};
