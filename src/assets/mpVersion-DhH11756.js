import{g as M,e as B,a as N,s as P}from"./saas-C7moPfYT.js";import{V as $}from"./dist-PezRi_EG.js";import{d as E,r as p,b as i,o as f,j as c,w as t,e as a,f as l,u as d,q as S,k as U,M as x}from"./index-C4AMdMz2.js";const q={class:""},A=E({__name:"mpVersion",setup(z){const m=p(""),_=p({sort:"id",order:"desc"}),v=[{title:"模板ID",dataIndex:"id",width:80},{title:"模板名称",dataIndex:"name",width:200},{title:"创建时间",dataIndex:"remark",width:180},{title:"extjson",dataIndex:"extJson",width:500}],w={title:"操作",width:260,methods:[{slot:!0,slotTemplate:"action"}]},r=p(!1),u=p({extJson:""});function b(s){B({id:s.id}).then(e=>{var o;e.data.success&&(x.success("操作成功"),(o=m.value)==null||o.init())})}function y(s){r.value=!0,u.value=s}function k(){N({id:u.value.id,extJson:u.value.extJson}).then(s=>{var e;s.data.success&&(r.value=!1,x.success("操作成功"),(e=m.value)==null||e.init())})}function g(){P().then(s=>{var e;s.data.success&&(x.success("同步成功"),(e=m.value)==null||e.init())})}return(s,e)=>{const o=i("a-button"),C=i("a-alert"),J=i("a-textarea"),V=i("a-form-item"),I=i("a-form"),R=i("a-modal"),T=i("a-card");return f(),c(T,{class:"general-card",title:"微信小程序模版",bordered:!1},{default:t(()=>[a(o,{style:{"margin-bottom":"15px"},type:"primary",onClick:g},{default:t(()=>e[3]||(e[3]=[l(" 同步微信小程序模板 ")])),_:1}),a(d($),{ref_key:"tablePageRef",ref:m,columns:v,methods:w,api:d(M),"api-params":d(_),bordered:!0},{action:t(({data:n})=>[n.enable?(f(),c(o,{key:0,type:"text",status:"success"},{default:t(()=>e[4]||(e[4]=[l("    当前默认    ")])),_:1})):(f(),c(o,{key:1,type:"text",status:"danger",onClick:j=>b(n)},{default:t(()=>e[5]||(e[5]=[l(" 设置默认模板 ")])),_:2},1032,["onClick"])),a(o,{type:"text",onClick:j=>y(n)},{default:t(()=>e[6]||(e[6]=[l(" 编辑extjson ")])),_:2},1032,["onClick"])]),_:1},8,["api","api-params"]),a(R,{visible:d(r),"onUpdate:visible":e[2]||(e[2]=n=>S(r)?r.value=n:null),width:"600px"},{title:t(()=>e[7]||(e[7]=[l(" 编辑小程序扩展文件 ")])),footer:t(()=>[a(o,{onClick:e[1]||(e[1]=n=>r.value=!1)},{default:t(()=>e[9]||(e[9]=[l(" 取消 ")])),_:1}),a(o,{type:"primary",onClick:k},{default:t(()=>e[10]||(e[10]=[l(" 确定 ")])),_:1})]),default:t(()=>[U("div",q,[a(C,{type:"warning","show-icon":!1},{default:t(()=>e[8]||(e[8]=[l(' 目前支持 "{appid}"、"{storeId}" 占位符，分别表示小程序id和店铺id。如果不了解，请勿轻易调整，以免引起小程序异常。 ')])),_:1}),a(I,{model:d(u),layout:"vertical","mt-10px":""},{default:t(()=>[a(V,{field:"extJson",label:"extJson"},{default:t(()=>[a(J,{modelValue:d(u).extJson,"onUpdate:modelValue":e[0]||(e[0]=n=>d(u).extJson=n),"allow-clear":"","auto-size":{maxRows:10,minRows:5},"show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["visible"])]),_:1})}}});export{A as default};
