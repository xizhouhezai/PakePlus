import{A as M,B as $,C as I}from"./shops-fXVW_gE8.js";import{f as h,u as o}from"./filters-D05Q2eUM.js";import{V as g}from"./dist-PezRi_EG.js";import{d as q,r as m,p as O,h as Y,b as f,o as c,c as _,e as r,w as u,k as e,t as s,u as t,j as y,f as z,s as C,F as H,i as K,M as L,_ as U}from"./index-C4AMdMz2.js";const G={class:"flex_align_item flex"},J={class:"tips-status"},Q={class:"theme_color"},W={class:"bill-detail-price"},X={class:"increase-color"},Z={class:"increase-color"},ee={class:"increase-color"},te={class:"increase-color"},ne={class:"theme_color"},ae={class:"theme_color"},le={class:"theme_color"},ie={class:"theme_color"},se=q({__name:"bill-detail",setup(oe){const P=m(!1),v=m(!1),w=m(),k=m(),d={flowType:"PAY",startTime:"",endTime:""},x=O(),a=m({storeName:"",bankAccountName:"",bankAccountNumber:"",bankName:"",bankCode:"",billStatus:"",sn:"",pointSettlementPrice:0,siteCouponCommission:0,kanjiaSettlementPrice:0,refundCommissionPrice:0,refundPrice:0,commissionPrice:0,distributionCommission:0,siteCouponRefundCommission:0}),N=[{title:"入账时间",dataIndex:"createTime",width:120},{title:"订单编号",dataIndex:"orderSn",width:120},{title:"订单金额",dataIndex:"finalPrice",width:120,currency:!0},{title:"平台分佣",dataIndex:"commissionPrice",width:120,currency:!0},{title:"平台优惠券",dataIndex:"siteCouponPrice",width:120,currency:!0},{title:"平台优惠券补贴金额",dataIndex:"siteCouponCommission",width:120,currency:!0},{title:"分销金额",dataIndex:"distributorSettlementPrice",width:120,currency:!0},{title:"应结金额",dataIndex:"billPrice",width:120,currency:!0}],R=[{title:"退款时间",dataIndex:"createTime",width:120},{title:"退款流水编号",dataIndex:"sn",width:120},{title:"订单编号",dataIndex:"orderSn",width:120},{title:"售后编号",dataIndex:"refundSn",width:120},{title:"退款金额",dataIndex:"finalPrice",width:120,currency:!0},{title:"退还佣金",dataIndex:"commissionPrice",width:120,currency:!0},{title:"退还平台优惠券",dataIndex:"siteCouponCommission",width:120,currency:!0},{title:"退还分销",dataIndex:"distributorSettlementPrice",width:120,currency:!0},{title:"合计金额",dataIndex:"billPrice",width:120,currency:!0}],i=m([{name:"计算中",value:0},{name:"计算中",value:0},{name:"计算中",value:0},{name:"计算中",value:0},{name:"计算中",value:0},{name:"计算中",value:0},{name:"计算中",value:0},{name:"计算中",value:0}]);function B(){const l=a.value;i.value[0].name="结算单号",i.value[0].value=l.sn,i.value[1].name="起止日期",i.value[1].value=`${l.startTime}~${l.endTime}`,i.value[2].name="出帐日期",i.value[2].value=l.createTime,i.value[3].name="当前状态",i.value[3].value=h(l.billStatus),i.value[4].name="当前店铺",i.value[4].value=l.storeName,i.value[5].name="平台打款时间",i.value[5].value=l.payTime===null?"未付款":l.payTime,i.value[6].name="订单付款总金额",i.value[6].value=o(l.orderPrice?l.orderPrice:0," ¥"),i.value[7].name="结算金额",i.value[7].value=o(l.billPrice?l.billPrice:0," ¥")}function A(l){l===1?(v.value=!0,d.flowType="PAY",w.value.init()):(P.value=!0,d.flowType="REFUND",k.value.init())}async function V(){const l=await $(x.query.id);l.data.success&&(a.value=l.data.result,d.startTime=l.data.result.startTime,d.endTime=l.data.result.endTime,v.value=!0,B())}function T(){V()}Y(async()=>{T()});async function D(){const l=await M(x.query.id);l.data.success&&(L.success(l.data.message),T())}return(l,n)=>{const p=f("a-card"),j=f("a-button"),S=f("a-tab-pane"),F=f("a-tabs");return c(),_("div",null,[r(p,{style:{width:"100%"}},{default:u(()=>[n[1]||(n[1]=e("p",null,"商家信息",-1)),e("div",G,[e("p",null,"店铺名称："+s(t(a).storeName),1),e("p",null,"银行开户名："+s(t(a).bankAccountName),1),e("p",null,"银行账号："+s(t(a).bankAccountNumber),1),e("p",null,"开户行支行名称："+s(t(a).bankName),1),e("p",null,"支行联行号："+s(t(a).bankCode),1)])]),_:1}),r(p,{class:"mt_10 mb_10",style:{width:"100%"}},{default:u(()=>[n[13]||(n[13]=e("p",null,"账单详细",-1)),e("div",J,[n[3]||(n[3]=e("span",null,"账单状态 ：",-1)),e("span",Q,s(t(h)(t(a).billStatus)),1),t(a).billStatus==="CHECK"?(c(),y(j,{key:0,size:"mini",type:"primary",onClick:n[0]||(n[0]=b=>D())},{default:u(()=>n[2]||(n[2]=[z(" 付款 ")])),_:1})):C("",!0)]),e("table",null,[e("tbody",null,[(c(!0),_(H,null,K(t(i),(b,E)=>(c(),_("tr",{key:E},[e("td",null,s(b.name)+"：",1),e("td",null,s(b.value),1)]))),128))])]),e("div",null,[n[12]||(n[12]=e("h3",{class:"ml_10",style:{padding:"10px"}}," 结算详细 ",-1)),e("div",W,[e("span",null,[n[4]||(n[4]=e("p",null,"积分结算金额",-1)),e("p",X," +"+s(t(o)(t(a).pointSettlementPrice?t(a).pointSettlementPrice:0,"￥")),1)]),e("span",null,[n[5]||(n[5]=e("p",null,"平台优惠券补贴",-1)),e("p",Z," +"+s(t(o)(t(a).siteCouponCommission?t(a).siteCouponCommission:0,"￥")),1)]),e("span",null,[n[6]||(n[6]=e("p",null,"退单分销返现返还",-1)),e("p",ee," +"+s(t(o)(t(a).kanjiaSettlementPrice?t(a).kanjiaSettlementPrice:0,"￥")),1)]),e("span",null,[n[7]||(n[7]=e("p",null,"退单产生退还佣金金额",-1)),e("p",te," +"+s(t(o)(t(a).refundCommissionPrice?t(a).refundCommissionPrice:0,"￥")),1)]),e("span",null,[n[8]||(n[8]=e("p",null,"退单金额",-1)),e("p",ne," -"+s(t(o)(t(a).refundPrice?t(a).refundPrice:0,"￥")),1)]),e("span",null,[n[9]||(n[9]=e("p",null,"平台收取佣金",-1)),e("p",ae," -"+s(t(o)(t(a).commissionPrice?t(a).commissionPrice:0,"￥")),1)]),e("span",null,[n[10]||(n[10]=e("p",null,"分销返现支出",-1)),e("p",le," -"+s(t(o)(t(a).distributionCommission?t(a).distributionCommission:0,"￥")),1)]),e("span",null,[n[11]||(n[11]=e("p",null,"退单平台优惠券补贴返还",-1)),e("p",ie," -"+s(t(o)(t(a).siteCouponRefundCommission?t(a).siteCouponRefundCommission:0,"￥")),1)])])])]),_:1}),r(F,{"default-active-key":"1",onChange:A},{default:u(()=>[r(S,{key:"1",title:"入账流水"},{default:u(()=>[r(p,{style:{width:"100%"}},{default:u(()=>[t(v)?(c(),y(t(g),{key:0,ref_key:"tablePageRefOwn",ref:w,columns:N,api:I,"api-params":d,bordered:!0},null,8,["api"])):C("",!0)]),_:1})]),_:1}),r(S,{key:"2",title:"退款流水"},{default:u(()=>[r(p,{style:{width:"100%"}},{default:u(()=>[t(P)?(c(),y(t(g),{key:0,ref_key:"tablePageRefTwo",ref:k,columns:R,api:I,"api-params":d,bordered:!0},null,8,["api"])):C("",!0)]),_:1})]),_:1})]),_:1})])}}}),ce=U(se,[["__scopeId","data-v-28f4406f"]]);export{ce as default};
