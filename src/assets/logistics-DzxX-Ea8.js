import{l as _,m as V,d as j,r as h,a as $,b as s,o as F,j as q,w as o,e as a,f as r,u as l,t as z,M as w}from"./index-C4AMdMz2.js";import{u as G}from"./useCurrentInstance-BLlvmEjv.js";import{R as C,V as L}from"./validator-B8pIxTAL.js";import{V as H}from"./dist-PezRi_EG.js";function Q(i){return _({url:"/system/logistics/getByPage",method:V.GET,needToken:!0,params:i})}function J(i){return _({url:`/system/logistics/${i}`,method:V.DELETE,needToken:!0})}function K(i){return _({url:"/system/logistics",method:V.POST,needToken:!0,params:i})}function P(i,f){return _({url:`/system/logistics/${i}`,method:V.PUT,needToken:!0,params:f})}const ee=j({__name:"logistics",setup(i){var O;const f=h(),k=h(""),b=h(),T=(O=G().globalProperties)==null?void 0:O.$modal,x=[{title:"物流公司名称",dataIndex:"name",width:300},{title:"物流公司编码",dataIndex:"code"},{title:"状态",dataIndex:"btnList",slot:!0,slotTemplate:"btnList"},{title:"创建时间",dataIndex:"createTime",width:300}],A={title:"操作",width:300,methods:[{title:"修改",callback:"editor",type:"text",status:"warning"},{title:"删除",callback:"delete",type:"text",status:"danger"}]},t=$({enableAddModal:!1,formLoading:!1,fid:"",form:{name:"",code:"",disabled:"",standBy:"",formItems:""}});function I(d){d&&(Object.keys(d).forEach(e=>{t.form.hasOwnProperty(e)?t.form[e]=d[e]:t.form[e]=""}),t.fid=d.id,t.form.disabled=d.disabled==="CLOSE"?"CLOSE":"OPEN",P(t.fid,t.form))}function M(){t.enableAddModal=!0,k.value="添加",t.fid="",b.value.resetFields(),Object.keys(t.form).forEach(d=>{t.form[d]=""})}async function U(){var e;if(!await((e=b.value)==null?void 0:e.validate())){let m;const c=Object.keys(t.form).reduce((g,p)=>(["name","code","disabled","standBy","formItems"].includes(p)&&(g[p]=t.form[p]),g),{});t.fid?m=await P(t.fid,c):m=await K(c),m.data.success&&(w.success(`${t.fid?"修改":"添加"}成功!`),t.enableAddModal=!1,f.value.init())}}function R(d){k.value="编辑",b.value.resetFields(),d&&(Object.keys(d.record).forEach(e=>{t.form.hasOwnProperty(e)?t.form[e]=d.record[e]:t.form[e]=""}),t.fid=d.record.id,t.enableAddModal=!0)}function S(d){T.confirm({title:"确认删除",content:"您确认要删除么?",alignCenter:!1,onOk:async()=>{(await J(d.record.id)).data.success&&(w.success("删除成功"),f.value.init())}})}return(d,e)=>{const m=s("a-button"),c=s("a-space"),g=s("a-col"),p=s("a-row"),E=s("a-switch"),y=s("a-input"),u=s("a-form-item"),B=s("a-form"),D=s("a-modal"),N=s("a-card");return F(),q(N,{class:"general-card",bordered:!1,title:"物流公司"},{default:o(()=>[a(p,{style:{"margin-bottom":"16px"}},{default:o(()=>[a(g,{span:16},{default:o(()=>[a(c,null,{default:o(()=>[a(m,{type:"primary",onClick:M},{default:o(()=>e[6]||(e[6]=[r(" 添加 ")])),_:1})]),_:1})]),_:1})]),_:1}),a(l(H),{ref_key:"tablePageRef",ref:f,columns:x,methods:A,api:l(Q),bordered:!0,onDelete:S,onEditor:R},{btnList:o(({data:n})=>[a(c,{size:"large"},{default:o(()=>[a(E,{modelValue:n.disabled,"onUpdate:modelValue":v=>n.disabled=v,"checked-value":"OPEN","unchecked-value":"CLOSE",onChange:v=>I(n)},{checked:o(()=>e[7]||(e[7]=[r(" 启用 ")])),unchecked:o(()=>e[8]||(e[8]=[r(" 禁用 ")])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024)]),_:1},8,["api"]),a(D,{visible:l(t).enableAddModal,"onUpdate:visible":e[5]||(e[5]=n=>l(t).enableAddModal=n),"align-center":!1,footer:!1},{title:o(()=>[r(z(l(k)),1)]),default:o(()=>[a(B,{ref_key:"formRef",ref:b,model:l(t).form,"auto-label-width":"",onSubmit:U},{default:o(()=>[a(u,{field:"name",label:"物流公司名称",rules:[l(C),l(L)],"validate-trigger":["change"]},{default:o(()=>[a(y,{modelValue:l(t).form.name,"onUpdate:modelValue":e[0]||(e[0]=n=>l(t).form.name=n)},null,8,["modelValue"])]),_:1},8,["rules"]),a(u,{field:"code",label:"物流公司代码",rules:[l(C),l(L)],"validate-trigger":["change"]},{default:o(()=>[a(y,{modelValue:l(t).form.code,"onUpdate:modelValue":e[1]||(e[1]=n=>l(t).form.code=n)},null,8,["modelValue"])]),_:1},8,["rules"]),a(u,{label:"支持电子面单",field:"deleteFlag"},{default:o(()=>[a(E,{modelValue:l(t).form.standBy,"onUpdate:modelValue":e[2]||(e[2]=n=>l(t).form.standBy=n),"checked-value":"OPEN","unchecked-value":"CLOSE"},{checked:o(()=>e[9]||(e[9]=[r(" 开 ")])),unchecked:o(()=>e[10]||(e[10]=[r(" 关 ")])),_:1},8,["modelValue"])]),_:1}),a(u,{field:"formItems",label:"电子面单表单","validate-trigger":["change"]},{default:o(()=>[a(y,{modelValue:l(t).form.formItems,"onUpdate:modelValue":e[3]||(e[3]=n=>l(t).form.formItems=n)},null,8,["modelValue"])]),_:1}),a(u,{field:"disabled",label:"启用状态"},{default:o(()=>[a(E,{modelValue:l(t).form.disabled,"onUpdate:modelValue":e[4]||(e[4]=n=>l(t).form.disabled=n),"unchecked-color":"#515A6E","checked-value":"OPEN","unchecked-value":"CLOSE"},{checked:o(()=>e[11]||(e[11]=[r(" 开 ")])),unchecked:o(()=>e[12]||(e[12]=[r(" 关 ")])),_:1},8,["modelValue"])]),_:1}),a(u,{label:"操作"},{default:o(()=>[a(m,{loading:l(t).formLoading,"html-type":"submit",type:"primary"},{default:o(()=>e[13]||(e[13]=[r(" 保存 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])]),_:1})}}});export{ee as default};
