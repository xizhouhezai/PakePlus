import{q as D,r as _}from"./operation-CQQGRn8-.js";import{u as P}from"./useCurrentInstance-BLlvmEjv.js";import{U as V,V as M}from"./dist-PezRi_EG.js";import{d as R,r as c,b as o,o as S,j as $,w as n,e as t,u as s,f as j,M as m}from"./index-C4AMdMz2.js";const A=R({__name:"index",setup(B){var p;const l=c({}),d=c(),f=(p=P().globalProperties)==null?void 0:p.$modal,i=c([]),u=c(""),h=[{label:"商品名称",model:"goodsName",disabled:!1,input:!0}],b=[{title:"商品图片",dataIndex:"thumbnail",slot:!0,slotTemplate:"thumbnail",width:150},{title:"商品名称",dataIndex:"goodsName",width:200},{title:"商品价格",dataIndex:"price",currency:!0,width:120},{title:"添加时间",dataIndex:"createTime",width:200},{title:"店铺名称",dataIndex:"storeName",slot:!0,store:!0,width:200},{title:"佣金金额",dataIndex:"firstCommission",currency:!0,width:120}],g={title:"操作",width:150,fixed:"right",methods:[{title:"下架",callback:"delete",type:"text",status:"danger"}]};function x(a){f.confirm({title:"确认下架",content:"您确认要下架么?",alignCenter:!1,onOk:async()=>{(await _(a.record.id)).data.success&&(m.success("下架成功"),d.value.init())}})}function w(a){i.value=a}function v(){if(i.value.length<=0){m.error("您还未选择要下架的数据");return}i.value.forEach(e=>{u.value+=`${e.id},`});const a=u.value.substring(0,u.value.length-1);f.confirm({title:"确认下架",content:`您确认要下架所选的${i.value.length}条数据?`,alignCenter:!1,onOk:async()=>{(await _(a)).data.success&&(m.success("下架成功"),d.value.init())}})}return(a,e)=>{const C=o("a-button"),k=o("a-space"),y=o("a-col"),I=o("a-row"),T=o("a-image"),N=o("a-card");return S(),$(N,{class:"general-card",title:"分销商品",bordered:!1},{default:n(()=>[t(s(V),{columns:h,onReset:e[0]||(e[0]=r=>{l.value={...s(l),...r}}),onSearch:e[1]||(e[1]=r=>{l.value={...s(l),...r}})}),t(I,{style:{"margin-bottom":"16px"}},{default:n(()=>[t(y,{span:16},{default:n(()=>[t(k,null,{default:n(()=>[t(C,{onClick:v},{default:n(()=>e[2]||(e[2]=[j(" 批量下架 ")])),_:1})]),_:1})]),_:1})]),_:1}),t(s(M),{ref_key:"tablePageRef",ref:d,columns:b,methods:g,api:s(D),checkbox:!0,"api-params":s(l),bordered:!0,onDelete:x,onSelectTableChange:w},{thumbnail:n(({data:r})=>[t(T,{width:"100",height:"100",src:r.thumbnail},null,8,["src"])]),_:1},8,["api","api-params"])]),_:1})}}});export{A as default};
