import{d as P,r as m,p as T,b as l,v as E,o as _,c as f,e as a,w as t,u as s,f as g,k as R,x as B,s as I,q as U,ar as y,M}from"./index-C4AMdMz2.js";import{R as S}from"./validator-B8pIxTAL.js";import{u as X}from"./index-B0S7r7AY.js";const F={key:0},h=P({__name:"pc-navbar",setup(H){const i=m(!1),r=m(!1),b=m(!1),n=T(),u=m({name:n.query.moduleName||"模板名称",pageClientType:"PC",pageType:n.query.pageType}),d=X();function D(){r.value=!0}async function C(){i.value=!0;let p;n.query.pageType==="INDEX_PC"||n.query.pageType==="INDEX_2B_PC"?p=[...d.pinPc,...d.pc]:p=[...d.pc];const e={...u.value,pageData:JSON.stringify({version:"v3",data:p})};try{let o;n.query.id?o=await y({...e,id:n.query.id},n.query.id):o=await y(e),o.data.success&&(r.value=!1,i.value=!1,M.success("保存成功"))}catch(o){console.warn(o),i.value=!1}}return(p,e)=>{const o=l("a-button"),k=l("a-space"),q=l("a-page-header"),w=l("a-input"),v=l("a-form-item"),N=l("a-form"),x=l("a-modal"),V=E("auto-animate");return _(),f("div",null,[a(q,{style:{background:"var(--color-bg-2)"},title:"PC-Design","show-back":!1},{extra:t(()=>[a(k,null,{default:t(()=>[a(o,{loading:s(i),type:"primary",onClick:D},{default:t(()=>e[2]||(e[2]=[g(" 保存内容 ")])),_:1},8,["loading"])]),_:1})]),_:1}),a(x,{visible:s(r),"onUpdate:visible":e[1]||(e[1]=c=>U(r)?r.value=c:null),title:"保存内容"},{footer:t(()=>e[4]||(e[4]=[R("div",null,null,-1)])),default:t(()=>[B((_(),f("div",null,[s(b)?I("",!0):(_(),f("div",F,[a(N,{style:{width:"480px"},model:s(u),onSubmit:C},{default:t(()=>[a(v,{"asterisk-position":"after",rules:[s(S)],tooltip:"保存模板的名称",label:"模板名称"},{default:t(()=>[a(w,{modelValue:s(u).name,"onUpdate:modelValue":e[0]||(e[0]=c=>s(u).name=c)},null,8,["modelValue"])]),_:1},8,["rules"]),a(v,null,{default:t(()=>[a(o,{type:"primary",loading:s(i),"html-type":"submit"},{default:t(()=>e[3]||(e[3]=[g(" 保存 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]))])),[[V]])]),_:1},8,["visible"])])}}});export{h as _};
