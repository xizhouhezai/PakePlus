import{i as J,s as Q,j as Z}from"./statisitics-CehHs8Ha.js";import{u as ee}from"./loading-CB2rs24d.js";import{d as A,r as R,a as x,h as O,E as G,b as N,o as f,c as I,e as c,w as r,k as t,t as d,u as n,_ as k,n as te,ac as e,f as C,q as se,j as S,s as w,F as $,i as M,A as P}from"./index-C4AMdMz2.js";import{o as ae}from"./index-qc7jHBWQ.js";import{u as g}from"./filters-D05Q2eUM.js";import{_ as ne}from"./index.vue_vue_type_script_setup_true_lang-DQl3Ouxv.js";import"./index-DVwIKmiX.js";import"./index.vue_vue_type_script_setup_true_lang-CDd49swx.js";import"./index-Dg8m97qn.js";import"./shops-fXVW_gE8.js";import"./useCurrentInstance-BLlvmEjv.js";import"./tools-BfzgO_2s.js";import"./validator-B8pIxTAL.js";import"./dist-PezRi_EG.js";import"./index-D43NcXdt.js";const oe={class:"flex"},ie={class:"transaction-card"},de={class:"card-item"},le={class:"card-item-value"},re={class:"card-item"},pe={class:"card-item-value"},ue={class:"card-item"},me={class:"card-item-value"},ce={class:"card-item"},ve={class:"card-item-value"},_e={class:"transaction-card"},fe={class:"card-item"},ye={class:"card-item-value"},ge={class:"card-item"},be={class:"card-item-value"},Ne={class:"card-item"},Ie={class:"card-item-value"},Te={class:"card-item"},xe={class:"card-item-value"},Re={class:"card-item"},Ee={class:"card-item-value"},he={class:"card-item"},Ce={class:"card-item-value"},Le={class:"transaction-card"},Pe={class:"card-item"},Se={class:"card-item-value"},we={class:"card-item"},Ae={class:"card-item-value"},Oe={class:"shap"},ke={id:"overViewChart"},De={class:"block"},Ve={class:"box"},Be={class:"block"},Ue={class:"box"},$e={class:"block"},Me={class:"box"},Ye={class:"leftTopTips"},Fe={class:"leftBottomTips"},je={class:"rightTips"},Ge=A({__name:"generalize",props:{dateType:{type:Object,default:()=>({recent:"LAST_SEVEN",month:""})}},setup(T){const v=T,i=R({}),{loading:u,setLoading:_}=ee(),m=x({searchType:v.dateType.recent});async function y(){_(!0);const p=await J(m);p.data.success&&(i.value=p.data.result),_(!1)}return O(()=>{y()}),G(()=>v.dateType,p=>{if(m.searchType=p.recent,p.month){const s=p.month.split("-")[1];m.month=s.startsWith("0")?s.substr(1):s,m.year=p.month.split("-")[0]}m.storeId=p.storeId?p.storeId:"",y()},{deep:!0,immediate:!0}),(p,s)=>{const L=N("a-spin");return f(),I("div",oe,[c(L,{style:{display:"block",width:"75%"},loading:n(u)},{default:r(()=>[t("div",null,[t("div",null,[s[4]||(s[4]=t("div",{class:"title"}," 转换 ",-1)),t("div",ie,[t("div",de,[s[0]||(s[0]=t("div",{class:"card-item-label"}," 访客数UV ",-1)),t("div",le,d(n(i).uvNum||0),1)]),t("div",re,[s[1]||(s[1]=t("div",{class:"card-item-label"}," 下单转化率 ",-1)),t("div",pe,d(n(i).orderConversionRate||0),1)]),t("div",ue,[s[2]||(s[2]=t("div",{class:"card-item-label"}," 付款转化率 ",-1)),t("div",me,d(n(i).paymentsConversionRate||0),1)]),t("div",ce,[s[3]||(s[3]=t("div",{class:"card-item-label"}," 全店转化率 ",-1)),t("div",ve,d(n(i).overallConversionRate||0),1)])])]),t("div",null,[s[11]||(s[11]=t("div",{class:"title"}," 订单 ",-1)),t("div",_e,[t("div",fe,[s[5]||(s[5]=t("div",{class:"card-item-label"}," 下单笔数 ",-1)),t("div",ye,d(n(i).orderNum||0),1)]),t("div",ge,[s[6]||(s[6]=t("div",{class:"card-item-label"}," 下单人数 ",-1)),t("div",be,d(n(i).orderMemberNum||0),1)]),t("div",Ne,[s[7]||(s[7]=t("div",{class:"card-item-label"}," 下单金额 ",-1)),t("div",Ie,d(n(i).orderAmount||0),1)]),t("div",Te,[s[8]||(s[8]=t("div",{class:"card-item-label"}," 付款笔数 ",-1)),t("div",xe,d(n(i).paymentOrderNum||0),1)]),t("div",Re,[s[9]||(s[9]=t("div",{class:"card-item-label"}," 付款人数 ",-1)),t("div",Ee,d(n(i).paymentsNum||0),1)]),t("div",he,[s[10]||(s[10]=t("div",{class:"card-item-label"}," 付款金额 ",-1)),t("div",Ce,d(n(i).paymentAmount||0),1)])])]),t("div",null,[s[14]||(s[14]=t("div",{class:"title"}," 退单 ",-1)),t("div",Le,[t("div",Pe,[s[12]||(s[12]=t("div",{class:"card-item-label"}," 退单笔数 ",-1)),t("div",Se,d(n(i).refundOrderNum||0),1)]),t("div",we,[s[13]||(s[13]=t("div",{class:"card-item-label"}," 退单金额 ",-1)),t("div",Ae,d(n(i).refundOrderPrice||0),1)])])])])]),_:1},8,["loading"]),t("div",Oe,[t("div",ke,[t("div",De,[t("div",Ve,[s[15]||(s[15]=t("span",null,"访客数",-1)),t("span",null,d(n(i).uvNum||0),1)])]),t("div",Be,[t("div",Ue,[s[16]||(s[16]=t("span",null,"下单笔数",-1)),t("span",null,d(n(i).orderNum||0),1)])]),t("div",$e,[t("div",Me,[s[17]||(s[17]=t("span",null,"付款笔数",-1)),t("span",null,d(n(i).paymentOrderNum||0),1)])]),s[21]||(s[21]=t("div",{class:"rightBorder"},null,-1)),s[22]||(s[22]=t("div",{class:"leftTopBorder"},null,-1)),s[23]||(s[23]=t("div",{class:"leftBottomBorder"},null,-1)),t("div",Ye,[s[18]||(s[18]=t("div",null,"下单转化率",-1)),t("div",null,d(n(i).orderConversionRate||"0%"),1)]),t("div",Fe,[s[19]||(s[19]=t("div",null,"付款转化率",-1)),t("div",null,d(n(i).paymentsConversionRate||"0%"),1)]),t("div",je,[s[20]||(s[20]=t("div",null,"整体转换率",-1)),t("div",null,d(n(i).overallConversionRate||"0%"),1)])])])])}}}),qe=k(Ge,[["__scopeId","data-v-601b17fe"]]),Y={UNDELIVERED:"待发货",UNPAID:"未付款",PAID:"已付款",DELIVERED:"已发货",CANCELLED:"已取消",COMPLETED:"已完成",TAKE:"待核验",STAY_PICKED_UP:"待自提"},ze={UNPAID:"未付款",PAID:"已付款"},Ke={ONLINE:"在线支付",ALIPAY:"支付宝",BANK_TRANSFER:"银行卡"},F={CANCEL:"取消",RETURN_GOODS:"退货",EXCHANGE_GOODS:"换货",RETURN_MONEY:"退款"},j={APPLY:"申请售后",PASS:"通过售后",REFUSE:"已拒绝",RETURN_MONEY:"拒绝售后",BUYER_RETURN:"等待卖家收货",SELLER_CONFIRM:"卖家确认收货",SELLER_TERMINATION:"卖家终止售后",BUYER_CANCEL:"买家取消售后",WAIT_REFUND:"等待平台退款",COMPLETE:"完成售后"},We={style:{height:"100%"}},He=A({__name:"list",props:{dateType:{type:Object,default:()=>({recent:"LAST_SEVEN",month:""})}},setup(T){const v=T,i=te(),u=R(1),_=x({searchType:v.dateType.recent}),m=x({columnsTableList:[],refundColumnsList:[]}),y=R(),p=[{title:"商家名称",dataIndex:"storeName"},{title:"用户昵称",dataIndex:"nickname"},{title:"订单状态",dataIndex:"orderStatus",slotName:"orderStatus"},{title:"创建时间",dataIndex:"createTime"},{title:"支付时间",dataIndex:"paymentTime"},{title:"价格",dataIndex:"flowPrice",slotName:"flowPrice"},{title:"操作",slotName:"options"}],s=[{title:"商品图片",dataIndex:"goodsImage",slotName:"goodsImage"},{title:"商品名称",dataIndex:"goodsName",slotName:"goodsName"},{title:"商家名称",dataIndex:"storeName"},{title:"售后单类型",dataIndex:"serviceType",slotName:"serviceType"},{title:"售后单状态",dataIndex:"serviceStatus",slotName:"serviceStatus"},{title:"退款时间",dataIndex:"refundTime"},{title:"申请退款金额",dataIndex:"applyRefundPrice",slotName:"applyRefundPrice"},{title:"申请原因",dataIndex:"reason"},{title:"实际金额",dataIndex:"flowPrice",slotName:"flowPrice"},{title:"操作",slotName:"options"}],L=x({title:"",width:80,slotName:"extra",expandedRowRender:a=>e("div",{style:{color:"",border:""},class:"my-expandable",id:""},[e("div",[e("div",{class:"title"},"订单详情"),e("div",{class:"order-detail"},[e("p",[e("span","订单来源"),e("span",a.clientType)]),e("p",[e("span","订单状态"),e("span",Y[a.orderStatus])]),e("p",[e("span","付款状态"),e("span",ze[a.payStatus])]),e("p",[e("span","支付时间"),e("span",a.paymentTime)]),e("p",[e("span","支付方式"),e("span",Ke[a.paymentMethod])]),e("p",[e("span","用户名"),e("span",a.memberName)]),e("p",[e("span","店铺名称"),e("span",a.storeName)]),e("p",[e("span","创建时间"),e("span",a.createTime)])]),e("div",{class:"title"},"商品详情"),a.orderItems.map(o=>e("div",{class:"goods-detail"},[e("img",{src:o.image,alt:o.name,title:o.name}),e("div",[e("p",o.name),e("p",`数量: x${o.num}`),e("p",`单价: ${g(o.goodsPrice,"￥")}`),e("p",`总价: ${g(o.goodsPrice*o.num,"￥")}`)])])),e("div",{class:"flow-price"},[e("span","总价格"),e("span",g(a.flowPrice,"￥"))])])])}),q=x({title:"",width:80,slotName:"extra",expandedRowRender:a=>e("div",{style:{color:"",border:""},class:"my-expandable",id:""},[e("div",[e("div",{class:"title"},"售后详情"),e("div",{class:"order-detail"},[e("p",[e("span","售后类型"),e("span",F[a.serviceType])]),e("p",[e("span","售后单状态"),e("span",j[a.serviceStatus])]),e("p",[e("span","退款时间"),e("span",a.refundTime)]),e("p",[e("span","申请退款金额"),e("span",g(a.applyRefundPrice,"￥"))]),e("p",[e("span","商家备注"),e("span",a.auditRemark)]),e("p",[e("span","申请原因"),e("span",a.reason)]),e("p",[e("span","用户名"),e("span",a.memberName)]),e("p",[e("span","店铺名称"),e("span",a.storeName)]),e("p",[e("span","创建时间"),e("span",a.createTime)])]),e("div",{class:"title"},"商品详情"),a.afterSaleItemArray.map(o=>e("div",{class:"goods-detail"},[e("img",{src:o.goodsImage,alt:o.goodsName,title:o.goodsName}),e("div",[e("p",o.goodsName),e("p",`数量: x${o.num}`)])])),e("div",{class:"flow-price"},[e("span","实际退款金额"),e("span",g(a.actualRefundPrice,"￥"))])])])});function z(a){i.push({name:"order-detail",query:{id:a.sn}})}function K(a){i.push({name:"after-order-detail",query:{id:a.sn}})}async function E(){const a=await Q(_);a.data.success&&(m.columnsTableList=a.data.result.records,y.value=a.data.result)}async function h(){const a=await Z(_);a.data.success&&(m.refundColumnsList=a.data.result.records,y.value=a.data.result)}function D(a){_.pageNumber=a,u.value===1?E():h()}function W(){u.value===1?E():h()}return O(()=>{E(),h()}),G(()=>v.dateType,a=>{if(_.searchType=a.recent,a.month){const o=a.month.split("-")[1];_.month=o.startsWith("0")?o.substr(1):o,_.year=a.month.split("-")[0]}_.storeId=a.storeId?a.storeId:"",E(),h()},{deep:!0,immediate:!0}),(a,o)=>{const V=N("a-radio"),H=N("a-radio-group"),B=N("a-button"),U=N("a-table"),X=N("a-image");return f(),I("div",We,[c(H,{modelValue:n(u),"onUpdate:modelValue":o[0]||(o[0]=l=>se(u)?u.value=l:null),type:"button",style:{"margin-bottom":"10px"},onChange:W},{default:r(()=>[c(V,{value:1},{default:r(()=>o[1]||(o[1]=[C(" 订单 ")])),_:1}),c(V,{value:0},{default:r(()=>o[2]||(o[2]=[C(" 退单 ")])),_:1})]),_:1},8,["modelValue"]),n(m).columnsTableList.length&&n(u)===1?(f(),S(U,{key:0,stripe:"",columns:p,data:n(m).columnsTableList,expandable:n(L),"row-key":"sn",pagination:n(y),onPageChange:D},{orderStatus:r(({record:l})=>[t("div",null,d(n(Y)[l.orderStatus]),1)]),flowPrice:r(({record:l})=>[t("div",null,d(n(g)(l.flowPrice,"￥")),1)]),options:r(({record:l})=>[c(B,{type:"text",onClick:b=>z(l)},{default:r(()=>o[3]||(o[3]=[C(" 查看 ")])),_:2},1032,["onClick"])]),_:1},8,["data","expandable","pagination"])):w("",!0),n(m).refundColumnsList.length&&n(u)===0?(f(),S(U,{key:1,stripe:"",columns:s,data:n(m).refundColumnsList,expandable:n(q),"row-key":"sn",pagination:n(y),onPageChange:D},{goodsImage:r(({record:l})=>[(f(!0),I($,null,M(l.afterSaleItemArray,b=>(f(),I("div",{key:b.goodsId,style:{"margin-bottom":"10px"}},[c(X,{width:"60",src:b.goodsImage},null,8,["src"])]))),128))]),goodsName:r(({record:l})=>[(f(!0),I($,null,M(l.afterSaleItemArray,b=>(f(),I("div",{key:b.goodsId,style:{"margin-bottom":"10px"}},[t("div",null,d(b.goodsName),1)]))),128))]),serviceType:r(({record:l})=>[t("div",null,d(n(F)[l.serviceType]),1)]),serviceStatus:r(({record:l})=>[t("div",null,d(n(j)[l.serviceStatus]),1)]),applyRefundPrice:r(({record:l})=>[t("div",null,d(n(g)(l.applyRefundPrice,"￥")),1)]),flowPrice:r(({record:l})=>[t("div",null,d(n(g)(l.actualRefundPrice,"￥")),1)]),options:r(({record:l})=>[c(B,{type:"text",onClick:b=>K(l)},{default:r(()=>o[4]||(o[4]=[C(" 查看 ")])),_:2},1032,["onClick"])]),_:1},8,["data","expandable","pagination"])):w("",!0)])}}}),Xe=k(He,[["__scopeId","data-v-02cc041b"]]),Je={class:"order-chart"},Qe=A({__name:"order",props:{isInline:{type:Boolean,default:!1}},setup(T){const v=T,i=R(!1);O(()=>{i.value=!0});const u=R({month:"",recent:"LAST_SEVEN"});function _(m){u.value=m,i.value=!1,setTimeout(()=>{i.value=!0},100)}return(m,y)=>{const p=N("a-card");return f(),I("div",Je,[c(p,{title:"订单统计",hoverable:"",bordered:!v.isInline,style:P({width:"100%",marginBottom:v.isInline?"0px":"20px"})},{default:r(()=>[c(ne,{"date-type":n(u),"is-store-screen":!0,onOnChange:_},null,8,["date-type"])]),_:1},8,["bordered","style"]),c(p,{hoverable:"",title:"交易概况",bordered:!v.isInline},{default:r(()=>[c(qe,{"date-type":n(u)},null,8,["date-type"])]),_:1},8,["bordered"]),c(p,{hoverable:"",title:"交易趋势",bordered:!v.isInline,style:P({width:"100%",marginTop:v.isInline?"0px":"20px"})},{default:r(()=>[n(i)?(f(),S(ae,{key:0,"h-500px":"","date-type":n(u)},null,8,["date-type"])):w("",!0)]),_:1},8,["bordered","style"]),c(p,{hoverable:"",title:"订退单统计",bordered:!v.isInline,style:P({width:"100%",marginTop:v.isInline?"0px":"20px"})},{default:r(()=>[c(Xe,{"date-type":n(u)},null,8,["date-type"])]),_:1},8,["bordered","style"])])}}}),vt=k(Qe,[["__scopeId","data-v-80456702"]]);export{vt as default};
