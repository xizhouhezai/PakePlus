import{l as T,m as k,d as V,h as q,r as a,a as x,b as m,o as E,j as G,w as n,e as l,u as o,f as j,k as C,t as I,q as L}from"./index-C4AMdMz2.js";import{U as $}from"./dist-PezRi_EG.js";function A(s={}){return T({url:"/user/contribute/page",method:k.GET,needToken:!0,params:s})}function F(s={}){return T({url:"/user/contributerecord/page",method:k.GET,needToken:!0,params:s})}const O=V({__name:"index",setup(s){q(()=>{b()});const i=a({id:null,nickName:null,mobile:null,pageNumber:1,pageSize:10}),r=x({current:1,total:0,pageSize:10}),g=a([]);async function b(){const e=await A({...i.value});e.data.success&&(g.value=e.data.result.records,r.total=e.data.result.total)}async function y(e){i.value.pageNumber=e,r.current=e,b()}const w=[{label:"会员ID",model:"id",disabled:!1,input:!0},{label:"会员昵称",model:"nickName",disabled:!1,input:!0},{label:"联系方式",model:"mobile",disabled:!1,input:!0}];function f(e){i.value={...i.value,pageNumber:1,...e},r.current=1,b()}const D=[{title:"会员ID",dataIndex:"userId",width:200},{title:"会员昵称",dataIndex:"nickName",width:200},{title:"联系方式",dataIndex:"mobile",width:150},{title:"贡献度",dataIndex:"contribute"},{title:"贡献度占比",slotName:"contributeRatio"},{title:"操作",slotName:"action"}],u=a(!1),P=[{title:"贡献度类型",dataIndex:"contibuteTypeStr"},{title:"贡献度",dataIndex:"contribute"},{title:"下单时间",slotName:"orderTime"}],d=x({current:1,total:0,pageSize:10}),p=a(1),_=a([]),v=a(null);async function h(){const e=await F({pageNumber:p.value,pageSize:10,userId:v.value});e.data.success&&(_.value=e.data.result.records,d.total=e.data.result.total)}async function S(e){v.value=e,await h(),u.value=!0}async function M(e){p.value=e,d.current=e,h()}function R(){d.current=1,p.value=1}return(e,c)=>{const z=m("a-button"),N=m("a-table"),U=m("a-modal"),B=m("a-card");return E(),G(B,{class:"general-card",title:"贡献度",bordered:!1},{default:n(()=>[l(o($),{columns:w,onReset:f,onSearch:f}),l(N,{columns:D,data:o(g),pagination:o(r),onPageChange:y},{action:n(({record:t})=>[l(z,{type:"text",style:{padding:"0"},onClick:H=>S(t.userId)},{default:n(()=>c[1]||(c[1]=[j(" 查看明细 ")])),_:2},1032,["onClick"])]),contributeRatio:n(({record:t})=>[C("span",null,I(t.contributeRatio)+"%",1)]),_:1},8,["data","pagination"]),l(U,{visible:o(u),"onUpdate:visible":c[0]||(c[0]=t=>L(u)?u.value=t:null),title:"贡献度明细",width:1e3,footer:!1,"body-style":{height:"548px"},onClose:R},{default:n(()=>[l(N,{columns:P,data:o(_),pagination:o(d),onPageChange:M},{orderTime:n(({record:t})=>[C("span",null,I(t.orderTime||"--"),1)]),_:1},8,["data","pagination"])]),_:1},8,["visible"])]),_:1})}}});export{O as default};
