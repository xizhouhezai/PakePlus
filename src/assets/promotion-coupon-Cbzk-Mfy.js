import{_ as z}from"./list.vue_vue_type_script_setup_true_lang-CIIU8Ocj.js";import{d as A,r as V,n as L,E as O,b as r,v as G,o as s,c as i,j as f,w as n,f as d,s as p,e as a,k as l,t as $,u as y,F as j,i as N,x as H,q as J,A as K,_ as M}from"./index-C4AMdMz2.js";import{d as P}from"./vuedraggable.umd-Ck4RHsgF.js";import"./promotion-ChRoyrm_.js";import"./useCurrentInstance-BLlvmEjv.js";import"./tools-BfzgO_2s.js";import"./dist-PezRi_EG.js";const Q={key:2,"bg-gray-100":"","p-16px":""},W={flex:"","flex-a-c":""},X={"ml-10px":""},Y=["onClick"],Z={key:1,"mt-10px":"","text-12px":"","color-red-6":""},ee={key:0},te=A({__name:"promotion-coupon",props:{res:null},setup(S){const o=S,m=V(!1),g={yellow:"#ffe9b7",red:"#e74c2c",white:"#fff",black:"#000",green:"#e0f4e4"},k=V(!1),U=L();O(()=>o.res.data.fetchCoupon,u=>{u==="auto"&&(o.res.data.list=[])},{deep:!0});function b(u){if(u==="jump"){const e=U.resolve({path:"/coupon"});window.open(e.href,"_blank")}else m.value=!0}function B(u){o.res.data.list.push(...u)}function T(u){o.res.data.list.splice(u,1)}return(u,e)=>{var C;const w=r("a-alert"),D=r("a-link"),_=r("a-radio"),v=r("a-radio-group"),x=r("a-space"),E=r("icon-list"),h=r("icon-close"),F=r("icon-plus"),I=r("a-button"),R=r("a-modal"),q=G("auto-animate");return s(),i("div",null,[o.res.data.fetchCoupon==="custom"?(s(),f(w,{key:0,title:"提示",type:"warning"},{default:n(()=>e[8]||(e[8]=[d(" 手动进行优惠券的添加，自动隐藏已抢完及失效的券 ")])),_:1})):p("",!0),o.res.data.fetchCoupon==="auto"?(s(),f(w,{key:1,title:"提示",type:"warning"},{default:n(()=>[e[10]||(e[10]=d(' 系统自动获取"已开始"活动的所有优惠券，自动隐藏已抢完及失效的券 ')),a(D,{onClick:e[0]||(e[0]=t=>b("jump"))},{default:n(()=>e[9]||(e[9]=[d(" 管理优惠券 ")])),_:1})]),_:1})):p("",!0),a(x,{"py-22px":""},{default:n(()=>[e[12]||(e[12]=l("div",{"w-90px":""}," 添加优惠券 ",-1)),l("div",null,[a(v,{modelValue:o.res.data.fetchCoupon,"onUpdate:modelValue":e[1]||(e[1]=t=>o.res.data.fetchCoupon=t)},{default:n(()=>[a(_,{value:"auto"},{default:n(()=>e[11]||(e[11]=[d(" 自动获取 ")])),_:1})]),_:1},8,["modelValue"])])]),_:1}),o.res.data.fetchCoupon==="custom"?(s(),i("div",Q,[(C=o.res.data.list)!=null&&C.length?(s(),f(y(P),{key:0,list:o.res.data.list,class:"list-group","ghost-class":"ghost","item-key":"id",onStart:e[2]||(e[2]=t=>k.value=!0),onEnd:e[3]||(e[3]=t=>k.value=!1)},{item:n(({element:t,index:c})=>[(s(),i("div",{key:c,"mb-10px":"",flex:"","cursor-pointer":"","flex-j-sb":"","flex-a-c":"","bg-white":"","px-16px":"","py-12px":"",shadow:""},[l("div",W,[l("div",null,[a(E,{"color-warm-gray":""})]),l("div",X,$(t.couponName),1)]),l("div",{onClick:oe=>T(c)},[a(h)],8,Y)]))]),_:1},8,["list"])):p("",!0),a(I,{type:"outline",long:"","bg-white":"",onClick:e[4]||(e[4]=t=>b("open"))},{icon:n(()=>[a(F)]),default:n(()=>[e[13]||(e[13]=d(" 添加优惠券 "))]),_:1}),o.res.data.list.length?p("",!0):(s(),i("div",Z," 请选择优惠券 "))])):p("",!0),a(x,{"py-22px":""},{default:n(()=>[e[14]||(e[14]=l("div",{"w-90px":""}," 卡片样式 ",-1)),l("div",null,[a(v,{modelValue:o.res.data.styles,"onUpdate:modelValue":e[5]||(e[5]=t=>o.res.data.styles=t)},{default:n(()=>[(s(),i(j,null,N(5,t=>a(_,{key:t,"my-4px":"",value:`style-${t}`},{default:n(()=>[d(" 样式"+$(t),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])])]),_:1}),a(x,{"py-22px":""},{default:n(()=>[e[15]||(e[15]=l("div",{"w-90px":""}," 颜色 ",-1)),l("div",null,[a(v,{modelValue:o.res.data.couponTheme,"onUpdate:modelValue":e[6]||(e[6]=t=>o.res.data.couponTheme=t)},{default:n(()=>[(s(!0),i(j,null,N(Object.keys(g),(t,c)=>(s(),f(_,{key:c,"my-4px":"",value:t},{default:n(()=>[l("div",{class:"border","h-25px":"","w-25px":"","border-rounded-100px":"",style:K({background:g[t]})},null,4)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),H((s(),f(R,{visible:y(m),"onUpdate:visible":e[7]||(e[7]=t=>J(m)?m.value=t:null),title:"选择优惠券",width:"800px"},{default:n(()=>[y(m)?(s(),i("div",ee,[a(z,{class:"coupon-box",onSelectTableChange:B})])):p("",!0)]),_:1},8,["visible"])),[[q]])])}}}),de=M(te,[["__scopeId","data-v-599ba0c9"]]);export{de as default};
