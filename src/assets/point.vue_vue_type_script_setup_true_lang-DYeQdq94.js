import{g as E,s as M}from"./operation-CQQGRn8-.js";import{d as P,r as v,h as $,b as u,o as y,c as I,e as t,w as n,f as d,u as a,k as m,F as D,i as F,j as G,t as b,M as g}from"./index-C4AMdMz2.js";const O={style:{"background-color":"#fff"}},R={"text-12px":""},L=P({__name:"point",setup(j){const w=v(),l=v({form:{consumer:0,register:0,signIn:0,comment:0}});function S(s,e){if(!/^-?\d+$/.test(s)){g.error("请输入正整数");return}l.value.pointSettingItems.find(r=>r.day===s)?g.error("签到天数不能重复"):l.value.pointSettingItems[e].day=s}async function V(){const s=await E("POINT_SETTING");l.value=s.data.result}function k(){if(l.value.pointSettingItems.length>=4)return g.error("最多设置4项签到设置"),!1;l.value.pointSettingItems.push({points:"0",day:l.value.pointSettingItems.length})}function x(s){l.value.pointSettingItems.splice(s,1)}async function C(){(await M("POINT_SETTING",l.value)).data.success&&(g.success("设置成功!"),V())}return $(()=>{V()}),(s,e)=>{const c=u("a-divider"),i=u("a-input-number"),r=u("a-form-item"),_=u("a-button"),T=u("a-space"),N=u("a-col"),U=u("a-row"),B=u("a-form");return y(),I("div",O,[t(B,{ref_key:"formRef",ref:w,style:{padding:"30px"},model:a(l),layout:"horizontal","auto-label-width":""},{default:n(()=>[t(c,{orientation:"left"},{default:n(()=>e[4]||(e[4]=[d(" 积分设置 ")])),_:1}),t(U,{gutter:24},{default:n(()=>[t(N,{span:12},{default:n(()=>[t(r,{field:"consumer",label:"消费1元赠送积分","validate-trigger":["change"]},{default:n(()=>[t(i,{modelValue:a(l).consumer,"onUpdate:modelValue":e[0]||(e[0]=o=>a(l).consumer=o),"allow-clear":""},{append:n(()=>e[5]||(e[5]=[m("span",null,"积分",-1)])),_:1},8,["modelValue"])]),_:1}),t(r,{field:"register",label:"注册账号","validate-trigger":["change"]},{default:n(()=>[t(i,{modelValue:a(l).register,"onUpdate:modelValue":e[1]||(e[1]=o=>a(l).register=o),"allow-clear":""},{append:n(()=>e[6]||(e[6]=[m("span",null,"积分",-1)])),_:1},8,["modelValue"])]),_:1}),t(r,{field:"signIn",label:"每日签到积分","validate-trigger":["change"]},{default:n(()=>[t(i,{modelValue:a(l).signIn,"onUpdate:modelValue":e[2]||(e[2]=o=>a(l).signIn=o),"allow-clear":""},{append:n(()=>e[7]||(e[7]=[m("span",null,"积分",-1)])),_:1},8,["modelValue"])]),_:1}),t(r,{field:"comment",label:"订单评价赠送积分","validate-trigger":["change"]},{default:n(()=>[t(i,{modelValue:a(l).comment,"onUpdate:modelValue":e[3]||(e[3]=o=>a(l).comment=o),"allow-clear":""},{append:n(()=>e[8]||(e[8]=[m("span",null,"积分",-1)])),_:1},8,["modelValue"])]),_:1}),(y(!0),I(D,null,F(a(l).pointSettingItems,(o,p)=>(y(),G(r,{key:p,label:`签到设置${p+1}`},{default:n(()=>[t(T,null,{default:n(()=>[t(i,{"w-100px":"",min:1,max:99999,"model-value":o.day,onChange:f=>S(f,p)},null,8,["model-value","onChange"]),t(i,{modelValue:o.points,"onUpdate:modelValue":f=>o.points=f,"w-100px":"",min:0,max:99999},null,8,["modelValue","onUpdate:modelValue"]),t(_,{ghost:"",type:"primary",onClick:f=>x(p)},{default:n(()=>e[9]||(e[9]=[d(" 删除 ")])),_:2},1032,["onClick"]),m("span",R,[e[10]||(e[10]=d("签到")),m("span",null,b(o.day),1),e[11]||(e[11]=d("天，赠送")),m("span",null,b(o.points),1),e[12]||(e[12]=d("积分"))])]),_:2},1024)]),_:2},1032,["label"]))),128)),t(r,{label:"操作"},{default:n(()=>[t(_,{type:"primary",onClick:k},{default:n(()=>e[13]||(e[13]=[d(" 添加 ")])),_:1})]),_:1}),t(r,null,{default:n(()=>[t(_,{type:"primary",onClick:C},{default:n(()=>e[14]||(e[14]=[d(" 保存 ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])}}});export{L as _};
