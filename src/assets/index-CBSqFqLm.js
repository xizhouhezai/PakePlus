import{m as F,d as L,a as O,u as $}from"./member-B0DkAxtf.js";import{u as j}from"./useCurrentInstance-BLlvmEjv.js";import{i as q}from"./tools-BfzgO_2s.js";import{U as z,V as A}from"./dist-PezRi_EG.js";import{d as G,r as y,a as H,b as c,o as l,j as g,w as d,e as m,u as e,f as u,q as J,t as i,k as a,c as _,F as k,i as N,s as f,M as w,_ as K}from"./index-C4AMdMz2.js";const Q={class:"info-list",style:{overflow:"hidden",display:"flex","padding-bottom":"20px"}},W={class:"left-container"},X={class:"right-container"},Y={class:"border-b",style:{"margin-top":"0"}},Z={class:"border-b"},ee={class:"div-height"},te={class:"div-height"},ae={class:"border-b",style:{display:"flex","align-items":"flex-start"}},se={class:"content"},oe=["src"],le={style:{"margin-left":"20px"}},de={style:{color:"#aaaaaa",margin:"8px 0"}},ie={class:"score-content"},ne={key:0,class:""},re={style:{"margin-left":"40px"}},ce={key:1,class:"border-b",style:{"border-bottom":"none"}},me={style:{"margin-left":"60px"}},ue={key:0},pe={style:{"margin-left":"60px"}},ge=G({__name:"index",setup(_e){var x;const p=y({}),v=y(!1),b=y(),s=H({data:{memberName:"",goodsImage:"",goodsName:"",storeName:"",orderNo:"",deliveryScore:"",serviceScore:"",descriptionScore:"",content:"",haveImage:"",images:"",reply:"",haveReplyImage:"",replyImage:"",memberProfile:"",status:"",id:""}}),S=(x=j().globalProperties)==null?void 0:x.$modal,V=[{label:"会员Id",model:"memberId",disabled:!1,input:!0},{label:"会员昵称",model:"memberName",disabled:!1,input:!0}],C=[{title:"商品名称",dataIndex:"goodsName"},{title:"会员Id",dataIndex:"memberId"},{title:"会员昵称",dataIndex:"memberName",member:!0},{title:"评价",dataIndex:"grade",slot:!0,slotData:{tag:q}},{title:"物流评分",dataIndex:"deliveryScore"},{title:"服务评分",dataIndex:"deliveryScore"},{title:"评价时间",dataIndex:"createTime"},{title:"页面展示",dataIndex:"status",slot:!0,slotTemplate:"shopDisable"},{title:"商家回复",dataIndex:"replyStatus",slot:!0,slotTemplate:"replyStatus"}],R={title:"操作",width:300,fixed:"right",methods:[{title:"查看",callback:"info",type:"text",status:"success"},{title:"删除",callback:"delete",type:"text",status:"danger"}]};function D(n){S.confirm({title:"确认删除",content:`您确认要删除会员${n.record.memberName}的评论`,alignCenter:!1,onOk:async()=>{(await L(n.record.id)).data.success&&(w.success("删除成功"),b.value.init())}})}function M(n){v.value=!0,O(n.record.id).then(t=>{t.data.code===200&&(s.data=t.data.result)})}function P(n){$(n.id,{status:n.status}).then(t=>{t.data.code===200&&(w.success("修改成功"),b.value.init())})}return(n,t)=>{const T=c("a-switch"),I=c("a-tag"),h=c("a-image"),U=c("a-avatar"),B=c("a-modal"),E=c("a-card");return l(),g(E,{class:"general-card",title:"会员评价",bordered:!1},{default:d(()=>[m(e(z),{columns:V,onReset:t[0]||(t[0]=o=>{p.value={...e(p),...o}}),onSearch:t[1]||(t[1]=o=>{p.value={...e(p),...o}})}),m(e(A),{columns:C,methods:R,api:e(F),"api-params":e(p),bordered:!0,onDelete:D,onInfo:M},{shopDisable:d(({data:o})=>[m(T,{modelValue:o.status,"onUpdate:modelValue":r=>o.status=r,"checked-value":"OPEN","unchecked-value":"CLOSE",onChange:r=>P(o)},{checked:d(()=>t[3]||(t[3]=[u(" 展示 ")])),unchecked:d(()=>t[4]||(t[4]=[u(" 隐藏 ")])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),replyStatus:d(({data:o})=>[o.replyStatus?(l(),g(I,{key:1,type:"danger",color:"blue"},{default:d(()=>t[6]||(t[6]=[u(" 已回复 ")])),_:1})):(l(),g(I,{key:0,type:"primary"},{default:d(()=>t[5]||(t[5]=[u(" 未回复 ")])),_:1}))]),_:1},8,["api","api-params"]),m(B,{visible:e(v),"onUpdate:visible":t[2]||(t[2]=o=>J(v)?v.value=o:null),"align-center":!1,footer:!1,width:"800px"},{title:d(()=>[u(i(e(s).data.memberName)+"的评价详情 ",1)]),default:d(()=>[a("div",Q,[a("div",W,[a("div",null,[m(h,{class:"img",width:"140px",height:"140px",src:e(s).data.goodsImage},null,8,["src"])])]),a("div",X,[a("div",Y,i(e(s).data.goodsName),1),a("div",Z,[a("div",ee," 店铺名称："+i(e(s).data.storeName),1),a("div",te," 订单号："+i(e(s).data.orderNo),1),a("div",ae,[a("div",se,[m(U,null,{default:d(()=>[a("img",{src:e(s).data.memberProfile,alt:""},null,8,oe)]),_:1})]),a("div",le,[a("div",null,i(e(s).data.memberName),1),a("div",de,i(e(s).data.content),1)])]),a("div",ie,[a("span",null,"物流评分："+i(e(s).data.deliveryScore),1),a("span",null,"服务评分："+i(e(s).data.serviceScore),1),a("span",null,"描述评分："+i(e(s).data.descriptionScore),1)]),e(s).data.haveImage?(l(),_("div",ne,[t[7]||(t[7]=u(" 评价图 ")),a("div",re,[e(s).data.images&&e(s).data.images.length?(l(!0),_(k,{key:0},N(e(s).data.images.split(","),(o,r)=>(l(),g(h,{key:r,width:"100px",height:"100px",src:o,alt:""},null,8,["src"]))),128)):f("",!0)])])):f("",!0),e(s).data.reply?(l(),_("div",ce,[a("div",null,[a("div",null,[t[8]||(t[8]=a("div",{style:{float:"left"}}," 商家回复： ",-1)),a("div",me,i(e(s).data.reply),1)]),e(s).data.replyImage?(l(),_("div",ue,[a("div",pe,[e(s).data.replyImage&&e(s).data.replyImage.length?(l(!0),_(k,{key:0},N(e(s).data.replyImage.split(","),(o,r)=>(l(),g(h,{key:r,width:"100px",height:"100px",src:o,alt:""},null,8,["src"]))),128)):f("",!0)])])):f("",!0)])])):f("",!0)])])])]),_:1},8,["visible"])]),_:1})}}}),xe=K(ge,[["__scopeId","data-v-91e2c16f"]]);export{xe as default};
