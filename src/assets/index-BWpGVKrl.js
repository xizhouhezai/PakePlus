import{d as L,r,b as c,o as n,j as S,w as p,e as u,u as e,k as y,f,C as k,t as b,s as U,c as m,q as B}from"./index-C4AMdMz2.js";import{p as M}from"./order-HsmDfkng.js";import{_ as A}from"./index.vue_vue_type_script_setup_true_lang-CDd49swx.js";import{U as F,V as j}from"./dist-PezRi_EG.js";import"./index-Dg8m97qn.js";import"./shops-fXVW_gE8.js";import"./useCurrentInstance-BLlvmEjv.js";import"./tools-BfzgO_2s.js";import"./validator-B8pIxTAL.js";import"./index-D43NcXdt.js";const q={"mb-20px":"",flex:""},D={"mr-40px":""},G={key:0},$={key:1},z={key:2},H={key:3},se=L({__name:"index",setup(J){const T=r(""),s=r({refundStatus:T.value}),x=r(),I=[{label:"订单编号",model:"orderSn",disabled:!1,input:!0},{label:"流水编号",model:"orderFlowSn",disabled:!1,input:!0},{label:"起始时间",disabled:!1,datePicker:{type:"range"}}],w=[{title:"订单编号",dataIndex:"orderSn",width:280},{title:"流水编号",dataIndex:"orderFlowSn",width:280},{title:"操作人",dataIndex:"operatorName",width:120},{title:"操作人类型",dataIndex:"operatorType",slot:!0,slotTemplate:"operatorType",width:120},{title:"日志",dataIndex:"message",width:400},{title:"操作时间",dataIndex:"createTime",width:200}],_=r(""),l=r({}),v=r({}),i=r(!1),d=r("STORE"),R=r([]);function N(t,o){t.stopPropagation(),i.value=!0,_.value.init(),d.value=o}function h(t,o){t.stopPropagation(),s.value.storeId=null,l.value={}}function E(t){d.value==="STORE"?(s.value.storeId=t.id,l.value={id:t.id,storeName:t.storeName}):d.value==="SUPPLIER"&&(s.value.supplierId=t.id,v.value={id:t.id,storeName:t.storeName}),i.value=!1}function P(t){s.value.storeId="",s.value.supplierId="",l.value={},v.value={},s.value={...s.value,...t}}return(t,o)=>{const g=c("a-link"),C=c("icon-close"),V=c("a-modal"),O=c("a-card");return n(),S(O,{class:"general-card",title:"审核日志",bordered:!1},{default:p(()=>[u(e(F),{columns:I,onReset:P,onSearch:o[0]||(o[0]=a=>{s.value={...e(s),...a}})}),y("div",q,[y("div",D,[o[4]||(o[4]=f(" 店铺：")),u(g,{onClick:o[1]||(o[1]=k(a=>N(a,"STORE"),["prevent"]))},{default:p(()=>[f(b(e(l)&&e(l).storeName?e(l).storeName:"选择店铺"),1)]),_:1}),e(l)&&e(l).storeName?(n(),S(C,{key:0,"cursor-pointer":"",onClick:o[2]||(o[2]=k(a=>h(a,"STORE"),["prevent"]))})):U("",!0)])]),u(e(j),{ref_key:"tablePageRef",ref:x,columns:w,api:e(M),"api-params":e(s),bordered:!0},{operatorType:p(({data:a})=>[a.operatorType==="MANAGER"?(n(),m("span",G,"管理员")):a.operatorType==="STORE"?(n(),m("span",$,"店铺")):a.operatorType==="SUPPLIER"?(n(),m("span",z,"供应商")):(n(),m("span",H,"系统"))]),_:1},8,["api","api-params"]),u(V,{visible:e(i),"onUpdate:visible":o[3]||(o[3]=a=>B(i)?i.value=a:null),width:"1300px",footer:!1},{title:p(()=>[f(b(e(d)==="STORE"?"店铺":"供应商")+"选择器 ",1)]),default:p(()=>[u(A,{ref_key:"storeLayout",ref:_,"selected-list":e(R),"store-type":e(d),onCallback:E},null,8,["selected-list","store-type"])]),_:1},8,["visible"])]),_:1})}}});export{se as default};
