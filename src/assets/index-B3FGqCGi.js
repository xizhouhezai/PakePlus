import{e as d}from"./statisitics-CehHs8Ha.js";import{C as p}from"./index-DVwIKmiX.js";import{d as l,a as n,h as w,E as C,o as f,c as m,k as N,_}from"./index-C4AMdMz2.js";const E=l({__name:"index",props:{res:{type:Object,default:()=>{}}},setup(c){const s=c,h=n({searchType:"LAST_SEVEN"}),e=n({chartList:[],previewChart:"",uvs:0,pvs:0});function i(){const t=[],a=[];e.chartList.forEach(r=>{t.push({date:r.date,uvNum:r.uvNum,title:"访客数UV",pv:r.uvNum}),a.push({date:r.date,pvNum:r.pvNum,pv:r.pvNum,title:"浏览量PV"})});const u=[...t,...a];e.previewChart.data(u),e.previewChart.scale({activeQuantity:{range:[0,1],nice:!0}}),e.previewChart.tooltip({showCrosshairs:!0,shared:!0}),e.previewChart.line().position("date*pv").color("title").label("pv").shape("smooth"),e.previewChart.point().position("date*pv").color("title").label("pv").shape("circle").style({stroke:"#fff",lineWidth:1}),e.previewChart.area().position("date*pv").color("title").shape("smooth"),e.previewChart.render()}async function o(){s.res?(e.chartList=s.res,s.res.forEach(t=>{e.uvs+=t.uvNum,e.pvs+=t.pvNum}),e.previewChart||(e.previewChart=new p({container:"previewChart",autoFit:!0,height:500,padding:[70,70,70,70]})),i()):v()}async function v(){const t=await d(h);t.data.success&&(e.chartList=t.data.result,t.data.result.forEach(a=>{e.uvs+=a.uvNum,e.pvs+=a.pvNum}),e.previewChart||(e.previewChart=new p({container:"previewChart",autoFit:!0,height:500,padding:[70,70,70,70]}))),i()}return w(()=>{o()}),C(()=>s.res,()=>{o()},{deep:!0,immediate:!0}),(t,a)=>(f(),m("div",null,a[0]||(a[0]=[N("div",{id:"previewChart"},null,-1)])))}}),x=_(E,[["__scopeId","data-v-36905dc5"]]);export{x as p};
