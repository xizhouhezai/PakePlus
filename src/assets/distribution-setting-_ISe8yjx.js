import{d as O,r as _,h as g,b as m,o as B,j as w,w as t,e as l,u as o,f as u,x as U,y as N,M as R}from"./index-C4AMdMz2.js";import{p as L,q as S}from"./promotion-ChRoyrm_.js";import{R as n}from"./validator-B8pIxTAL.js";const M=O({__name:"distribution-setting",setup(P){const a=_({isOpen:"CLOSE",level:"1",mode:"EVERYONE",binding:"NEW",validity:"FOREVER",validityDay:0,secondaryCommission:0,firstCommission:0,selfCommission:"OPEN",updateCommission:"CLOSE"});async function V(){const f=await L();f.data.success&&f.data.result&&(a.value=f.data.result)}async function v(){(await S(a.value)).data.success&&(R.success("设置成功!"),V())}return g(()=>{V()}),(f,e)=>{const C=m("a-divider"),y=m("a-switch"),i=m("a-form-item"),s=m("a-radio"),r=m("a-radio-group"),p=m("a-input-number"),E=m("a-button"),x=m("a-form"),b=m("a-card");return B(),w(b,{class:"general-card",title:"分销设置"},{default:t(()=>[l(x,{style:{padding:"30px"},model:o(a)},{default:t(()=>[l(C,{orientation:"left"},{default:t(()=>e[11]||(e[11]=[u(" 分销设置 ")])),_:1}),l(i,{field:"isOpen",label:"是否开启分销",rules:[o(n)],extra:"开启分销，则全店商品具有分销功能"},{default:t(()=>[l(y,{modelValue:o(a).isOpen,"onUpdate:modelValue":e[0]||(e[0]=d=>o(a).isOpen=d),"checked-value":"OPEN","unchecked-value":"CLOSE"},{checked:t(()=>e[12]||(e[12]=[u(" 开启 ")])),unchecked:t(()=>e[13]||(e[13]=[u(" 关闭 ")])),_:1},8,["modelValue"])]),_:1},8,["rules"]),l(i,{field:"isOpen",label:"分销费用承担方",rules:[o(n)],extra:"选择商家，则商家承担；选择平台，则平台承担；选择商家后需要商家在分销设置中心对分销佣金比例进行配置"},{default:t(()=>[l(r,{modelValue:o(a).commissionModel,"onUpdate:modelValue":e[1]||(e[1]=d=>o(a).commissionModel=d)},{default:t(()=>[l(s,{value:"PLATFORM"},{default:t(()=>e[14]||(e[14]=[u(" 平台 ")])),_:1}),l(s,{value:"SELLER"},{default:t(()=>e[15]||(e[15]=[u(" 商家 ")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"]),l(i,{field:"selfCommission",label:"自购返佣",rules:[o(n)],extra:"开启自购返佣：当前会员为自己的一级分销商，其上级为二级分销商；如果开启自购返佣，购物后没有生成返佣信息是因为没有访问促销模块生成分销身份以提供分佣，需用户前往分销模块进行申请开通；关闭自购返佣：当前会员的上级为一级分销商，上级的上级为二级分销商。"},{default:t(()=>[l(r,{modelValue:o(a).selfCommission,"onUpdate:modelValue":e[2]||(e[2]=d=>o(a).selfCommission=d)},{default:t(()=>[l(s,{value:"OPEN"},{default:t(()=>e[16]||(e[16]=[u(" 开启 ")])),_:1}),l(s,{value:"CLOSE"},{default:t(()=>e[17]||(e[17]=[u(" 关闭 ")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"]),l(i,{field:"updateCommission",label:"更新佣金",rules:[o(n)],extra:"在订单下单后，商家主动变更订单价格，是否同步更新佣金；如果开启更新佣金，则在订单下单后，商家主动变更订单价格，佣金会自动更新；如果关闭更新佣金，则在订单下单后，商家主动变更订单价格，佣金不会自动更新。"},{default:t(()=>[l(r,{modelValue:o(a).updateCommission,"onUpdate:modelValue":e[3]||(e[3]=d=>o(a).updateCommission=d)},{default:t(()=>[l(s,{value:"OPEN"},{default:t(()=>e[18]||(e[18]=[u(" 开启 ")])),_:1}),l(s,{value:"CLOSE"},{default:t(()=>e[19]||(e[19]=[u(" 关闭 ")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"]),l(i,{field:"level",label:"分销层级",rules:[o(n)],extra:"1级分销：A 推广与 B，则 B 成为其下线；B 推广 C，C 成为 B 的下线，C 进行购物，返利给其上级 B，B 进行购物返利给其上级 A；2级分销：A 推广与 B，则 B 成为其下线；B 推广 C，C 成为 B 的下线，C 进行购物，返利给其上级 B（1级佣金比例），给 A 进行返利（2级佣金比例）。"},{default:t(()=>[l(r,{modelValue:o(a).level,"onUpdate:modelValue":e[4]||(e[4]=d=>o(a).level=d)},{default:t(()=>[l(s,{value:"1"},{default:t(()=>e[20]||(e[20]=[u(" 1级分销 ")])),_:1}),l(s,{value:"2"},{default:t(()=>e[21]||(e[21]=[u(" 2级分销 ")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"]),l(i,{field:"mode",label:"分销模式",rules:[o(n)],extra:"指定分销：用户初次访问分销模块，需填写身份证，姓名进行实名认证， 管理端审核通过才可以进行分销；人人分销：用户初次访问分销模块，自动创建分销身份，无需审核。可直接分享推广链接成为其他会员上线。"},{default:t(()=>[l(r,{modelValue:o(a).mode,"onUpdate:modelValue":e[5]||(e[5]=d=>o(a).mode=d)},{default:t(()=>[l(s,{value:"APPOINT"},{default:t(()=>e[22]||(e[22]=[u(" 指定分销 ")])),_:1}),l(s,{value:"EVERYONE"},{default:t(()=>e[23]||(e[23]=[u(" 人人分销 ")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"]),l(i,{field:"binding",label:"分销关系绑定",rules:[o(n)],extra:"所有的用户都可以进行绑定（已绑定的用户无法替换）；在分销绑定模式非永久绑定模式下，有效期过期后，可以进行换绑；新用户：被推广的用户，只有新用户才能进行绑定分销层级。"},{default:t(()=>[l(r,{modelValue:o(a).binding,"onUpdate:modelValue":e[6]||(e[6]=d=>o(a).binding=d)},{default:t(()=>[l(s,{value:"ALL"},{default:t(()=>e[24]||(e[24]=[u(" 所有用户 ")])),_:1}),l(s,{value:"NEW"},{default:t(()=>e[25]||(e[25]=[u(" 新用户 ")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"]),l(i,{field:"validity",label:"分销绑定模式",rules:[o(n)]},{default:t(()=>[l(r,{modelValue:o(a).validity,"onUpdate:modelValue":e[7]||(e[7]=d=>o(a).validity=d)},{default:t(()=>[l(s,{value:"FOREVER"},{default:t(()=>e[26]||(e[26]=[u(" 永久 ")])),_:1}),l(s,{value:"EXP"},{default:t(()=>e[27]||(e[27]=[u(" 有效期 ")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["rules"]),U(l(i,{field:"validityDay",label:"分销关系绑定天数",rules:[o(n)],extra:"绑定天数最多 3650天"},{default:t(()=>[l(p,{modelValue:o(a).validityDay,"onUpdate:modelValue":e[8]||(e[8]=d=>o(a).validityDay=d),style:{width:"100px"},min:0,max:3650},null,8,["modelValue"])]),_:1},8,["rules"]),[[N,o(a).validity==="EXP"]]),l(i,{field:"firstCommission",label:"一级佣金比例",rules:[o(n)],extra:"佣金比例单位为百分之 X，最大为 10%"},{default:t(()=>[l(p,{modelValue:o(a).firstCommission,"onUpdate:modelValue":e[9]||(e[9]=d=>o(a).firstCommission=d),style:{width:"100px"},min:0,max:10},null,8,["modelValue"])]),_:1},8,["rules"]),l(i,{field:"secondaryCommission",label:"二级分佣比例",rules:[o(n)],extra:"佣金比例单位为百分之 X，最大为 10%"},{default:t(()=>[l(p,{modelValue:o(a).secondaryCommission,"onUpdate:modelValue":e[10]||(e[10]=d=>o(a).secondaryCommission=d),style:{width:"100px"},min:0,max:10},null,8,["modelValue"])]),_:1},8,["rules"]),l(E,{style:{width:"120px",margin:"30px 220px"},type:"primary",onClick:v},{default:t(()=>e[28]||(e[28]=[u(" 保存 ")])),_:1})]),_:1},8,["model"])]),_:1})}}});export{M as default};
