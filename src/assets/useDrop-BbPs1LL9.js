import{w as I,s as C,a as p,r as D,b as m,c as y,d as O}from"./useDrag-BGaSN1AF.js";import{aU as T,q as b,U as a,u as i,al as d}from"./index-C4AMdMz2.js";function _(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var f=!1,M=function(){function r(t){_(this,r),this.targetId=null,this.internalMonitor=t.getMonitor()}var e=r.prototype;return e.receiveHandlerId=function(n){this.targetId=n},e.getHandlerId=function(){return this.targetId},e.subscribeToStateChange=function(n,o){return this.internalMonitor.subscribeToStateChange(n,o)},e.canDrop=function(){if(!this.targetId)return!1;T(!f,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return f=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{f=!1}},e.isOver=function(n){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,n):!1},e.getItemType=function(){return this.internalMonitor.getItemType()},e.getItem=function(){return this.internalMonitor.getItem()},e.getDropResult=function(){return this.internalMonitor.getDropResult()},e.didDrop=function(){return this.internalMonitor.didDrop()},e.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},e.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},e.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},e.getClientOffset=function(){return this.internalMonitor.getClientOffset()},e.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},r}();function w(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function k(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function H(r,e,t){return k(r.prototype,e),r}var S=function(){function r(t){var n=this;w(this,r),this.hooks=I({dropTarget:function(o,s){n.clearDropTarget(),n.dropTargetOptions=s,b(o)?n.dropTargetRef=o:n.dropTargetNode=o,n.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}var e=r.prototype;return e.reconnect=function(){var n=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();n&&this.disconnectDropTarget();var o=this.dropTarget;if(this.handlerId){if(!o){this.lastConnectedDropTarget=o;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=o,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,o,this.dropTargetOptions))}},e.receiveHandlerId=function(n){n!==this.handlerId&&(this.handlerId=n,this.reconnect())},e.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},e.didDropTargetChange=function(){return this.lastConnectedDropTarget!==this.dropTarget},e.didOptionsChange=function(){return!C(this.lastConnectedDropTargetOptions,this.dropTargetOptions)},e.disconnectDropTarget=function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)},e.clearDropTarget=function(){this.dropTargetRef=null,this.dropTargetNode=null},H(r,[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(n){this.dropTargetOptionsInternal=n}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.value}}]),r}();function A(r){return a(function(){var e=i(r).accept;return T(e!=null,"accept must be defined"),Array.isArray(e)?e:[e]})}function R(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var E=function(){function r(t,n){R(this,r),this.spec=t,this.monitor=n}var e=r.prototype;return e.canDrop=function(){var n=this.spec,o=this.monitor;return n.canDrop?n.canDrop(o.getItem(),o):!0},e.hover=function(){var n=this.spec,o=this.monitor;n.hover&&n.hover(o.getItem(),o)},e.drop=function(){var n=this.spec,o=this.monitor;if(n.drop)return n.drop(o.getItem(),o)},r}();function j(r,e){var t=a(function(){return new E(i(r),i(e))});return d(function(){t.value.spec=i(r)}),t}function h(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function F(r){if(Array.isArray(r))return r}function P(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],o=!0,s=!1,l,u;try{for(t=t.call(r);!(o=(l=t.next()).done)&&(n.push(l.value),!(e&&n.length===e));o=!0);}catch(c){s=!0,u=c}finally{try{!o&&t.return!=null&&t.return()}finally{if(s)throw u}}return n}}function N(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function U(r,e){return F(r)||P(r,e)||$(r,e)||N()}function $(r,e){if(r){if(typeof r=="string")return h(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(r,e)}}function q(r,e,t){var n=p(),o=j(r,e),s=A(r);d(function(u){var c=U(D(s,o,n),2),g=c[0],v=c[1];i(e).receiveHandlerId(g),i(t).receiveHandlerId(g),u(v)})}function x(){var r=p();return a(function(){return new M(i(r))})}function B(r){var e=p(),t=a(function(){return new S(i(e).getBackend())});return d(function(n){t.value.dropTargetOptions=i(r)||null,t.value.reconnect(),n(function(){return t.value.disconnectDropTarget()})}),t}function L(r,e){return m(function(t){i(r).hooks.dropTarget()(t.el,t.options)},a(function(){return i(e).options}))}function z(r){var e=y(r),t=x(),n=B(a(function(){return i(e).options}));return q(e,t,n),[O(a(function(){return i(e).collect||function(){return{}}}),t,n),L(n,e)]}export{z as u};
