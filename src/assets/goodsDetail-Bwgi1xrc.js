import{U as C}from"./goods-CB7YWqUH.js";import{u as N}from"./filters-D05Q2eUM.js";import{V as O}from"./dist-PezRi_EG.js";import{d as B,p as F,a as R,r as A,h as S,b as h,o as a,c as d,e as i,w as s,k as p,u as e,t as m,s as c,F as y,i as b,f as _,j as g,_ as W}from"./index-C4AMdMz2.js";const $={class:"base-info-item"},j={style:{color:"red","font-weight":"bold","font-size":"16px","text-align":"center"}},q={key:0},z={key:1,"mt-8px":""},H={class:"form-item-view"},K={key:0},J={key:0},Q={class:"form-item-view"},X={class:"form-item-view"},Y={class:"form-item-view"},Z={key:0},ee={key:0,class:"goods-detail-intro"},te=B({__name:"goodsDetail",setup(ae){const U=F(),l=R({data:{goodsUnit:"",categoryName:[],goodsName:"",sellingPoint:"",salesModel:"",id:"",price:0,goodsGalleryList:[],wholesaleList:null,intro:"",mobileIntro:"",tags:""}}),I=[{title:"销售规则",width:320,slotName:"wholeItem"}],w=[{title:"规格",dataIndex:"specs"},{title:"编号",width:150,dataIndex:"sn"},{title:"重量(kg)",width:100,dataIndex:"weight"}];let r=[];const v=[],x=A(!1);async function D(){const f=await C(U.query.id),{skuList:n}=f.data.result;l.data=f.data.result,n&&(n.forEach(o=>{v.push({specs:o.goodsName,sn:o.sn,weight:o.weight,cost:N(o.cost,"￥"),price:N(o.price,"￥"),image:o.thumbnail,goodsGalleryList:o.goodsGalleryList}),o.goodsGalleryList.length>0&&w.push({title:"图片",dataIndex:"original",slot:!0,slotTemplate:"children",tooltip:"none"}),x.value=!0}),f.data.result.salesModel==="WHOLESALE"&&f.data.result.wholesaleList?f.data.result.wholesaleList.forEach((o,P)=>{w.push({title:`购买量 ≥${o.num}`,slot:!0,slotTemplate:`wholePrice${P}`,dataIndex:"num"})}):w.push({title:"成本",key:"cost",dataIndex:"cost",width:160},{title:"价格",dataIndex:"price",key:"price",width:160}),r=f.data.result.wholesaleList)}return S(()=>{D()}),(f,n)=>{const o=h("a-form-item"),P=h("a-tag"),E=h("a-table"),V=h("a-image"),k=h("a-input"),T=h("a-card"),M=h("a-form");return a(),d("div",null,[i(M,{model:e(l).data},{default:s(()=>[i(T,null,{default:s(()=>[p("div",$,[p("div",j,[e(l).data.marketEnable==="DOWN"?(a(),d("div",q," 商品已下架，下架原因："+m(e(l).data.underMessage),1)):c("",!0),e(l).data.authFlag==="REFUSE"?(a(),d("div",z," 商品审核失败，审核信息："+m(e(l).data.authMessage),1)):c("",!0)]),n[3]||(n[3]=p("h4",null,"基本信息",-1)),p("div",H,[i(o,{field:"name",label:"商品分类"},{default:s(()=>[(a(!0),d(y,null,b(e(l).data.categoryName,(t,u)=>(a(),d("span",{key:u},[_(m(t)+" ",1),u!==e(l).data.categoryName.length-1?(a(),d("i",K,">")):c("",!0)]))),128))]),_:1}),i(o,{field:"goodsName",label:"商品名称"},{default:s(()=>[_(m(e(l).data.goodsName),1)]),_:1}),i(o,{field:"sellingPoint",label:"商品卖点"},{default:s(()=>[_(m(e(l).data.sellingPoint),1)]),_:1}),i(o,{label:"商品参数"},{default:s(()=>[e(l).data.goodsParamsDTOList&&e(l).data.goodsParamsDTOList.length?(a(),d("div",J,[(a(!0),d(y,null,b(e(l).data.goodsParamsDTOList,(t,u)=>(a(),d("div",{key:u,style:{"margin-bottom":"10px"}},[_(m(t.groupName)+" : ",1),(a(!0),d(y,null,b(t.goodsParamsItemDTOList,(L,G)=>(a(),g(P,{key:G,style:{"margin-right":"10px"}},{default:s(()=>[_(m(L.paramName)+" - "+m(L.paramValue),1)]),_:2},1024))),128))]))),128))])):c("",!0)]),_:1})]),n[4]||(n[4]=p("h4",null,"商品交易信息",-1)),p("div",Q,[i(o,{field:"goodsUnit",label:"计量单位"},{default:s(()=>[_(m(e(l).data.goodsUnit),1)]),_:1}),i(o,{field:"salesModel",label:"销售模式"},{default:s(()=>[_(m(e(l).data.salesModel==="RETAIL"?"零售型":"批发型"),1)]),_:1}),e(l).data.salesModel!=="RETAIL"?(a(),g(o,{key:0,field:"name",label:"销售规则"},{default:s(()=>[i(E,{border:"",columns:I,data:e(r),pagination:!1},{wholeItem:s(({rowIndex:t})=>[p("div",null," 当商品购买数量 ≥ "+m(e(r)[t].num)+" 时，价格为 "+m(e(N)(e(r)[t].price,"￥"))+" / "+m(e(l).data.goodsUnit),1)]),_:1},8,["data"])]),_:1})):c("",!0)]),n[5]||(n[5]=p("h4",null,"商品规格及图片",-1)),p("div",X,[i(o,{field:"id",label:"商品编号"},{default:s(()=>[_(m(e(l).data.id),1)]),_:1}),i(o,{field:"price",label:"商品价格"},{default:s(()=>[_(m(e(N)(e(l).data.price,"￥")),1)]),_:1}),i(o,{field:"name",label:"商品图片"},{default:s(()=>[(a(!0),d(y,null,b(e(l).data.goodsGalleryList,(t,u)=>(a(),d("div",{key:u,class:"demo-upload-list"},[i(V,{src:t,width:"100%"},null,8,["src"])]))),128))]),_:1}),i(o,{field:"name",label:"商品规格"},{default:s(()=>[e(x)?(a(),g(e(O),{key:0,columns:w,"data-list":v,"enable-pagination":!1},{original:s(({rowIndex:t})=>[i(k,{modelValue:v[t].name,"onUpdate:modelValue":u=>v[t].name=u},null,8,["modelValue","onUpdate:modelValue"])]),wholePrice:s(({rowIndex:t})=>[e(r)[t]?(a(),g(k,{key:0,modelValue:e(r)[t].price,"onUpdate:modelValue":u=>e(r)[t].price=u,clearable:"",disabled:""},null,8,["modelValue","onUpdate:modelValue"])):c("",!0)]),wholePrice0:s(()=>[e(r)[0]?(a(),g(k,{key:0,modelValue:e(r)[0].price,"onUpdate:modelValue":n[0]||(n[0]=t=>e(r)[0].price=t),clearable:"",disabled:""},null,8,["modelValue"])):c("",!0)]),wholePrice1:s(()=>[e(r)[1]?(a(),g(k,{key:0,modelValue:e(r)[1].price,"onUpdate:modelValue":n[1]||(n[1]=t=>e(r)[1].price=t),clearable:"",disabled:""},null,8,["modelValue"])):c("",!0)]),wholePrice2:s(()=>[e(r)[2]?(a(),g(k,{key:0,modelValue:e(r)[2].price,"onUpdate:modelValue":n[2]||(n[2]=t=>e(r)[2].price=t),clearable:"",disabled:""},null,8,["modelValue"])):c("",!0)]),children:s(({data:t})=>[(a(!0),d(y,null,b(t==null?void 0:t.goodsGalleryList,(u,L)=>(a(),g(V,{key:L,src:u,width:"60",height:"60",style:{"margin-right":"6px"}},null,8,["src"]))),128))]),_:1})):c("",!0)]),_:1})]),n[6]||(n[6]=p("h4",null,"商品详情描述",-1)),p("div",Y,[i(o,{label:"PC端商品描述"},{default:s(()=>[e(l).data.intro?(a(),d("div",Z,[(a(!0),d(y,null,b(e(l).data.intro.split(","),(t,u)=>(a(),d("div",{key:u,class:"item-intro"},[i(V,{src:t},null,8,["src"])]))),128))])):c("",!0)]),_:1}),i(o,{label:"移动端描述"},{default:s(()=>[e(l).data.mobileIntro?(a(),d("div",ee,[(a(!0),d(y,null,b(e(l).data.mobileIntro.split(","),(t,u)=>(a(),d("div",{key:u,class:"item-intro"},[i(V,{src:t},null,8,["src"])]))),128))])):c("",!0)]),_:1})])])]),_:1})]),_:1},8,["model"])])}}}),ie=W(te,[["__scopeId","data-v-838db5b2"]]);export{ie as default};
