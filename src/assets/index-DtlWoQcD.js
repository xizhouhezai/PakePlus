import{d as w,r as b,h as S,b as s,o as T,j as I,w as o,e as l,u as t,f as i,x as N,y as O,M as D}from"./index-C4AMdMz2.js";import{g as M,s as L}from"./operation-CQQGRn8-.js";import{R as r,V as p}from"./validator-B8pIxTAL.js";const F=w({__name:"index",setup(k){const _=b(),d=b({isOpen:!0,level:"1",mode:"2",binding:"NEW",validity:"FOREVER",validityDay:0,commissionModel:"SELLER",firstCommission:0,secondaryCommission:0,selfCommission:"2",promotion:"2",maxPromotionNum:0});async function y(){const m=await M("DISTRIBUTION_SETTING");m.data.success&&(d.value=m.data.result)}async function C(){(await L("DISTRIBUTION_SETTING",d.value)).data.success&&(D.success("设置成功!"),y())}function x(m){d.value.validity=m}return S(()=>{y()}),(m,e)=>{const v=s("a-divider"),g=s("a-switch"),u=s("a-form-item"),n=s("a-radio"),f=s("a-radio-group"),V=s("a-input-number"),E=s("a-button"),R=s("a-form"),U=s("a-card");return T(),I(U,{class:"general-card",title:"分销设置",bordered:!1},{default:o(()=>[l(R,{ref_key:"formRef",ref:_,style:{padding:"30px"},model:t(d)},{default:o(()=>[l(v,{orientation:"left"},{default:o(()=>e[10]||(e[10]=[i(" 分销设置 ")])),_:1}),l(u,{field:"isOpen",label:"是否开启分销",rules:[t(r),t(p)]},{default:o(()=>[l(g,{modelValue:t(d).isOpen,"onUpdate:modelValue":e[0]||(e[0]=a=>t(d).isOpen=a)},{checked:o(()=>e[11]||(e[11]=[i(" 开启 ")])),unchecked:o(()=>e[12]||(e[12]=[i(" 关闭 ")])),_:1},8,["modelValue"])]),_:1},8,["rules"]),l(u,{field:"level",label:"分销层级"},{default:o(()=>[l(f,{modelValue:t(d).level,"onUpdate:modelValue":e[1]||(e[1]=a=>t(d).level=a),type:"button"},{default:o(()=>[l(n,{value:"1"},{default:o(()=>e[13]||(e[13]=[i(" 一级分销 ")])),_:1}),l(n,{value:"2"},{default:o(()=>e[14]||(e[14]=[i(" 二级分销 ")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,{field:"mode",label:"分销模式"},{default:o(()=>[l(f,{modelValue:t(d).mode,"onUpdate:modelValue":e[2]||(e[2]=a=>t(d).mode=a),type:"button"},{default:o(()=>[l(n,{value:"1"},{default:o(()=>e[15]||(e[15]=[i(" 指定分销 ")])),_:1}),l(n,{value:"2"},{default:o(()=>e[16]||(e[16]=[i(" 人人分销 ")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,{field:"binding",label:"分销关系绑定"},{default:o(()=>[l(f,{modelValue:t(d).binding,"onUpdate:modelValue":e[3]||(e[3]=a=>t(d).binding=a),type:"button"},{default:o(()=>[l(n,{value:"ALL"},{default:o(()=>e[17]||(e[17]=[i(" 所有用户 ")])),_:1}),l(n,{value:"NEW"},{default:o(()=>e[18]||(e[18]=[i(" 新用户 ")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,{field:"validity",label:"分销绑定模式"},{default:o(()=>[l(f,{modelValue:t(d).validity,"onUpdate:modelValue":e[4]||(e[4]=a=>t(d).validity=a),type:"button",onChange:x},{default:o(()=>[l(n,{value:"FOREVER"},{default:o(()=>e[19]||(e[19]=[i(" 永久 ")])),_:1}),l(n,{value:"EXP"},{default:o(()=>e[20]||(e[20]=[i(" 有效期 ")])),_:1})]),_:1},8,["modelValue"])]),_:1}),N(l(u,{field:"validityDay",label:"有效期天数",rules:[t(r),t(p)]},{default:o(()=>[l(V,{modelValue:t(d).validityDay,"onUpdate:modelValue":e[5]||(e[5]=a=>t(d).validityDay=a),style:{width:"320px"},min:1,max:365},null,8,["modelValue"])]),_:1},8,["rules"]),[[O,t(d).validity==="EXP"]]),l(v,{orientation:"left"},{default:o(()=>e[21]||(e[21]=[i(" 返佣设置 ")])),_:1}),l(u,{field:"commissionModel",label:"佣金模式"},{default:o(()=>[l(f,{modelValue:t(d).commissionModel,"onUpdate:modelValue":e[6]||(e[6]=a=>t(d).commissionModel=a),type:"button"},{default:o(()=>[l(n,{value:"PLATFORM"},{default:o(()=>e[22]||(e[22]=[i(" 平台承担 ")])),_:1}),l(n,{value:"SELLER"},{default:o(()=>e[23]||(e[23]=[i(" 商户承担 ")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,{field:"firstCommission",label:"一级佣金比例",rules:[t(r),t(p)]},{default:o(()=>[l(V,{modelValue:t(d).firstCommission,"onUpdate:modelValue":e[7]||(e[7]=a=>t(d).firstCommission=a),style:{width:"320px"},min:0,max:99999},null,8,["modelValue"])]),_:1},8,["rules"]),l(u,{field:"secondaryCommission",label:"二级分佣比例",rules:[t(r),t(p)]},{default:o(()=>[l(V,{modelValue:t(d).secondaryCommission,"onUpdate:modelValue":e[8]||(e[8]=a=>t(d).secondaryCommission=a),style:{width:"320px"},min:0,max:99999},null,8,["modelValue"])]),_:1},8,["rules"]),l(u,{field:"selfCommission",label:"自购返佣"},{default:o(()=>[l(f,{modelValue:t(d).selfCommission,"onUpdate:modelValue":e[9]||(e[9]=a=>t(d).selfCommission=a),type:"button"},{default:o(()=>[l(n,{value:"1"},{default:o(()=>e[24]||(e[24]=[i(" 开启 ")])),_:1}),l(n,{value:"2"},{default:o(()=>e[25]||(e[25]=[i(" 关闭 ")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(E,{style:{width:"120px",margin:"30px 220px"},type:"primary",onClick:C},{default:o(()=>e[26]||(e[26]=[i(" 保存 ")])),_:1})]),_:1},8,["model"])]),_:1})}}});export{F as default};
