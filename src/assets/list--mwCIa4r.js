import{w as W,a as $}from"./order-HsmDfkng.js";import{u as j}from"./useCurrentInstance-BLlvmEjv.js";import{u as q}from"./filters-D05Q2eUM.js";import{o as z,n as A,W as G,p as H}from"./tools-BfzgO_2s.js";import{U as J,V as K}from"./dist-PezRi_EG.js";import{d as Q,r as c,E as X,b as l,o as u,j as h,w as a,e as o,u as s,c as f,F as w,i as v,f as m,k as r,t as p,s as Y,M as Z,_ as tt}from"./index-C4AMdMz2.js";const et={class:"header"},at={"mr-30px":""},ot={style:{color:"#333"}},st={style:{color:"#333"}},rt={"mx-5px":"","w-full":""},nt={class:"flex"},lt={key:0},dt={class:"goods-num","float-right":""},it={class:"global_color"},ct={style:{color:"red"}},ut=Q({__name:"list",setup(pt){var g;const k=(g=j().globalProperties)==null?void 0:g.$modal,I=c(""),P=c(),S=[{label:"订单号",model:"orderSn",disabled:!1,input:!0},{label:"买家/收货人",model:"nickname",disabled:!1,input:!0},{label:"下单时间",disabled:!1,datePicker:{type:"range"}}],T=[{title:"订单详情",dataIndex:"goods",slot:!0,slotTemplate:"goods",width:500},{title:"订单来源",dataIndex:"clientType",slot:!0,slotData:{badge:A},width:120},{title:"店铺名称",dataIndex:"storeName",width:200,slot:!0,store:!0},{title:"应付",dataIndex:"flowPrice",currency:!0,width:100},{title:"会员ID",dataIndex:"buyerId",width:120},{title:"买家/收货人",dataIndex:"nickname",width:150,member:!0},{title:"订单促销类型",dataIndex:"orderPromotionType",slot:!0,slotData:{badge:G},width:120},{title:"订单状态",dataIndex:"orderStatus",slot:!0,slotData:{badge:H},width:120}],C={title:"操作",width:150,methods:[{title:"查看",callback:"orderDetail",type:"text",status:"success"}]},n=c({isProxy:!0}),b=c(),x=c({total:0}),D=c();async function O(){k.confirm({title:"确认导出",content:"确定要导出订单数据吗？导出功能为异步导出，需要去 运营 - 导出记录 下载",onOk:async()=>{(await W(n.value)).data.success&&Z.success("导出成功,请前往 “运营 - 导出记录” 进行下载")}})}async function V(){const d=await $(n.value);if(d.data.success){const t=[];d.data.result.records&&d.data.result.records.length&&d.data.result.records.forEach(_=>{t.push({..._,customType:"full"}),t.push(_)}),b.value=t,x.value=d.data.result}}return X(()=>n.value,()=>{V()},{deep:!0,immediate:!0}),(d,t)=>{const _=l("a-tab-pane"),N=l("a-tabs"),R=l("a-button"),B=l("a-space"),L=l("a-col"),M=l("a-row"),y=l("a-typography-text"),U=l("a-image"),E=l("a-card");return u(),h(E,{class:"general-card",title:"代发订单",bordered:!1},{default:a(()=>[o(N,{"default-active-key":s(I),onChange:t[0]||(t[0]=e=>{s(n).orderStatus=e})},{default:a(()=>[(u(!0),f(w,null,v(s(z),e=>(u(),h(_,{key:e.value,title:e.label},null,8,["title"]))),128))]),_:1},8,["default-active-key"]),o(s(J),{ref_key:"pickSearchColumnRef",ref:D,columns:S,onReset:t[1]||(t[1]=e=>{n.value={...s(n),...e}}),onSearch:t[2]||(t[2]=e=>{n.value={...s(n),...e}})},null,512),o(M,{style:{"margin-bottom":"16px"}},{default:a(()=>[o(L,{span:16},{default:a(()=>[o(B,null,{default:a(()=>[o(R,{type:"primary",onClick:O},{default:a(()=>t[5]||(t[5]=[m(" 导出订单 ")])),_:1})]),_:1})]),_:1})]),_:1}),o(s(K),{ref_key:"tablePageRef",ref:P,columns:T,methods:C,"data-list":s(b),total:s(x).total,bordered:!0,"custom-col":!0,colspan:8,onPaginationChange:t[3]||(t[3]=e=>{n.value={...s(n),...e}}),onOrderDetail:t[4]||(t[4]=e=>{d.$openWindow({name:"order-detail",query:{id:e.record.sn}})})},{full:a(({data:e})=>[r("div",et,[r("p",at,[t[6]||(t[6]=m(" 订单编号：")),o(y,{copyable:"",bold:""},{default:a(()=>[r("span",ot,p(e.sn),1)]),_:2},1024)]),r("p",null,[t[7]||(t[7]=m("下单时间：")),r("span",st,p(e.createTime),1)])])]),goods:a(({data:e})=>[(u(!0),f(w,null,v(e.orderItems,(i,F)=>(u(),f("div",{key:F,class:"flex","mb-5px":""},[o(U,{width:"50",height:"50",src:i.image,"show-loader":""},{loader:a(()=>t[8]||(t[8]=[r("div",{class:"loader-animate"},null,-1)])),_:2},1032,["src"]),r("div",rt,[o(y,{copyable:"",bold:""},{default:a(()=>[m(p(i.name),1)]),_:2},1024),r("div",nt,[i!=null&&i.goodsUnit?(u(),f("div",lt,[o(y,{style:{"font-size":"12px"},type:"secondary"},{default:a(()=>[m(p(i.goodsUnit),1)]),_:2},1024)])):Y("",!0)])]),r("div",dt,[r("span",it,p(s(q)(i.goodsPrice,"￥")),1),r("span",ct," x"+p(i.num),1)])]))),128))]),_:1},8,["data-list","total"])]),_:1})}}}),gt=tt(ut,[["__scopeId","data-v-301d5e20"]]);export{gt as default};
