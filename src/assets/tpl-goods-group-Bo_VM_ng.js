import{g as Z}from"./goods-CB7YWqUH.js";import{_ as A}from"./list.vue_vue_type_script_setup_true_lang-CT5uXx_7.js";import{I as h}from"./all-BUr7x5Dn.js";import{d as H}from"./vuedraggable.umd-Ck4RHsgF.js";import{d as J,r as m,U as K,b as i,v as Q,o as u,c as g,k as o,F as z,i as $,e as a,j as w,w as n,u as l,f as v,t as y,s as b,x as W,q as X,Z as Y,M as ee,_ as te}from"./index-C4AMdMz2.js";import"./useCurrentInstance-BLlvmEjv.js";import"./tools-BfzgO_2s.js";import"./dist-PezRi_EG.js";import"./classifyModel-DKDTUTay.js";import"./index.vue_vue_type_script_setup_true_lang-DsrWKjKu.js";import"./index-CzBKN9cw.js";import"./index--a7kHzzJ.js";import"./validator-B8pIxTAL.js";import"./extra-5DUayDl9.js";const oe={flex:"","flex-j-c":"","flex-a-c":""},ae=["onClick"],le={"b-1px":""},se={"mt-10px":"","text-12px":""},ne={class:"group-item","my-20px":""},re={flex:"","flex-j-sb":""},ie={flex:"","flex-a-c":""},ue={"mt-10px":""},de={flex:"","flex-a-c":""},pe={key:0,flex:"","flex-j-sb":"","py-22px":""},me=J({__name:"tpl-goods-group",props:{res:null},emits:["update:res"],setup(P,{emit:j}){const _=P,D=j,G=m(!1),d=m(!1),f=m([]),s=K({get(){return _.res},set(p){D("update:res",p)}}),r=m({data:"",index:0}),L=m(null),N=[{label:"顶部菜单",value:"top-bar",layout:"top"},{label:"左侧菜单",value:"left-bar",layout:"left"}],C=m({pageSize:10,pageNumber:1,storeCategoryPath:""});function U(p,e){d.value=!0,r.value.data=p,r.value.number=e}function B(){d.value=!1,s.value.data.groups[r.value.number]||(s.value.data.groups[r.value.number]={title:`分组${r.value.number+1}`,goodsList:[],categoryPath:""}),s.value.data.groups[r.value.number].categoryPath=C.value.storeCategoryPath,s.value.data.groups[r.value.number].goodsList=f.value}async function R(p){var c;C.value.storeCategoryPath=p;const e=await Z(C.value);e.data.success&&((c=e.data.result)!=null&&c.records.length?f.value=e.data.result.records:(ee.warning("该分类下没有商品"),f.value=""))}function S(){d.value=!0,r.value.number=s.value.data.groups.length}return(p,e)=>{const c=i("a-divider"),I=i("a-tag"),k=i("a-button"),E=i("a-input"),F=i("a-radio"),M=i("a-radio-group"),q=i("a-alert"),O=i("a-modal"),T=Q("auto-animate");return u(),g("div",null,[o("div",oe,[(u(),g(z,null,$(N,(t,x)=>o("div",{key:x,class:Y({active:t.layout===l(s).data.menuConfig.layout}),"m-20px":"",flex:"","flex-col":"","cursor-pointer":"","flex-j-c":"","flex-a-c":"","p-20px":"",onClick:()=>l(s).data.menuConfig.layout=t.layout},[o("div",le,[a(l(h),{type:t.value,"mb-8px":"",size:"22"},null,8,["type"])]),o("div",se,y(t.label),1)],10,ae)),64))]),a(c),o("div",null,[e[9]||(e[9]=o("div",null,"商品分类管理",-1)),_.res.data.groups.length?(u(),w(l(H),{key:0,"my-20px":"","ghost-class":"ghost","item-key":"id",list:_.res.data.groups,onStart:e[0]||(e[0]=t=>G.value=!0),onEnd:e[1]||(e[1]=t=>G.value=!1)},{item:n(({element:t,index:x})=>[o("div",ne,[o("div",re,[o("div",ie,[a(l(h),{type:"drag",size:"12"}),a(I,{"ml-8px":"",size:"small",color:"arcoblue",title:t.title},{default:n(()=>[v(y(t.title),1)]),_:2},1032,["title"])]),o("div",null,[a(k,{size:"mini",onClick:V=>U(t,x)},{default:n(()=>e[4]||(e[4]=[v(" 修改 ")])),_:2},1032,["onClick"]),a(k,{size:"mini",onClick:V=>_.res.data.groups.splice(x,1)},{default:n(()=>e[5]||(e[5]=[v(" 删除 ")])),_:2},1032,["onClick"])])]),o("div",ue,[o("div",de,[e[6]||(e[6]=o("div",{"color-warm-gray":""}," 菜单名称： ",-1)),a(E,{modelValue:t.title,"onUpdate:modelValue":V=>t.title=V,"ml-20px":"",style:{width:"200px"}},null,8,["modelValue","onUpdate:modelValue"])])])])]),_:1},8,["list"])):b("",!0),o("div",null,[a(k,{long:"","my-20px":"",type:"outline",onClick:S},{default:n(()=>e[7]||(e[7]=[v(" 选择商品分组 ")])),_:1}),e[8]||(e[8]=o("div",{"text-12px":"","color-warm-gray":""}," 拖拽可调整分组顺序 ",-1))])]),a(c),l(s).data.menuConfig.layout==="top"?(u(),g("div",pe,[e[10]||(e[10]=o("div",null,"菜单样式",-1)),o("div",null,[a(M,{modelValue:l(s).data.menuConfig.style,"onUpdate:modelValue":e[2]||(e[2]=t=>l(s).data.menuConfig.style=t)},{default:n(()=>[(u(),g(z,null,$(3,t=>a(F,{key:t,value:`style-${t}`,"text-12px":""},{default:n(()=>[v(" 样式"+y(t),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])])])):b("",!0),a(O,{visible:l(d),"onUpdate:visible":e[3]||(e[3]=t=>X(d)?d.value=t:null),title:"选择店铺分类",width:800,onOk:B},{default:n(()=>[W((u(),g("div",null,[l(f).length?(u(),w(q,{key:0},{default:n(()=>[v(" 当前分类下商品有"+y(l(f).length)+"个 ",1)]),_:1})):b("",!0)])),[[T]]),l(d)?(u(),w(A,{key:0,ref_key:"goodsCategoryRef",ref:L,"template-model":"template",onChosen:R},null,512)):b("",!0)]),_:1},8,["visible"])])}}}),ze=te(me,[["__scopeId","data-v-a3f63fc5"]]);export{ze as default};
