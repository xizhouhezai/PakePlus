import{_ as k,r as m,E as J,h as V,x as B,o as D,c as R,Z as U,k as W,t as H,ah as F,A as G,Y as A}from"./index-C4AMdMz2.js";const e={MIN_LIMIT:48,DECIMAL_PLACES:4};e.getMultiple=(t=e.DECIMAL_PLACES)=>10**t;e.decimalPoint=(t=0)=>Math.round(t*e.getMultiple())/e.getMultiple()||0;e.getOffset=(t={})=>({width:t.clientWidth||0,height:t.clientHeight||0});e.getPageX=t=>"pageX"in t?t.pageX:t.touches[0].pageX;e.getPageY=t=>"pageY"in t?t.pageY:t.touches[0].pageY;e.getDistanceX=(t,i)=>e.getPageX(t)-(i.getBoundingClientRect().left+window.pageXOffset);e.getDistanceY=(t,i)=>e.getPageY(t)-(i.getBoundingClientRect().top+window.pageYOffset);e.handleEgdeCollisions=(t,i)=>{const a={left:t.left,top:t.top},o={left:t.left+t.width,top:t.top+t.height},h={left:i.left,top:i.top},n={left:i.left+i.width,top:i.top+i.height};return!(a.left>n.left||h.left>o.left||a.top>n.top||h.top>o.top)};e.dealEdgeValue=(t,i,a,o,h=o.length-1)=>{if(Object.prototype.hasOwnProperty.call(i,"left")&&i.left<0&&(i.left=0,i.width=t.width+t.left),Object.prototype.hasOwnProperty.call(i,"top")&&i.top<0&&(i.top=0,i.height=t.height+t.top),!Object.prototype.hasOwnProperty.call(i,"left")&&Object.prototype.hasOwnProperty.call(i,"width")&&t.left+i.width>a.width&&(i.width=a.width-t.left),!Object.prototype.hasOwnProperty.call(i,"top")&&Object.prototype.hasOwnProperty.call(i,"height")&&t.top+i.height>a.height&&(i.height=a.height-t.top),o.length>1){const n=JSON.parse(JSON.stringify(o)).map(p=>({left:(p.leftPer||0)*a.width,top:(p.topPer||0)*a.height,width:(p.widthPer||0)*a.width,height:(p.heightPer||0)*a.height})),g={...t,...i};for(let p=0,E=n.length;p<E;p++)if(h!==p&&e.handleEgdeCollisions(n[p],g))return t}return Object.assign(t,i)};e.dealTL=(t,i,a,o=e.MIN_LIMIT)=>{const h={},n=t.width-i,g=t.height-a;return n>=Math.min(o,t.width)&&Object.assign(h,{width:n,left:t.left+i}),g>=Math.min(o,t.height)&&Object.assign(h,{height:g,top:t.top+a}),h};e.dealTC=(t,i,a,o=e.MIN_LIMIT)=>{let h={};const n=t.height-a;return n>=Math.min(o,t.height)&&(h={height:n,top:t.top+a}),h};e.dealTR=(t,i,a,o=e.MIN_LIMIT)=>{const h={},n=t.width+i,g=t.height-a;return n>=Math.min(o,t.width)&&Object.assign(h,{width:n}),g>=Math.min(o,t.height)&&Object.assign(h,{height:g,top:t.top+a}),h};e.dealCL=(t,i,a,o=e.MIN_LIMIT)=>{const h={},n=t.width-i;return n>=Math.min(o,t.width)&&Object.assign(h,{width:n,left:t.left+i}),h};e.dealCR=(t,i,a,o=e.MIN_LIMIT)=>{const h={},n=t.width+i;return n>=Math.min(o,t.width)&&Object.assign(h,{width:n}),h};e.dealBL=(t,i,a,o=e.MIN_LIMIT)=>{const h={},n=t.width-i,g=t.height+a;return n>=Math.min(o,t.width)&&Object.assign(h,{width:n,left:t.left+i}),g>=Math.min(o,t.height)&&Object.assign(h,{height:g}),h};e.dealBC=(t,i,a,o=e.MIN_LIMIT)=>{const h={},n=t.height+a;return n>=Math.min(o,t.height)&&Object.assign(h,{height:n}),h};e.dealBR=(t,i,a,o=e.MIN_LIMIT)=>{const h={},n=t.width+i,g=t.height+a;return n>=Math.min(o,t.width)&&Object.assign(h,{width:n}),g>=Math.min(o,t.height)&&Object.assign(h,{height:g}),h};const K=["title"],Q={__name:"zone",props:["index","setting","res"],emits:["changeInfo","reloadOn"],setup(t,{emit:i}){const a=t,o=i,h={beforeMount(s){s.addEventListener("mousedown",f,{passive:!1});function f(w){const M=w.target.dataset.pointer;if(!M)return;w==null||w.stopPropagation();const d=s.parentNode,y=a.setting,T=a.index,c=e.getOffset(d.parentNode);let r={width:e.getOffset(d).width||0,height:e.getOffset(d).height||0,top:y.topPer*c.height||0,left:y.leftPer*c.width||0},z=e.getPageX(w),x=e.getPageY(w),L;C(!0),window.addEventListener("mousemove",P,{passive:!1}),window.addEventListener("mouseup",l,{passive:!1});function P(u){u==null||u.preventDefault(),L=!0;const O=e.getPageX(u)-z,b=e.getPageY(u)-x;z=e.getPageX(u),x=e.getPageY(u);const N=e[M](r,O,b);r=e.dealEdgeValue(r,N,c,a.res,T),Object.assign(d.style,{top:`${r.top}px`,left:`${r.left}px`,width:`${r.width}px`,height:`${r.height}px`})}function l(){if(L){L=!1;const u={topPer:e.decimalPoint(r.top/c.height),leftPer:e.decimalPoint(r.left/c.width),widthPer:e.decimalPoint(r.width/c.width),heightPer:e.decimalPoint(r.height/c.height)};A("area-reload")||o("reloadOn"),X(u),Object.assign(d.style,{top:`${r.top}px`,left:`${r.left}px`,width:`${r.width}px`,height:`${r.height}px`})}C(!1),window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",l)}}s.$destroy=()=>s.removeEventListener("mousedown",f)},unmounted(s){s.$destroy()}},n={beforeMount(s){s.addEventListener("mousedown",w);let f;function w(M){M==null||M.stopPropagation();const d=e.getOffset(s.parentNode),y=e.getPageX(M),T=e.getPageY(M);let c,r,z;window.addEventListener("mousemove",x,{passive:!1}),window.addEventListener("mouseup",L,{passive:!1});function x(P){P==null||P.preventDefault(),z=!0,f=!1,C(!0);const l=a.setting,u=a.index;let O=e.getPageX(P)-y,b=e.getPageY(P)-T;if(l.topPer=l.topPer||0,l.leftPer=l.leftPer||0,c=e.decimalPoint(b/d.height+l.topPer),r=e.decimalPoint(O/d.width+l.leftPer),c<0&&(c=0,b=-d.height*l.topPer),r<0&&(r=0,O=-d.width*l.leftPer),c+l.heightPer>1&&(c=1-l.heightPer,b=d.height*(c-l.topPer)),r+l.widthPer>1&&(r=1-l.widthPer,O=d.width*(r-l.leftPer)),a.res.length>1){const N=JSON.parse(JSON.stringify(a.res)).map(v=>({left:(v.leftPer||0)*d.width,top:(v.topPer||0)*d.height,width:(v.widthPer||0)*d.width,height:(v.heightPer||0)*d.height})),j={};j.left=l.leftPer*d.width+O,j.top=l.topPer*d.height+b,j.width=l.widthPer*d.width,j.height=l.heightPer*d.height;for(let v=0,Z=N.length;v<Z;v++)if(u!==v&&e.handleEgdeCollisions(N[v],j)){f=!0;break}}s.style.transform=`translate(${O}px, ${b}px)`}function L(){z&&(z=!1,s.style.transform="translate(0, 0)",f||(A("area-reload")||o("reloadOn"),X({topPer:c,leftPer:r}))),C(!1),window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",L)}}s.$destroy=()=>s.removeEventListener("mousedown",w)},unmounted(s){s.$destroy()}},g=m(!1),p=m(!1),E=m(0),$=m(0),q=m(0),Y=m(0);function _(s){return`${(s||0)*100}%`}function S(s){E.value=_(s.topPer),$.value=_(s.leftPer),q.value=_(s.widthPer),Y.value=_(s.heightPer),p.value=s.widthPer<.01&&s.heightPer<.01}J(()=>a.setting,s=>{S(s)}),V(()=>{S(a.setting)});function X(s={}){o("changeInfo",{info:s,index:a.index})}function C(s=!0){g.value!==s&&(g.value=s)}return(s,f)=>B((D(),R("li",{class:"hz-m-item",style:G({top:E.value,left:$.value,width:q.value,height:Y.value})},[B((D(),R("ul",{class:U(["hz-m-box",{"hz-z-hidden":p.value,"hz-m-hoverbox":!g.value}])},[W("li",{class:"hz-u-index",title:`热区${t.index+1}`},H(t.index+1),9,K),f[0]||(f[0]=F('<li class="hz-u-square hz-u-square-tl" data-pointer="dealTL" data-v-34fcee3d></li><li class="hz-u-square hz-u-square-tc" data-pointer="dealTC" data-v-34fcee3d></li><li class="hz-u-square hz-u-square-tr" data-pointer="dealTR" data-v-34fcee3d></li><li class="hz-u-square hz-u-square-cl" data-pointer="dealCL" data-v-34fcee3d></li><li class="hz-u-square hz-u-square-cr" data-pointer="dealCR" data-v-34fcee3d></li><li class="hz-u-square hz-u-square-bl" data-pointer="dealBL" data-v-34fcee3d></li><li class="hz-u-square hz-u-square-bc" data-pointer="dealBC" data-v-34fcee3d></li><li class="hz-u-square hz-u-square-br" data-pointer="dealBR" data-v-34fcee3d></li>',8))],2)),[[h]])],4)),[[n]])}},I=k(Q,[["__scopeId","data-v-34fcee3d"]]),et=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"}));export{e as _,et as a,I as z};
