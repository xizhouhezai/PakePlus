import{d as q,r as n,h as Q,E as G,b as d,o as H,j as J,w as o,e as t,u as a,f,k as K,q as R,t as W,x as X,y as Y,M as y,_ as Z}from"./index-C4AMdMz2.js";import{c as ee,e as ae,f as te,h as le,i as oe}from"./member-B0DkAxtf.js";import{u as se}from"./useCurrentInstance-BLlvmEjv.js";import{R as M}from"./validator-B8pIxTAL.js";import{U as ne,V as de}from"./dist-PezRi_EG.js";const ie={class:"paginationBox"},ue=q({__name:"list",setup(re){var k;const E=(k=se().globalProperties)==null?void 0:k.$modal,S=[{label:"标签名称",model:"labelName",disabled:!1,input:!0}],U=[{title:"标签名称",dataIndex:"labelName"},{title:"创建时间",dataIndex:"createTime"},{title:"创建人",dataIndex:"createBy"}],h={title:"操作",width:300,fixed:"right",methods:[{title:"编辑",callback:"editor",slot:!0,slotTemplate:"editor"},{title:"删除",callback:"delete",slot:!0,slotTemplate:"delete"}]},u=n({pageNumber:1,pageSize:10,order:"desc",labelName:"",enable:!0}),N=n([]),_=n({total:0}),p=n(!1),x=n(),b=n({labelName:"",scene:"MEMBER"}),c=n(!1),L=n(),w=n(""),r=n({labelName:"",id:"",scene:"MEMBER"});function F(){b.value.labelName="",p.value=!0}async function z(){var e;await((e=x.value)==null?void 0:e.validate())||ee(b.value).then(i=>{i.data.success&&(y.success("添加成功！"),p.value=!1,m())})}function B(s){c.value=!0,w.value=`查看标签 ${s.labelName}`,ae(s.id).then(e=>{e.data.success&&(r.value=e.data.result)})}async function I(){var e;await((e=L.value)==null?void 0:e.validate())||te(r.value).then(i=>{i.data.success&&(y.success("编辑成功！"),c.value=!1,m())})}function D(s){E.confirm({title:"确认删除",content:`您确认要删除${s.labelName}用户标签?`,alignCenter:!1,onOk:async()=>{(await le(s.id)).data.success&&(y.success("删除成功"),m())}})}function m(){oe(u.value).then(s=>{s.data.success&&(_.value=s.data.result,N.value=s.data.result.records)})}return Q(()=>{m()}),G(()=>[u],()=>{m()},{deep:!0}),(s,e)=>{const i=d("a-button"),T=d("a-space"),$=d("a-col"),P=d("a-row"),O=d("a-pagination"),g=d("a-input"),v=d("a-form-item"),V=d("a-form"),C=d("a-modal"),A=d("a-card");return H(),J(A,{class:"general-card",title:"会员标签",bordered:!1},{default:o(()=>[t(a(ne),{columns:S,onReset:e[0]||(e[0]=l=>{u.value={...a(u),...l}}),onSearch:e[1]||(e[1]=l=>{u.value={...a(u),...l}})}),t(P,{style:{"margin-bottom":"16px"}},{default:o(()=>[t($,{span:16},{default:o(()=>[t(T,null,{default:o(()=>[t(i,{type:"primary",onClick:F},{default:o(()=>e[9]||(e[9]=[f(" 添加会员标签 ")])),_:1})]),_:1})]),_:1})]),_:1}),t(a(de),{"data-list":a(N),columns:U,methods:h,bordered:!0,"enable-pagination":!1},{editor:o(({data:l})=>[t(i,{type:"text",status:"warning",onClick:j=>B(l)},{default:o(()=>e[10]||(e[10]=[f(" 编辑 ")])),_:2},1032,["onClick"])]),delete:o(({data:l})=>[t(i,{type:"text",status:"danger",onClick:j=>D(l)},{default:o(()=>e[11]||(e[11]=[f(" 删除 ")])),_:2},1032,["onClick"])]),_:1},8,["data-list"]),K("div",ie,[t(O,{total:a(_).total,current:a(_).number,"page-size":a(_).size,"show-page-size":"",onChange:e[2]||(e[2]=l=>{a(u).pageNumber=l,m()}),onPageSizeChange:e[3]||(e[3]=l=>{a(u).pageSize=l,m()})},null,8,["total","current","page-size"])]),t(C,{visible:a(p),"onUpdate:visible":e[5]||(e[5]=l=>R(p)?p.value=l:null),footer:!1},{title:o(()=>e[12]||(e[12]=[f(" 添加会员标签 ")])),default:o(()=>[t(V,{ref_key:"updateLabelFormRef",ref:x,model:a(b),onSubmit:z},{default:o(()=>[t(v,{field:"labelName",label:"会员标签",rules:[a(M)]},{default:o(()=>[t(g,{modelValue:a(b).labelName,"onUpdate:modelValue":e[4]||(e[4]=l=>a(b).labelName=l),style:{width:"300px"},placeholder:"请输入标签名称"},null,8,["modelValue"])]),_:1},8,["rules"]),t(v,{label:"操作"},{default:o(()=>[t(i,{"html-type":"submit",type:"primary"},{default:o(()=>e[13]||(e[13]=[f(" 保存 ")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"]),t(C,{visible:a(c),"onUpdate:visible":e[8]||(e[8]=l=>R(c)?c.value=l:null),footer:!1},{title:o(()=>[f(W(a(w)),1)]),default:o(()=>[t(V,{ref_key:"editLabelFormRef",ref:L,model:a(r),onSubmit:I},{default:o(()=>[X(t(g,{modelValue:a(r).id,"onUpdate:modelValue":e[6]||(e[6]=l=>a(r).id=l),style:{width:"300px"}},null,8,["modelValue"]),[[Y,!1]]),t(v,{field:"labelName",label:"会员标签",rules:[a(M)]},{default:o(()=>[t(g,{modelValue:a(r).labelName,"onUpdate:modelValue":e[7]||(e[7]=l=>a(r).labelName=l),style:{width:"300px"},placeholder:"请输入标签名称"},null,8,["modelValue"])]),_:1},8,["rules"]),t(v,{label:"操作"},{default:o(()=>[t(i,{"html-type":"submit",type:"primary"},{default:o(()=>e[14]||(e[14]=[f(" 保存 ")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])]),_:1})}}}),_e=Z(ue,[["__scopeId","data-v-2ac8d7b8"]]);export{_e as default};
