import{o as v,x as w,y as D}from"./operation-CQQGRn8-.js";import{u as P}from"./useCurrentInstance-BLlvmEjv.js";import{I as _}from"./tools-BfzgO_2s.js";import{U as M,V}from"./dist-PezRi_EG.js";import{d as L,n as O,r as k,b as l,o as m,j as c,w as a,e as r,u as n,f as d,M as x}from"./index-C4AMdMz2.js";const q=L({__name:"index",setup(h){var f;const C=O(),i=k(),p=(f=P().globalProperties)==null?void 0:f.$modal,y=[{label:"会员名称",model:"memberName",disabled:!1,input:!0},{label:"状态",model:"distributionStatus",disabled:!1,select:{options:_}}],g=[{title:"会员名称",dataIndex:"memberName"},{title:"推广单数",dataIndex:"distributionOrderCount"},{title:"分销金额",dataIndex:"rebateTotal",currency:!0},{title:"状态",dataIndex:"distributionStatus",slot:!0,slotData:{badge:_}}],S={title:"操作",width:300,methods:[{slot:!0,slotTemplate:"btnList"}]},o=k({status:"PASS",sort:"",order:""});function I(s){C.push({name:"sub-merchant-information",query:{id:s.id,name:s.name,type:"shop"}})}function N(s){p.confirm({title:"提示",content:`您确认要清退 ${s.memberName}?`,alignCenter:!1,onOk:async()=>{(await w(s.id)).data.success&&(x.success("操作成功！"),i.value.init())}})}function R(s){p.confirm({title:"提示",content:`您确认要恢复 ${s.memberName}?`,alignCenter:!1,onOk:async()=>{(await D(s.id)).data.success&&(x.success("操作成功！"),i.value.init())}})}return(s,e)=>{const u=l("a-button"),T=l("a-space"),$=l("a-card");return m(),c($,{class:"general-card",title:"分销员",bordered:!1},{default:a(()=>[r(n(M),{columns:y,onReset:e[0]||(e[0]=t=>{o.value={...n(o),...t}}),onSearch:e[1]||(e[1]=t=>{o.value={...n(o),...t}})}),r(n(V),{ref_key:"tablePageRef",ref:i,columns:g,methods:S,api:n(v),"api-params":n(o),bordered:!0},{btnList:a(({data:t})=>[r(T,null,{default:a(()=>[r(u,{type:"text",onClick:b=>I(t)},{default:a(()=>e[2]||(e[2]=[d(" 结算设置 ")])),_:2},1032,["onClick"]),(t==null?void 0:t.distributionStatus)!=="RETREAT"?(m(),c(u,{key:0,type:"text",status:"danger",onClick:b=>N(t)},{default:a(()=>e[3]||(e[3]=[d(" 清退 ")])),_:2},1032,["onClick"])):(m(),c(u,{key:1,type:"text",status:"success",onClick:b=>R(t)},{default:a(()=>e[4]||(e[4]=[d(" 恢复 ")])),_:2},1032,["onClick"]))]),_:2},1024)]),_:1},8,["api","api-params"])]),_:1})}}});export{q as default};
