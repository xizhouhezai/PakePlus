import{d as B,r as f,b as a,o as v,c as k,k as n,C as c,e as i,w as l,s as S,Z as V,M as E,_ as N}from"./index-C4AMdMz2.js";import{d as O}from"./index--a7kHzzJ.js";import{u as h}from"./useCurrentInstance-BLlvmEjv.js";const F=["src"],I={key:0,class:"preview"},j=B({__name:"extra",props:{res:{type:Object,required:!0},checked:{type:Boolean,default:!1}},emits:["reload"],setup(d,{emit:w}){var u;const t=d,_=w,C=f(!1),p=f({}),x=(u=h().globalProperties)==null?void 0:u.$modal;function b(o,e){o.stopPropagation(),p.value=e,p.value.msize=`${(e.fileSize*1/(1024*1024)).toFixed(2)}MB`,C.value=!0}function y(o){o.isShowPreview=!0}function g(o){o.isShowPreview=!1}function P(o,e){o.stopPropagation(),window.open(`${e.url}?attname=&response-content-type=application/octet-stream`)}function $(o,e){o.stopPropagation(),x.confirm({title:"确认删除",content:`您确认要删除文件${e.name}?`,alignCenter:!1,onOk:async()=>{(await O(e.id)).data.success&&(E.success(`删除文件${e.name}成功`),_("reload"))}})}return(o,e)=>{const m=a("icon-cloud-download"),r=a("a-tooltip"),z=a("icon-delete"),M=a("icon-eye");return v(),k("div",null,[n("div",{class:V(["card",{"custom-checkbox-card-checked":d.checked}]),onMouseover:e[3]||(e[3]=s=>y(t.res)),onMouseleave:e[4]||(e[4]=s=>g(t.res))},[e[5]||(e[5]=n("div",{class:"custom-checkbox-card-mask"},[n("div",{class:"custom-checkbox-card-mask-dot"})],-1)),n("img",{src:t.res.url,alt:""},null,8,F),t.res.isShowPreview?(v(),k("div",I,[n("div",{onClick:e[0]||(e[0]=c(s=>P(s,t.res),["prevent"]))},[i(r,{content:"下载"},{default:l(()=>[i(m,{size:"16"})]),_:1})]),n("div",{onClick:e[1]||(e[1]=c(s=>$(s,t.res),["prevent"]))},[i(r,{content:"删除"},{default:l(()=>[i(z,{size:"16"})]),_:1})]),n("div",{onClick:e[2]||(e[2]=c(s=>b(s,t.res),["prevent"]))},[i(r,{content:"预览"},{default:l(()=>[i(M,{size:"16"})]),_:1})])])):S("",!0)],34)])}}}),Z=N(j,[["__scopeId","data-v-a8b61b75"]]);export{Z as default};
