import{y as H,z as U,A as j,B as z}from"./order-HsmDfkng.js";import{d as F,p as G,n as J,r as m,h as $,b as T,o as d,c as o,e as c,w as f,k as t,t as s,u as n,s as a,F as x,i as A,f as g,j as E,M as b,_ as K}from"./index-C4AMdMz2.js";import{u as Q}from"./index-tA6dL0mr.js";import"./index-RdD_tp-0.js";const X={class:"search"},Y={class:"main-content"},Z={class:"div-flow-left"},h={class:"div-form-default"},tt={key:0},lt={key:1},nt={key:2},et={key:3},dt={key:4},ot={key:5},st={key:0},at={key:1},it={flex:"","gap-4px":"","flex-a-c":""},ut={key:0,class:"div-form-default"},rt={key:0},mt={key:1},pt=["src"],ft={class:"div-form-default"},gt={class:"div-content"},vt={key:0},yt={key:1},Ct={key:2},kt={key:0},ct={style:{display:"flex","align-items":"center"}},bt={key:1,class:"div-form-default"},_t={key:2,class:"div-form-default"},St={key:0},Tt={style:{"text-align":"right",display:"flex","justify-content":"space-between"}},Et={class:"div-flow-right"},It={class:"div-form-default"},xt=["src"],At={style:{"font-size":"12px"}},Nt={class:"div-form-default"},Lt={class:"div-form-default"},wt=F({__name:"orderComplaintDetail",setup(Rt){const w=Q(),I=G(),R=J(),e=m({goodsName:"",complainStatus:"",createTime:"",complainTopic:"",content:"",appealContent:"",appealTime:"",appealImagesList:[],orderComplaintCommunications:[],id:""}),p=m({content:"",complainId:""}),_=m([]),M=m([]),r=m(!1),v=m(!1),y=m({arbitrationResult:""});async function S(){const u=await H(I.query.id);u.data.code===200&&(e.value=u.data.result,_.value=(u.data.result.images||"").split(","),M.value=(u.data.result.appealImages||"").split(","))}$(async()=>{S()});function P(){if(p.value.content===""){b.error("请填写对话内容");return}p.value.complainId=I.query.id,U(p.value).then(u=>{r.value=!1,u.data.code===200&&(b.success("对话成功"),p.value.content="",S())})}function O(){v.value=!0}function V(){if(y.value.arbitrationResult===""){b.error("请填写仲裁内容");return}j(I.query.id,y.value).then(u=>{r.value=!1,u.data.code===200&&(b.success("仲裁成功"),y.value.arbitrationResult="",S())}),v.value=!1}function B(){const u={complainStatus:"WAIT_APPEAL",complainId:e.value.id};z(u).then(l=>{l.data.code===200&&(b.success("操作成功"),S())})}function D(){R.push({name:"order-complaint"})}return(u,l)=>{const W=T("a-image"),N=T("a-textarea"),C=T("a-button"),q=T("a-card");return d(),o("div",X,[c(q,{class:"general-card",style:{paddingTop:"5px"},bordered:!1},{default:f(()=>{var L;return[t("div",Y,[t("div",Z,[t("div",h,[l[10]||(l[10]=t("h4",null,"投诉信息",-1)),t("dl",null,[l[3]||(l[3]=t("dt",null,"投诉商品",-1)),t("dd",null,s(n(e).goodsName),1)]),t("dl",null,[l[4]||(l[4]=t("dt",null,"投诉状态",-1)),n(e).complainStatus==="NEW"?(d(),o("dd",tt," 新投诉 ")):a("",!0),n(e).complainStatus==="CANCEL"?(d(),o("dd",lt," 已撤销 ")):a("",!0),n(e).complainStatus==="WAIT_APPEAL"?(d(),o("dd",nt," 待申诉 ")):a("",!0),n(e).complainStatus==="COMMUNICATION"?(d(),o("dd",et," 对话中 ")):a("",!0),n(e).complainStatus==="WAIT_ARBITRATION"?(d(),o("dd",dt," 等待仲裁 ")):a("",!0),n(e).complainStatus==="COMPLETE"?(d(),o("dd",ot," 已完成 ")):a("",!0)]),t("dl",null,[l[5]||(l[5]=t("dt",null,"投诉时间",-1)),t("dd",null,s(n(e).createTime),1)]),t("dl",null,[l[6]||(l[6]=t("dt",null,"投诉时间",-1)),t("dd",null,s(n(e).createTime),1)]),t("dl",null,[l[7]||(l[7]=t("dt",null,"投诉主题",-1)),t("dd",null,s(n(e).complainTopic),1)]),t("dl",null,[l[8]||(l[8]=t("dt",null,"投诉内容",-1)),t("dd",null,s(n(e).content),1)]),t("dl",null,[l[9]||(l[9]=t("dt",null,"投诉凭证",-1)),!n(_)||n(_).length===0?(d(),o("dd",st," 暂无投诉凭证 ")):(d(),o("dd",at,[t("div",it,[(d(!0),o(x,null,A(n(_),(i,k)=>(d(),o("div",{key:k},[i?(d(),E(W,{key:0,width:"150",src:i},null,8,["src"])):a("",!0)]))),128))])]))])]),n(e).appealContent?(d(),o("div",ut,[l[14]||(l[14]=t("h4",null,"商家申诉信息",-1)),t("dl",null,[l[11]||(l[11]=t("dt",null,"申诉时间",-1)),t("dd",null,s(n(e).appealTime),1)]),t("dl",null,[l[12]||(l[12]=t("dt",null,"申诉内容",-1)),t("dd",null,s(n(e).appealContent),1)]),t("dl",null,[l[13]||(l[13]=t("dt",null,"申诉凭证",-1)),n(e).appealImagesList&&((L=n(e))==null?void 0:L.appealImagesList.length)===0?(d(),o("dd",rt," 暂无申诉凭证 ")):(d(),o("dd",mt,[(d(!0),o(x,null,A(n(e).appealImagesList,(i,k)=>(d(),o("div",{key:k,class:"div-img"},[t("img",{class:"complain-img",src:i},null,8,pt)]))),128))]))])])):a("",!0),t("div",ft,[l[18]||(l[18]=t("h4",null,"对话详情",-1)),t("dl",null,[l[15]||(l[15]=t("dt",null,"对话记录",-1)),t("dd",null,[t("div",gt,[(d(!0),o(x,null,A(n(e).orderComplaintCommunications,(i,k)=>(d(),o("p",{key:k},[i.owner==="STORE"?(d(),o("span",vt,"商家["+s(i.createTime)+"]",1)):a("",!0),i.owner==="MEMBER"?(d(),o("span",yt,"买家["+s(i.createTime)+"]",1)):a("",!0),i.owner==="MANAGER"?(d(),o("span",Ct,"平台["+s(i.createTime)+"]",1)):a("",!0),g(" "+s(i.content),1)]))),128))])])]),n(e).complainStatus!=="COMPLETE"?(d(),o("dl",kt,[l[17]||(l[17]=t("dt",null,"发送对话",-1)),t("dd",null,[t("div",ct,[c(N,{modelValue:n(p).content,"onUpdate:modelValue":l[0]||(l[0]=i=>n(p).content=i),"allow-clear":"","max-length":200},null,8,["modelValue"]),c(C,{type:"primary",loading:n(r),disabled:n(e).complainStatus==="CANCEL",style:{"margin-left":"5px"},onClick:P},{default:f(()=>l[16]||(l[16]=[g(" 回复 ")])),_:1},8,["loading","disabled"])])])])):a("",!0)]),n(e).complainStatus==="COMPLETE"?(d(),o("div",bt,[l[20]||(l[20]=t("h4",null,"仲裁结果",-1)),t("dl",null,[l[19]||(l[19]=t("dt",null,"仲裁意见",-1)),t("dd",null,s(n(e).arbitrationResult),1)])])):a("",!0),n(e).complainStatus!=="COMPLETE"?(d(),o("div",_t,[l[25]||(l[25]=t("h4",null,"平台仲裁",-1)),n(v)===!0?(d(),o("dl",St,[l[21]||(l[21]=t("dt",null,"仲裁",-1)),t("dd",null,[c(N,{modelValue:n(y).arbitrationResult,"onUpdate:modelValue":l[1]||(l[1]=i=>n(y).arbitrationResult=i),"allow-clear":"","max-length":200},null,8,["modelValue"])])])):a("",!0),t("dl",null,[t("dd",Tt,[n(v)===!1?(d(),E(C,{key:0,type:"outline",status:"danger",disabled:n(e).complainStatus==="CANCEL",loading:n(r),onClick:O},{default:f(()=>l[22]||(l[22]=[g(" 直接仲裁结束投诉流程 ")])),_:1},8,["disabled","loading"])):a("",!0),n(e).complainStatus==="NEW"?(d(),E(C,{key:1,loading:n(r),disabled:n(e).complainStatus==="CANCEL",type:"outline",status:"danger",onClick:B},{default:f(()=>l[23]||(l[23]=[g(" 交由商家申诉 ")])),_:1},8,["loading","disabled"])):a("",!0),n(v)===!0?(d(),E(C,{key:2,type:"outline",status:"danger",disabled:n(e).complainStatus==="CANCEL",loading:n(r),onClick:V},{default:f(()=>l[24]||(l[24]=[g(" 提交仲裁 ")])),_:1},8,["disabled","loading"])):a("",!0)])])])):a("",!0),c(C,{loading:n(r),style:{"margin-left":"5px","margin-top":"20px"},onClick:D},{default:f(()=>l[26]||(l[26]=[g(" 返回列表 ")])),_:1},8,["loading"])]),l[37]||(l[37]=t("div",{class:"div-flow-center"},null,-1)),t("div",Et,[t("div",It,[l[28]||(l[28]=t("h4",null,"相关商品交易信息",-1)),t("dl",null,[t("dt",null,[t("img",{src:n(e).goodsImage,width:"60",height:"60"},null,8,xt)]),t("dd",null,[t("a",{class:"Hyperlink",onClick:l[2]||(l[2]=i=>n(w).viewGoodsDetail(n(e).goodsId,n(e).skuId))},s(n(e).goodsName),1),l[27]||(l[27]=t("br",null,null,-1)),t("span",At,"￥"+s(n(e).goodsPrice)+" * "+s(n(e).num)+"(数量)",1)])])]),t("div",Nt,[l[32]||(l[32]=t("h4",null,"订单相关信息",-1)),t("dl",null,[l[29]||(l[29]=t("dt",null," 订单编号 ",-1)),t("dd",null,s(n(e).orderSn),1)]),t("dl",null,[l[30]||(l[30]=t("dt",null," 下单时间 ",-1)),t("dd",null,s(n(e).createTime),1)]),t("dl",null,[l[31]||(l[31]=t("dt",null," 订单金额 ",-1)),t("dd",null,s(n(e).orderPrice),1)])]),t("div",Lt,[l[36]||(l[36]=t("h4",null,"收件人信息",-1)),t("dl",null,[l[33]||(l[33]=t("dt",null," 收货人 ",-1)),t("dd",null,s(n(e).consigneeName),1)]),t("dl",null,[l[34]||(l[34]=t("dt",null," 收货地址 ",-1)),t("dd",null,s(n(e).consigneeAddressPath),1)]),t("dl",null,[l[35]||(l[35]=t("dt",null," 收货人手机 ",-1)),t("dd",null,s(n(e).consigneeMobile),1)])])])])]}),_:1})])}}}),Bt=K(wt,[["__scopeId","data-v-315d631f"]]);export{Bt as default};
