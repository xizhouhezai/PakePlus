import{k as I,l as O,m as P,n as T}from"./operation-CQQGRn8-.js";import{u as j}from"./useCurrentInstance-BLlvmEjv.js";import{R as B,V as S}from"./validator-B8pIxTAL.js";import{V as U}from"./dist-PezRi_EG.js";import{d as W,r as c,a as $,b as s,o as L,j as N,w as o,e as n,f as u,u as l,t as F,M as g}from"./index-C4AMdMz2.js";const K=W({__name:"index",setup(H){var _;const i=c(),y=(_=j().globalProperties)==null?void 0:_.$modal,p=c(),m=c(""),x=[{title:"自定义分词",dataIndex:"name"},{title:"创建时间",dataIndex:"createTime"},{title:"更新时间",dataIndex:"updateTime"},{title:"操作人",dataIndex:"createBy"}],v={title:"操作",width:250,fixed:"right",methods:[{title:"修改",callback:"editor",type:"text",status:"warning"},{title:"删除",callback:"delete",type:"text",status:"danger"}]},e=$({enableAddModal:!1,formLoading:!1,fid:"",form:{name:"",id:""}});function w(){e.enableAddModal=!0,m.value="添加",e.fid="",Object.keys(e.form).forEach(a=>{e.form[a]=""})}async function C(){var t;if(!await((t=p.value)==null?void 0:t.validate())){let d;const r={name:e.form.name,id:e.form.id};e.fid?d=await P(r):d=await O(r),d.data.success&&(g.success(`${e.fid?"修改":"添加"}成功!`),e.enableAddModal=!1,i.value.init())}}function h(a){m.value="编辑",a&&(Object.keys(a.record).forEach(t=>{e.form.hasOwnProperty(t)?e.form[t]=a.record[t]:e.form[t]=""}),e.fid=a.record.id,e.enableAddModal=!0)}function A(a){y.confirm({title:"确认删除",content:`您确认要删除${a.record.name}?`,alignCenter:!1,onOk:async()=>{(await T(a.record.id)).data.success&&(g.success("删除成功"),i.value.init())}})}return(a,t)=>{const d=s("a-button"),r=s("a-space"),k=s("a-col"),M=s("a-row"),R=s("a-input"),b=s("a-form-item"),V=s("a-form"),E=s("a-modal"),D=s("a-card");return L(),N(D,{class:"general-card",title:"ES分词",bordered:!1},{default:o(()=>[n(M,{style:{"margin-bottom":"16px"}},{default:o(()=>[n(k,{span:16},{default:o(()=>[n(r,null,{default:o(()=>[n(d,{type:"primary",onClick:w},{default:o(()=>t[2]||(t[2]=[u(" 添加 ")])),_:1})]),_:1})]),_:1})]),_:1}),n(l(U),{ref_key:"tablePageRef",ref:i,columns:x,methods:v,api:l(I),bordered:!0,onEditor:h,onDelete:A},null,8,["api"]),n(E,{visible:l(e).enableAddModal,"onUpdate:visible":t[1]||(t[1]=f=>l(e).enableAddModal=f),"align-center":!1,footer:!1},{title:o(()=>[u(F(l(m)),1)]),default:o(()=>[n(V,{ref_key:"formRef",ref:p,model:l(e).form,onSubmit:C},{default:o(()=>[n(b,{field:"name",label:"自定义分词",rules:[l(B),l(S)],"validate-trigger":["change"]},{default:o(()=>[n(R,{modelValue:l(e).form.name,"onUpdate:modelValue":t[0]||(t[0]=f=>l(e).form.name=f)},null,8,["modelValue"])]),_:1},8,["rules"]),n(b,{label:"操作"},{default:o(()=>[n(d,{loading:l(e).formLoading,"html-type":"submit",type:"primary"},{default:o(()=>t[3]||(t[3]=[u(" 保存 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])]),_:1})}}});export{K as default};
