import{K as B,C as E,L}from"./promotion-ChRoyrm_.js";import{u as M,d as V}from"./filters-D05Q2eUM.js";import{R as c}from"./validator-B8pIxTAL.js";import{d as q,r as f,n as D,p as F,h as H,b as d,o as _,c as w,e as a,w as s,u as t,k as u,t as r,F as K,i as j,f as y,M as Q,j as W,_ as $}from"./index-C4AMdMz2.js";const z={class:"base-info-item"},A={class:"footerButton"},J=q({__name:"points-goods-edit",setup(O){const v=f(),k=D(),p=f(!1),b=f([]),C=F(),o=f({promotionName:"",applyEndTime:"",startTime:"",seckillPeriod:[],seckillRule:"",endTime:"",goodsSku:{goodsName:"",id:"",storeName:"",price:0,quantity:""},promotionStatus:"NEW",settlementPrice:0,pointsGoodsCategoryId:"",pointsGoodsCategoryName:"",activeStock:0,points:0,rangeTime:[]});function S(i,e){o.value.pointsGoodsCategoryId=i,o.value.pointsGoodsCategoryName=e}async function x(){const i=await B(C.query.id);if(i.data.success){const e=i.data.result;o.value=e,e.rangeTime=[],e.startTime&&e.endTime&&e.rangeTime.push(e.startTime.substring(0,10),e.endTime.substring(0,10))}}async function G(){const i=await E();i.data.success&&(b.value=i.data.result.records)}H(()=>{G(),C.query.id&&x()});async function N(){var e;if(!await((e=v.value)==null?void 0:e.validate())){const[n,m]=o.value.rangeTime;o.value.startTime=V(n),o.value.endTime=V(m),p.value=!0,L(o.value).then(g=>{p.value=!1,g.data.success&&(p.value=!1,Q.success("积分商品修改成功"),k.push({name:"integrate-goods"}))})}}function P(){k.push({name:"integrate-goods"})}return(i,e)=>{const n=d("a-form-item"),m=d("a-input-number"),g=d("a-option"),h=d("a-select"),I=d("a-range-picker"),T=d("a-button"),R=d("a-form"),U=d("a-card");return _(),w("div",null,[a(U,{style:{width:"100%"}},{default:s(()=>[a(R,{ref_key:"formRef",ref:v,model:t(o),style:{width:"100%"}},{default:s(()=>[u("div",z,[e[7]||(e[7]=u("h4",null,"积分商品信息",-1)),a(n,{label:"商品名称"},{default:s(()=>[u("div",null,r(t(o).goodsSku.goodsName),1)]),_:1}),a(n,{label:"SKU编码"},{default:s(()=>[u("div",null,r(t(o).goodsSku.id),1)]),_:1}),a(n,{label:"店铺名称"},{default:s(()=>[u("div",null,r(t(o).goodsSku.storeName),1)]),_:1}),a(n,{label:"商品价格"},{default:s(()=>[u("div",null,r(t(M)(t(o).goodsSku.price,"￥")),1)]),_:1}),a(n,{label:"库存"},{default:s(()=>[u("div",null,r(t(o).goodsSku.quantity),1)]),_:1}),a(n,{field:"settlementPrice",label:"结算价格",rules:[t(c)]},{default:s(()=>[a(m,{modelValue:t(o).settlementPrice,"onUpdate:modelValue":e[0]||(e[0]=l=>t(o).settlementPrice=l),style:{width:"280px"},placeholder:"请填写结算价格",class:"input-demo","allow-clear":""},null,8,["modelValue"])]),_:1},8,["rules"]),a(n,{field:"pointsGoodsCategoryId",label:"分类",rules:[t(c)]},{default:s(()=>[a(h,{modelValue:t(o).pointsGoodsCategoryId,"onUpdate:modelValue":e[1]||(e[1]=l=>t(o).pointsGoodsCategoryId=l),style:{width:"280px"}},{default:s(()=>[(_(!0),w(K,null,j(t(b),l=>(_(),W(g,{key:l.id,value:l.id,onClick:X=>S(l.id,l.name)},{default:s(()=>[y(r(l.name),1)]),_:2},1032,["value","onClick"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["rules"]),a(n,{field:"activeStock",label:"活动库存",rules:[t(c)]},{default:s(()=>[a(m,{modelValue:t(o).activeStock,"onUpdate:modelValue":e[2]||(e[2]=l=>t(o).activeStock=l),style:{width:"280px"},placeholder:"请填写活动库存",class:"input-demo","allow-clear":""},null,8,["modelValue"])]),_:1},8,["rules"]),a(n,{field:"points",label:"兑换积分",rules:[t(c)]},{default:s(()=>[a(m,{modelValue:t(o).points,"onUpdate:modelValue":e[3]||(e[3]=l=>t(o).points=l),style:{width:"280px"},placeholder:"请填写兑换积分",class:"input-demo","allow-clear":""},null,8,["modelValue"])]),_:1},8,["rules"]),a(n,{field:"points",label:"活动开始时间",rules:[t(c)]},{default:s(()=>[a(I,{modelValue:t(o).rangeTime,"onUpdate:modelValue":e[4]||(e[4]=l=>t(o).rangeTime=l),style:{width:"254px","margin-bottom":"20px"}},null,8,["modelValue"])]),_:1},8,["rules"]),u("div",A,[a(T,{style:{"margin-right":"5px"},onClick:P},{default:s(()=>e[5]||(e[5]=[y(" 返回 ")])),_:1}),a(T,{type:"primary",loading:t(p),onClick:N},{default:s(()=>e[6]||(e[6]=[y(" 保存 ")])),_:1},8,["loading"])])])]),_:1},8,["model"])]),_:1})])}}}),oe=$(J,[["__scopeId","data-v-73c6c884"]]);export{oe as default};
