import{u as B}from"./index--a7kHzzJ.js";import{_ as S}from"./index.vue_vue_type_script_setup_true_lang-DsrWKjKu.js";import{d as T,r as a,J as U,E as $,b as p,o as h,c as D,e as l,w as o,k as m,u as n,f as c,q as J,M as g,_ as G}from"./index-C4AMdMz2.js";import"./index-CzBKN9cw.js";import"./useCurrentInstance-BLlvmEjv.js";import"./validator-B8pIxTAL.js";import"./dist-PezRi_EG.js";import"./extra-5DUayDl9.js";const H=T({__name:"Supplementarymaterials",props:{submitFrom:{type:Object,default:()=>{}},verifyDetail:{type:Boolean,default:!1}},setup(A){const w=A,E=a(["jpg","jpeg","png","gif","bmp"]),y=a(U.getAccessToken()||""),s=a({account_info:{}}),d=a([]),f=a([]),r=a(!1),_=a(""),C=a(0),v=a();function q(i,e){_.value=i,C.value=e,r.value=!0}function F(i){v.value=[],i.forEach(e=>{v.value.push({url:e.url})})}function R(){r.value=!1,_.value==="business_addition_pics"?(v.value.forEach(i=>{d.value.push({url:i.url})}),s.value.business_addition_pics=d.value.map(i=>i.url).join(",")):_.value==="qualifications"&&(v.value.forEach(i=>{f.value.push({url:i.url})}),s.value.qualifications=f.value.map(i=>i.url).join(","))}const I=i=>new Promise(e=>{d.value=d.value.filter(t=>t.url!==i.url),typeof s.value.business_addition_pics=="string"?s.value.business_addition_pics=[...s.value.business_addition_pics.split(",")].filter(t=>t!==i.url).join(","):s.value.business_addition_pics=s.value.business_addition_pics.filter(t=>t!==i.url).join(","),e(!0)}),M=i=>new Promise(e=>{f.value=f.value.filter(t=>t.url!==i.url),typeof s.value.qualifications=="string"?s.value.qualifications=[...s.value.qualifications.split(",")].filter(t=>t!==i.url).join(","):s.value.qualifications=s.value.qualifications.filter(t=>t!==i.url).join(","),e(!0)});function k(){g.error("上传失败")}const x=i=>new Promise((e,t)=>{E.value.includes(i.name.split(".")[i.name.split(".").length-1])?Number((i.size/1024).toFixed(0))>1024?(t(new Error("上传失败")),g.error("所选文件大小过大，不得超过1M")):e(!0):(t(new Error("上传失败")),g.error("请选择 .jpg .jpeg .png .gif .bmp格式文件"))});function P(){window.open("https://kf.qq.com/faq/220228qEfuAz220228bMFji6.html")}return $(()=>w.submitFrom,i=>{if(s.value=i,i.business_addition_pics){let e=i.business_addition_pics;typeof i.business_addition_pics=="string"&&(e=[...i.business_addition_pics.split(",")]),d.value=e.map(t=>({url:t}))}else s.value.business_addition_pics="";if(i.qualifications){let e=i.qualifications;typeof i.qualifications=="string"&&(e=[...i.qualifications.split(",")]),f.value=e.map(t=>({url:t}))}else s.value.qualifications=""},{immediate:!0,deep:!0}),(i,e)=>{const t=p("a-upload"),j=p("a-button"),b=p("a-form-item"),V=p("a-link"),z=p("a-textarea"),N=p("a-form"),O=p("a-modal");return h(),D("div",null,[l(N,{model:n(s),disabled:w.verifyDetail},{default:o(()=>[l(b,{label:"补充材料"},{extra:o(()=>e[7]||(e[7]=[m("div",null,"最多可上传五张照片",-1)])),default:o(()=>[m("div",null,[l(t,{"list-type":"picture-card",headers:{accessToken:n(y)},action:n(B),style:{marginRight:"10px"},"on-error":k,limit:5,"file-list":n(d),"image-preview":"",onBeforeUpload:x,onBeforeRemove:I},null,8,["headers","action","file-list"]),l(j,{type:"primary",onClick:e[0]||(e[0]=u=>q("business_addition_pics"))},{default:o(()=>e[6]||(e[6]=[c(" 上传图片 ")])),_:1})])]),_:1}),l(b,{label:"特殊资质图片"},{extra:o(()=>[m("div",null,[m("p",null,[e[10]||(e[10]=c(" 1、根据所属行业的特殊资质要求提供，详情查看")),l(V,{hoverable:!1,style:{"font-size":"12px"},onClick:e[2]||(e[2]=u=>P())},{default:o(()=>e[9]||(e[9]=[c(" 费率结算规则对照表 ")])),_:1}),e[11]||(e[11]=c("。 "))]),e[12]||(e[12]=m("p",null,"2、最多可上传5张照片，请填写通过图片上传API接口预先上传图片生成好的MediaID",-1))])]),default:o(()=>[m("div",null,[l(t,{"list-type":"picture-card",headers:{accessToken:n(y)},action:n(B),style:{marginRight:"10px"},"on-error":k,limit:5,"file-list":n(f),"image-preview":"",onBeforeUpload:x,onBeforeRemove:M},null,8,["headers","action","file-list"]),l(j,{type:"primary",onClick:e[1]||(e[1]=u=>q("qualifications"))},{default:o(()=>e[8]||(e[8]=[c(" 上传图片 ")])),_:1})])]),_:1}),l(b,{label:"补充说明"},{default:o(()=>[l(z,{modelValue:n(s).business_addition_desc,"onUpdate:modelValue":e[3]||(e[3]=u=>n(s).business_addition_desc=u),"allow-clear":"",style:{width:"700px"},"max-length":512,"show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","disabled"]),l(O,{visible:n(r),"onUpdate:visible":e[4]||(e[4]=u=>J(r)?r.value=u:null),width:1100,title:"oss资源管理",onOk:R,onCancel:e[5]||(e[5]=u=>r.value=!1)},{default:o(()=>[l(S,{initialize:n(r),onSelected:F},null,8,["initialize"])]),_:1},8,["visible"])])}}}),ie=G(H,[["__scopeId","data-v-5904e20b"]]);export{ie as default};
