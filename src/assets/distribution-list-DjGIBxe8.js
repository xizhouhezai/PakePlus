import{o as U,p as I,x as q,y as M}from"./operation-CQQGRn8-.js";import{u as j}from"./useCurrentInstance-BLlvmEjv.js";import{I as P}from"./tools-BfzgO_2s.js";import{U as z,V as F}from"./dist-PezRi_EG.js";import{d as Y,n as G,r as p,b,o as k,c as H,e as o,w as n,u as a,j as y,f as r,s as J,k as S,t as N,q as K,M as v}from"./index-C4AMdMz2.js";const et=Y({__name:"distribution-list",setup(Q){var w;const C=G(),l=p(!1),d=p(),m=p(),f=(w=j().globalProperties)==null?void 0:w.$modal,R=[{label:"会员昵称",model:"memberName",disabled:!1,input:!0},{label:"状态",model:"distributionStatus",disabled:!1,select:{options:P}}],_=[{title:"会员昵称",dataIndex:"memberName"},{title:"推广人数",dataIndex:"peopleNum",width:100},{title:"推广单数",dataIndex:"distributionOrderCount",width:100},{title:"推广订单金额",dataIndex:"distributionOrderPrice",currency:!0,width:100},{title:"冻结金额",dataIndex:"freezeAmount",currency:!0,width:100},{title:"已分账金额",dataIndex:"rebateTotal",currency:!0,width:100},{title:"申诉原因",dataIndex:"remark"},{title:"状态",dataIndex:"distributionStatus",slot:!0,slotData:{badge:P},width:100}],D={title:"操作",width:200,methods:[{slot:!0,slotTemplate:"btnList"}]};function x(){const s=d.value,t={memberIds:s.id,status:"PASS"};f.confirm({title:"确认审核",content:"您确认要通过审核?",alignCenter:!1,onOk:async()=>{(await I(s.id,t)).data.success&&(v.success("操作成功"),l.value=!1,m.value.init())}})}function g(){const s=d.value,t={memberIds:s.id,status:"REFUSE"};f.confirm({title:"确认审核",content:"您确认要拒绝？",alignCenter:!1,onOk:async()=>{(await I(s.id,t)).data.success&&(v.success("操作成功"),l.value=!1,m.value.init())}})}function $(s){C.push({name:"distribution-member",query:{id:s.id}})}function A(s){C.push({name:"group-list",query:{id:s.id}})}function L(s){l.value=!0,d.value=s}function E(s){f.confirm({title:"提示",content:`您确认要清退 ${s.memberName}?`,alignCenter:!1,onOk:async()=>{(await q(s.id)).data.success&&(v.success("操作成功！"),m.value.init())}})}function O(s){f.confirm({title:"提示",content:`您确认要恢复 ${s.memberName}?`,alignCenter:!1,onOk:async()=>{(await M(s.id)).data.success&&(v.success("操作成功！"),m.value.init())}})}const c=p({});return(s,t)=>{const i=b("a-button"),T=b("a-space"),V=b("a-card"),B=b("a-modal");return k(),H("div",null,[o(V,{class:"general-card",title:"分销列表",bordered:!1},{default:n(()=>[o(a(z),{columns:R,onReset:t[0]||(t[0]=e=>{c.value={...a(c),...e}}),onSearch:t[1]||(t[1]=e=>{c.value={...a(c),...e}})}),o(a(F),{ref_key:"tablePageRef",ref:m,columns:_,methods:D,api:a(U),"api-params":a(c),bordered:!0,onRefuse:g,onPass:x},{btnList:n(({data:e})=>[o(T,null,{default:n(()=>[(e==null?void 0:e.distributionStatus)==="APPLY"?(k(),y(i,{key:0,type:"text",status:"warning",onClick:u=>L(e)},{default:n(()=>t[3]||(t[3]=[r(" 审核 ")])),_:2},1032,["onClick"])):J("",!0),o(i,{type:"text",status:"warning",onClick:u=>$(e)},{default:n(()=>t[4]||(t[4]=[r(" 下级用户 ")])),_:2},1032,["onClick"]),o(i,{type:"text",onClick:u=>A(e)},{default:n(()=>t[5]||(t[5]=[r(" 团队列表 ")])),_:2},1032,["onClick"]),(e==null?void 0:e.distributionStatus)!=="RETREAT"&&(e==null?void 0:e.distributionStatus)!=="APPEAL"?(k(),y(i,{key:1,type:"text",status:"danger",onClick:u=>E(e)},{default:n(()=>t[6]||(t[6]=[r(" 清退 ")])),_:2},1032,["onClick"])):(k(),y(i,{key:2,type:"text",status:"success",onClick:u=>O(e)},{default:n(()=>t[7]||(t[7]=[r(" 恢复 ")])),_:2},1032,["onClick"]))]),_:2},1024)]),_:1},8,["api","api-params"])]),_:1}),o(B,{visible:a(l),"onUpdate:visible":t[2]||(t[2]=e=>K(l)?l.value=e:null),width:"600px"},{title:n(()=>t[8]||(t[8]=[r(" 审核内容 ")])),footer:n(()=>[o(i,{onClick:x},{default:n(()=>t[9]||(t[9]=[r(" 通过 ")])),_:1}),o(i,{status:"danger",type:"primary",onClick:g},{default:n(()=>t[10]||(t[10]=[r(" 拒绝 ")])),_:1})]),default:n(()=>{var e,u;return[S("div",null," 用户姓名："+N((e=a(d))==null?void 0:e.name),1),S("div",null," 用户身份证："+N((u=a(d))==null?void 0:u.idNumber),1)]}),_:1},8,["visible"])])}}});export{et as default};
