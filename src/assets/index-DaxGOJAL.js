import{g as le,J as ae,K as ne,L as ie}from"./member-B0DkAxtf.js";import{u as d}from"./filters-D05Q2eUM.js";import{R as J}from"./validator-B8pIxTAL.js";import{V as se}from"./dist-PezRi_EG.js";import{d as oe,n as de,r as p,E as re,h as ue,b as v,o as _,j,w as a,e as i,u as l,q as F,k as t,f as s,t as r,c as w,s as M,F as Q,i as z,M as G,_ as pe}from"./index-C4AMdMz2.js";const me={"p-16px":"","p-t-0":""},fe={flex:"","flex-j-sb":"","flex-a-c":""},ce={"text-21px":"",class:"price","font-bold":""},xe={"mt-20px":"","text-14px":"","font-bold":""},ve={"text-16px":"",class:"price"},_e={"text-16px":"",class:"price"},be={"text-16px":"",class:"price"},ye={"p-16px":"","p-t-0":""},we={flex:"","flex-j-sb":"","flex-a-c":""},he={"text-21px":"",class:"price","font-bold":""},ge={"mt-20px":"",flex:"","flex-a-c":"","text-14px":"","font-bold":""},Ie={flex:"","gap-10px":"","flex-a-c":""},ke={"text-16px":"",class:"price"},Pe={"text-16px":"",class:"price"},Re={"p-16px":"","p-t-0":""},Se={flex:"","flex-j-sb":"","flex-a-c":""},Ve={"text-21px":"",class:"price","font-bold":""},Te={"mt-20px":"",flex:"","flex-a-c":"","text-14px":"","font-bold":""},Ue={flex:"","gap-10px":"","flex-a-c":""},We={"text-16px":"",class:"price"},Ce={"text-16px":"",class:"price"},Ae={"text-16px":"",class:"price"},je={"p-16px":"","p-t-0":""},Fe={flex:"","flex-j-sb":"","flex-a-c":""},Me={"text-21px":"",class:"price","font-bold":""},Be={"p-16px":"","p-t-0":""},De={flex:"","flex-j-sb":"","flex-a-c":""},Ee={"text-21px":"",class:"price","font-bold":""},Ke={key:0,"px-16px":""},Le={key:0},Ne={key:0,style:{color:"green"}},Oe={key:1,style:{color:"red"}},qe=oe({__name:"index",setup(Je){const H=de(),U=p(!1),g=p("-1"),I=p({commission:{tab:"-11",columns:[{title:"时间",dataIndex:"createTime",width:200},{title:"金额",dataIndex:"money",slot:!0,slotTemplate:"money",width:120},{title:"变动日志",dataIndex:"detail",width:600}],apiParams:{userId:g.value},tabPane:{"-11":"余额佣金","-12":"微信佣金","-13":"线下佣金"}},recharge:{tab:"-21",columns:[{title:"时间",dataIndex:"createTime",width:200},{title:"金额",dataIndex:"money",slot:!0,slotTemplate:"money",width:120},{title:"变动日志",dataIndex:"detail",width:600}],apiParams:{userId:g.value},tabPane:{"-21":"微信充值","-22":"线下充值"}},commissionSubsidy:{tab:"-31",columns:[{title:"时间",dataIndex:"createTime",width:200},{title:"金额",dataIndex:"money",slot:!0,slotTemplate:"money",width:120},{title:"变动日志",dataIndex:"detail",width:600}],apiParams:{userId:g.value},tabPane:{"-31":"余额补差 ","-32":"微信补差","-33":"线下补差"}},offLinePay:{tab:"-2",columns:[{title:"时间",dataIndex:"createTime",width:200},{title:"金额",dataIndex:"money",slot:!0,slotTemplate:"money",width:120},{title:"变动日志",dataIndex:"detail",width:600}],apiParams:{userId:g.value},tabPane:{"-2":"线下支付"}},balance:{tab:"-1",columns:[{title:"时间",dataIndex:"createTime",width:200},{title:"金额",dataIndex:"money",slot:!0,slotTemplate:"money",width:120},{title:"变动日志",dataIndex:"detail",width:600}],apiParams:{userId:g.value},tabPane:{"-1":"余额托管代收"}}}),u=p({}),m=p("commission"),X=p(""),Y=p({userId:-1}),W=p(!1),B=p(""),S=p({price:0}),k=p(!1),D=p(""),V=p({price:0});async function E(){try{const b=await ae();b.data.success&&(u.value=b.data.result)}catch(b){console.warn(b)}C()}function C(b){m.value!=="4"&&(I.value[m.value].apiParams.userId=b||I.value[m.value].tab),U.value=!0}async function Z(){var e;await((e=B.value)==null?void 0:e.validate())||ne(S.value).then(x=>{x.data.success&&(G.success("创建充值记录成功！"),H.push({name:"recharge"}))})}function $(){Y.value.price=1,k.value=!0}async function ee(){var e;await((e=D.value)==null?void 0:e.validate())||ie(V.value).then(x=>{x.data.success&&(G.success("提现申请成功，关注提现状态！"),k.value=!1,E())})}return re(()=>m.value,()=>{U.value=!1,C()}),ue(()=>{E()}),(b,e)=>{const x=v("a-typography-title"),P=v("a-alert"),h=v("a-tab-pane"),A=v("a-button"),K=v("a-tabs"),L=v("a-input-number"),T=v("a-form-item"),N=v("a-form"),O=v("a-modal"),te=v("a-card");return _(),j(te,{class:"general-card",title:"平台余额",bordered:!1},{default:a(()=>[i(K,{"active-key":l(m),"onUpdate:activeKey":e[0]||(e[0]=n=>F(m)?m.value=n:null)},{default:a(()=>[i(h,{key:"commission",title:"平台佣金"},{default:a(()=>{var n,o,f,c,y,R,q;return[t("div",me,[t("div",fe,[t("div",null,[i(x,{heading:3},{default:a(()=>e[5]||(e[5]=[s(" 平台佣金 ")])),_:1}),t("div",ce," ￥"+r(l(d)((n=l(u))==null?void 0:n.commission)),1),t("div",xe,[e[6]||(e[6]=s(" 余额佣金：")),t("span",ve,"￥"+r(l(d)((f=(o=l(u))==null?void 0:o.commissionWallet)==null?void 0:f.balance)),1),e[7]||(e[7]=s("   微信佣金：")),t("span",_e,"￥"+r(l(d)(((y=(c=l(u))==null?void 0:c.commissionWechat)==null?void 0:y.balance)||0)),1),e[8]||(e[8]=s("   线下佣金：")),t("span",be,"￥"+r(l(d)(((q=(R=l(u))==null?void 0:R.commissionOffline)==null?void 0:q.balance)||0)),1)])]),t("div",null,[i(P,null,{default:a(()=>e[9]||(e[9]=[t("div",null," 平台佣金：平台已经获得的佣金统计，来源为商品分类设置的佣金比例，在订单结算时增加该字段。为所有佣金之合。 ",-1),t("div",null," 微信佣金：用户微信支付后，订单结算产生的佣金进行记录。 ",-1),t("div",null," 线下佣金：管理端，订单详情页面确认收款即为线下佣金，订单结算产生的佣金记录。 ",-1),t("div",null," 余额支付佣金：用户以余额方式进行支付，订单结算产生的佣金记录。 ",-1)])),_:1})])])])]}),_:1}),i(h,{key:"recharge",title:"用户充值"},{default:a(()=>{var n,o,f,c,y;return[t("div",ye,[t("div",we,[t("div",null,[i(x,{heading:3},{default:a(()=>e[10]||(e[10]=[s(" 用户充值 ")])),_:1}),t("div",he," ￥"+r(l(d)((n=l(u))==null?void 0:n.recharge))+" （充值总额） ",1),t("div",ge,[t("div",Ie,[t("div",null,[e[11]||(e[11]=s(" 微信充值：")),t("span",ke,"￥"+r(l(d)((f=(o=l(u))==null?void 0:o.rechargeWechat)==null?void 0:f.balance)),1)]),t("div",null,[e[12]||(e[12]=s(" 线下充值：")),t("span",Pe,"￥"+r(l(d)((y=(c=l(u))==null?void 0:c.rechargeOffline)==null?void 0:y.balance)),1)])])])]),t("div",null,[i(P,null,{default:a(()=>e[13]||(e[13]=[t("div",null,[t("div",null," 用户充值：所有用户（包含商家、平台）对自己的钱包进行充值。 "),t("div",null," 微信充值：用户微信充值产生的金额累加。")],-1)])),_:1})])])])]}),_:1}),i(h,{key:"commissionSubsidy",title:"平台补差"},{default:a(()=>{var n,o,f,c,y,R;return[t("div",Re,[t("div",Se,[t("div",null,[i(x,{heading:3},{default:a(()=>e[14]||(e[14]=[s(" 平台补差 ")])),_:1}),t("div",Ve," ￥"+r(l(d)(l(u).commissionSubsidy)),1),t("div",Te,[t("div",Ue,[t("div",null,[e[15]||(e[15]=s(" 微信补差:")),t("span",We,"￥"+r(l(d)((o=(n=l(u))==null?void 0:n.commissionWechatSubsidy)==null?void 0:o.balance)),1)]),t("div",null,[e[16]||(e[16]=s(" 余额补差:")),t("span",Ce,"￥"+r(l(d)((c=(f=l(u))==null?void 0:f.commissionWalletSubsidy)==null?void 0:c.balance)),1)]),t("div",null,[e[17]||(e[17]=s(" 线下补差:")),t("span",Ae,"￥"+r(l(d)((R=(y=l(u))==null?void 0:y.commissionOfflineSubsidy)==null?void 0:R.balance)),1)])])])]),t("div",null,[i(P,null,{default:a(()=>e[18]||(e[18]=[t("div",null," 平台补差：补差场景出现于平台、店铺结算金额为负数的情况，对平台进行补差的行为。根据用户的支付方式，使用不同的方式进行补差。平台补差=微信补差+余额补差+线下补差。 ",-1),t("div",null," 微信补差：用户使用微信支付的场景所需的补差时，使用微信进行补差。 ",-1),t("div",null," 线下补差：用户使用线下支付的场景所需的补差时，使用微信进行补差。 ",-1),t("div",null," 余额补差：用户使用余额支付的场景所需的补差时，使用余额进行补差。如果出现其他支付方式在没有其他调整的方式下，默认使用余额进行补差。 ",-1)])),_:1})])]),i(A,{"mt-20px":"",type:"primary",onClick:$},{default:a(()=>e[19]||(e[19]=[s(" 申请提现 ")])),_:1})])]}),_:1}),i(h,{key:"offLinePay",title:"线下支付"},{default:a(()=>{var n,o;return[t("div",je,[t("div",Fe,[t("div",null,[i(x,{heading:3},{default:a(()=>e[20]||(e[20]=[s(" 线下支付 ")])),_:1}),t("div",Me," ￥"+r(l(d)((o=(n=l(u))==null?void 0:n.offlinePayment)==null?void 0:o.balance)),1)]),t("div",null,[i(P,null,{default:a(()=>e[21]||(e[21]=[t("div",null," 线下支付：包含用户线下充值、用户线下支付的累计。 ",-1)])),_:1})])])])]}),_:1}),i(h,{key:"balance",title:"余额托管代收"},{default:a(()=>{var n,o;return[t("div",Be,[t("div",De,[t("div",null,[i(x,{heading:3},{default:a(()=>e[22]||(e[22]=[s(" 余额托管代收 ")])),_:1}),t("div",Ee," ￥"+r(l(d)((o=(n=l(u))==null?void 0:n.balanceCollection)==null?void 0:o.balance)),1)]),t("div",null,[i(P,null,{default:a(()=>e[23]||(e[23]=[t("div",null," 余额托管代收：用户使用余额支付时，余额会暂时汇转至该钱包。店铺补差时，结算钱也会汇转至该钱包。 ",-1)])),_:1})])])])]}),_:1})]),_:1},8,["active-key"]),l(m)!=="4"?(_(),w("div",Ke,[i(x,{heading:5},{default:a(()=>e[24]||(e[24]=[s(" 变更记录 ")])),_:1})])):M("",!0),(_(!0),w(Q,null,z(l(I),(n,o)=>(_(),w("div",{key:o},[l(m)===o?(_(),w("div",Le,[i(K,{"active-key":n.tab,"onUpdate:activeKey":f=>n.tab=f,onChange:C},{default:a(()=>[(_(!0),w(Q,null,z(n.tabPane,(f,c)=>(_(),j(h,{key:c,index:c,title:f},null,8,["index","title"]))),128))]),_:2},1032,["active-key","onUpdate:activeKey"])])):M("",!0)]))),128)),l(U)&&l(m)!=="4"?(_(),j(l(se),{key:1,ref_key:"tablePageRef",ref:X,columns:l(I)[l(m)].columns,api:l(le),"api-params":l(I)[l(m)].apiParams,bordered:!0},{money:a(({data:n})=>[n.money>0?(_(),w("span",Ne,r(l(d)(n.money,"+ ¥")),1)):(_(),w("span",Oe,r(l(d)(-n.money,"- ¥")),1))]),_:1},8,["columns","api","api-params"])):M("",!0),i(O,{visible:l(W),"onUpdate:visible":e[2]||(e[2]=n=>F(W)?W.value=n:null),"align-center":!1,footer:!1},{title:a(()=>e[25]||(e[25]=[s(" 充值金额 ")])),default:a(()=>[i(N,{ref_key:"formRef",ref:B,model:l(S),onSubmit:Z},{default:a(()=>[i(T,{field:"price",label:"充值金额",rules:[l(J)]},{default:a(()=>[i(L,{modelValue:l(S).price,"onUpdate:modelValue":e[1]||(e[1]=n=>l(S).price=n),min:0,style:{width:"260px"},"allow-clear":""},null,8,["modelValue"])]),_:1},8,["rules"]),i(T,{label:"操作"},{default:a(()=>[i(A,{"html-type":"submit",type:"primary"},{default:a(()=>e[26]||(e[26]=[s(" 保存 ")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"]),i(O,{visible:l(k),"onUpdate:visible":e[4]||(e[4]=n=>F(k)?k.value=n:null),"align-center":!1,footer:!1},{title:a(()=>e[27]||(e[27]=[s(" 申请提现 ")])),default:a(()=>[i(N,{ref_key:"withdrawApplyFormRef",ref:D,model:l(V),onSubmit:ee},{default:a(()=>[i(T,{field:"price",label:"充值金额",rules:[l(J)]},{default:a(()=>[i(L,{modelValue:l(V).price,"onUpdate:modelValue":e[3]||(e[3]=n=>l(V).price=n),min:0,style:{width:"260px"},"allow-clear":""},null,8,["modelValue"])]),_:1},8,["rules"]),i(T,{label:"操作"},{default:a(()=>[i(A,{"html-type":"submit",type:"primary"},{default:a(()=>e[28]||(e[28]=[s(" 保存 ")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])]),_:1})}}}),Ye=pe(qe,[["__scopeId","data-v-6a88d66d"]]);export{Ye as default};
